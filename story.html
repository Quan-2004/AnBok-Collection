<!doctype html>
	<html class="no-js" lang="zxx">

<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	 <title>AnBok Collection</title>
	<meta name="description" content="">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="apple-touch-icon" href="apple-touch-icon.png">
	<link rel="stylesheet" href="css/bootstrap.min.css">
	<link rel="stylesheet" href="css/normalize.css">
	<link rel="stylesheet" href="css/font-awesome.min.css">
	<link rel="stylesheet" href="css/icomoon.css">
	<link rel="stylesheet" href="css/jquery-ui.css">
	<link rel="stylesheet" href="css/owl.carousel.css">
	<link rel="stylesheet" href="css/transitions.css">
	
	<!-- SweetAlert2 CSS -->
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">
	<link rel="stylesheet" href="css/main.css">
	<link rel="stylesheet" href="css/color-custom.css">
	<link rel="stylesheet" href="css/responsive.css">
	<script src="js/vendor/modernizr-2.8.3-respond-1.4.2.min.js"></script>
	<style>
	@keyframes float {
		0%, 100% { transform: translateY(0px); }
		50% { transform: translateY(-20px); }
	}
	
	@keyframes rotate {
		from { transform: translate(-50%, -50%) rotate(0deg); }
		to { transform: translate(-50%, -50%) rotate(360deg); }
	}
	
	@keyframes scroll {
		0% { transform: translateX(-50%) translateY(0px); opacity: 1; }
		100% { transform: translateX(-50%) translateY(20px); opacity: 0; }
	}
	
	.tg-banner .tg-btn:hover {
		transform: translateY(-3px);
		box-shadow: 0 8px 25px rgba(0,0,0,0.3);
	}
	
	/* Membership Package Hover Effects */
	.tg-package-card:hover {
		transform: translateY(-5px);
		box-shadow: 0 10px 30px rgba(0,0,0,0.15);
	}
	
	.tg-package-card .tg-btn:hover {
		transform: translateY(-2px);
		box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
	}
	
	/* Basic Package Button Hover */
	.tg-package-card:not([style*="gradient"]) .tg-btn:hover {
		background: #4A6366 !important;
		color: white !important;
		box-shadow: 0 6px 20px rgba(74, 99, 102, 0.4) !important;
	}
	
	/* Premium Package Button Hover */
	.tg-package-card[style*="gradient"] .tg-btn:hover {
		background: rgba(255,255,255,0.9) !important;
		color: #4A6366 !important;
		box-shadow: 0 6px 20px rgba(255, 255, 255, 0.4) !important;
	}
	
	/* VIP Package Button Hover */
	.tg-package-card[style*="#ffd700"] .tg-btn:hover {
		background: #E8944A !important;
		color: white !important;
		box-shadow: 0 6px 20px rgba(244, 162, 97, 0.4) !important;
	}
	
	.tg-banner .tg-btn:not(.tg-active):hover {
		background: rgba(255,255,255,0.1);
		border-color: rgba(255,255,255,0.5);
	}
	
	@media (max-width: 768px) {
		.tg-banner h1 {
			font-size: 2.5rem !important;
		}
		
		.tg-banner h2 {
			font-size: 1.2rem !important;
		}
		
		.tg-banner .tg-bannerbtns {
			flex-direction: column;
		}
		
		.tg-banner .tg-bannerbtns .tg-btn {
			width: 100%;
			justify-content: center;
		}
		
		/* Auth Buttons */
		.tg-auth-buttons {
			display: flex;
			align-items: center;
			gap: 10px;
		}
		
		.tg-auth-buttons a {
			background: linear-gradient(135deg, #4A6366 0%, #3A4F52 100%);
			color: white;
			padding: 8px 20px;
			border-radius: 25px;
			text-decoration: none;
			font-weight: 600;
			font-size: 14px;
			transition: all 0.3s ease;
			display: inline-flex;
			align-items: center;
			gap: 8px;
			box-shadow: 0 4px 15px rgba(74, 99, 102, 0.3);
		}
		
		.tg-auth-buttons a:hover {
			transform: translateY(-2px);
			box-shadow: 0 6px 20px rgba(74, 99, 102, 0.4);
		}
		
		/* Mobile User Login */
		.tg-user-profile {
			display: none !important;
		}
		
		.tg-auth-buttons {
			display: block !important;
			margin-top: 10px;
		}
		
		.tg-middlecontainer .col-xs-12 {
			flex-direction: column;
			gap: 15px;
		}
		
		/* Book card text truncation */
		.tg-booktitle h3 a {
			white-space: nowrap;
			overflow: hidden;
			text-overflow: ellipsis;
			display: block;
			max-width: 100%;
		}
		
		.tg-bookwriter {
			white-space: nowrap;
			overflow: hidden;
			text-overflow: ellipsis;
			display: block;
		}
		
		.tg-bookscategories li a {
			white-space: nowrap;
			overflow: hidden;
			text-overflow: ellipsis;
			display: block;
			max-width: 100%;
		}
	}
	
	/* Book card text truncation for all screen sizes */
	.tg-booktitle h3 a {
		white-space: nowrap;
		overflow: hidden;
		text-overflow: ellipsis;
		display: block;
		max-width: 100%;
	}
	
	.tg-bookwriter {
		white-space: nowrap;
		overflow: hidden;
		text-overflow: ellipsis;
		display: block;
	}
	
	.tg-bookscategories li a {
		white-space: nowrap;
		overflow: hidden;
		text-overflow: ellipsis;
		display: block;
		max-width: 100%;
	}
	
	.tg-btnaddtowishlist span {
		white-space: nowrap;
		overflow: hidden;
		text-overflow: ellipsis;
		display: block;
		max-width: 100%;
	}
	
	.tg-btn tg-btnstyletwo em {
		white-space: nowrap;
		overflow: hidden;
		text-overflow: ellipsis;
		display: block;
		max-width: 100%;
	}
	
	/* Top Trending Styles */
	.trending-column {
		padding: 20px;
		height: 100%;
	}
	
	.trending-header {
		display: flex;
		align-items: center;
		margin-bottom: 20px;
		padding-bottom: 10px;
		border-bottom: 1px solid #333;
	}
	
	.trending-header h3 {
		font-size: 18px;
		font-weight: bold;
	}
	
	.trending-list {
		margin-bottom: 20px;
	}
	
	.trending-item {
		display: flex;
		align-items: center;
		margin-bottom: 15px;
		padding: 8px 0;
	}
	
	.trending-number {
		font-weight: bold;
		color: #ffd700;
		min-width: 20px;
	}
	
	.trending-title {
		font-size: 14px;
		color: #ccc;
		flex: 1;
	}
	
	.trending-footer {
		text-align: center;
		padding-top: 15px;
		border-top: 1px solid #333;
	}
	
	.trending-comments {
		margin-bottom: 20px;
	}
	
	.comment-card {
		display: flex;
		align-items: flex-start;
		margin-bottom: 15px;
		padding: 12px;
		background: rgba(255,255,255,0.05);
		border-radius: 8px;
	}
	
	.comment-content {
		flex: 1;
		margin-left: 12px;
	}
	
	.comment-user {
		font-weight: bold;
		color: #ffd700;
		font-size: 14px;
		margin-bottom: 4px;
	}
	
	.comment-text {
		color: #ccc;
		font-size: 13px;
		margin-bottom: 6px;
		line-height: 1.4;
	}
	
	.comment-movie {
		display: flex;
		align-items: center;
		font-size: 12px;
		color: #999;
	}
	
	.comment-movie i {
		margin-right: 6px;
	}
	
	@media (max-width: 768px) {
		.trending-column {
			margin-bottom: 30px;
		}
		
		.trending-item {
			flex-wrap: wrap;
		}
		
		.trending-title {
			font-size: 12px;
		}
	}
	
	/* Banner Styles */
	.tg-banner {
		background: linear-gradient(135deg, #4A6366 0%, #3A4F52 100%);
		min-height: 600px;
		position: relative;
		overflow: hidden;
	}
	
	.banner-bg-pattern {
		position: absolute;
		top: 0;
		left: 0;
		right: 0;
		bottom: 0;
		background-image: url('data:image/svg+xml,%3Csvg width="60" height="60" viewBox="0 0 60 60" xmlns="http://www.w3.org/2000/svg"%3E%3Cg fill="none" fill-rule="evenodd"%3E%3Cg fill="%23BEB6F2" fill-opacity="0.15"%3E%3Ccircle cx="30" cy="30" r="2"/%3E%3C/g%3E%3C/g%3E%3C/svg%3E');
		opacity: 0.4;
	}
	

	
			/* Navigation Menu Layout */
		.tg-navigationarea {
			background: white;
			border-bottom: 1px solid #e0e0e0;
		}
		
		.tg-navigation ul {
			display: flex;
			align-items: center;
			justify-content: flex-start;
			flex-wrap: wrap;
			gap: 0;
			width: 100%;
		}
	
	.tg-navigation ul li {
		display: flex;
		align-items: center;
	}
	
			/* Menu Item Alignment */
		.tg-navigation ul li a {
			padding: 15px 20px;
			display: flex;
			align-items: center;
			text-decoration: none;
			color: #333;
			font-weight: 500;
			transition: all 0.3s ease;
			position: relative;
		}
		
		/* Navigation Container */
		.tg-navigationholder {
			background: white;
			padding: 0;
		}
	
	.tg-navigation ul li a:hover {
		color: #F4A261;
		background: rgba(244, 162, 97, 0.1);
	}
	
			/* Sub-menu Alignment */
		.tg-navigation ul li .sub-menu {
			position: absolute;
			top: 100%;
			left: 0;
			background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
			min-width: 220px;
			box-shadow: 0 15px 35px rgba(0,0,0,0.15);
			border-radius: 12px;
			padding: 8px 0;
			z-index: 1000;
			opacity: 0;
			visibility: hidden;
			transform: translateY(-15px) scale(0.95);
			transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
			border: 1px solid rgba(255,255,255,0.2);
			backdrop-filter: blur(10px);
		}
		
		/* Mega Menu Position */
		.tg-navigation ul li.menu-item-has-mega-menu {
			position: static;
		}
	
	.tg-navigation ul li:hover .sub-menu {
		opacity: 1;
		visibility: visible;
		transform: translateY(0) scale(1);
	}
	
	.tg-navigation ul li .sub-menu li {
		display: block;
		margin: 0;
		position: relative;
	}
	
			.tg-navigation ul li .sub-menu li a {
			padding: 12px 20px;
			display: block;
			color: #333;
			font-size: 14px;
			font-weight: 500;
			border-radius: 0;
			transition: all 0.3s ease;
			position: relative;
			overflow: hidden;
		}
	
	.tg-navigation ul li .sub-menu li a::before {
		content: '';
		position: absolute;
		left: 0;
		top: 0;
		width: 0;
		height: 100%;
		background: linear-gradient(90deg, rgba(244, 162, 97, 0.1) 0%, rgba(244, 162, 97, 0.05) 100%);
		transition: width 0.3s ease;
		z-index: -1;
	}
	
	.tg-navigation ul li .sub-menu li a:hover {
		background: transparent;
		color: #F4A261;
		transform: translateX(5px);
	}
	
	.tg-navigation ul li .sub-menu li a:hover::before {
		width: 100%;
	}
	
	/* Sub-menu arrow indicator */
	.tg-navigation ul li .sub-menu::before {
		content: '';
		position: absolute;
		top: -8px;
		left: 25px;
		width: 0;
		height: 0;
		border-left: 8px solid transparent;
		border-right: 8px solid transparent;
		border-bottom: 8px solid #ffffff;
		filter: drop-shadow(0 -2px 2px rgba(0,0,0,0.1));
	}
	
	/* Sub-menu item hover effects */
	.tg-navigation ul li .sub-menu li:first-child a {
		border-radius: 12px 12px 0 0;
	}
	
	.tg-navigation ul li .sub-menu li:last-child a {
		border-radius: 0 0 12px 12px;
	}
	
	
		
		/* Mega Menu Styles */
		.mega-menu {
			position: absolute;
			top: 100%;
			left: 0;
			background: white;
			min-width: 800px;
			box-shadow: 0 15px 35px rgba(0,0,0,0.15);
			border-radius: 12px;
			padding: 0;
			z-index: 1000;
			opacity: 0;
			visibility: hidden;
			transform: translateY(-15px) scale(0.95);
			transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
			border: 1px solid rgba(255,255,255,0.2);
			backdrop-filter: blur(10px);
		}
		
		.menu-item-has-mega-menu:hover .mega-menu {
			opacity: 1;
			visibility: visible;
			transform: translateY(0) scale(1);
		}
		
		.mega-menu-container {
			display: flex;
			flex-wrap: wrap;
			padding: 25px;
			gap: 20px;
		}
		
		.mega-menu-column {
			flex: 1;
			min-width: 180px;
		}
		
		.mega-menu-section {
			margin-bottom: 20px;
			padding: 15px;
			border-radius: 8px;
			transition: all 0.3s ease;
		}
		
		.mega-menu-section:hover {
			background: rgba(244, 162, 97, 0.05);
			transform: translateY(-2px);
		}
		
		.mega-menu-section h4 {
			color: #4A6366;
			font-size: 16px;
			font-weight: 700;
			margin-bottom: 15px;
			padding-bottom: 8px;
			border-bottom: 2px solid #F4A261;
			display: flex;
			align-items: center;
			justify-content: space-between;
		}
		
		.mega-menu-section ul {
			list-style: none;
			padding: 0;
			margin: 0;
		}
		
		.mega-menu-section ul li {
			margin-bottom: 8px;
		}
		
		.mega-menu-section ul li a {
			color: #666;
			font-size: 14px;
			font-weight: 500;
			text-decoration: none;
			transition: all 0.3s ease;
			display: block;
			padding: 6px 0;
			position: relative;
			padding-left: 15px;
		}
		
		.mega-menu-section ul li a::before {
			content: '';
			position: absolute;
			left: 0;
			top: 50%;
			transform: translateY(-50%);
			width: 4px;
			height: 4px;
			background: #F4A261;
			border-radius: 50%;
			opacity: 0;
			transition: all 0.3s ease;
		}
		
		.mega-menu-section ul li a:hover {
			color: #4A6366;
			transform: translateX(5px);
		}
		
		.mega-menu-section ul li a:hover::before {
			opacity: 1;
		}
		
		/* Mega Menu Badge */
		.mega-menu-section ul li a .badge {
			background: #F4A261;
			color: white;
			font-size: 10px;
			padding: 2px 6px;
			border-radius: 10px;
			margin-left: 8px;
			font-weight: 600;
		}
		
		/* Mega Menu Section Count */
		.mega-menu-section h4 .count {
			background: #4A6366;
			color: white;
			font-size: 11px;
			padding: 2px 6px;
			border-radius: 10px;
			margin-left: auto;
			font-weight: 600;
		}
		
		/* Mega Menu Arrow */
		.mega-menu::before {
			content: '';
			position: absolute;
			top: -8px;
			left: 25px;
			width: 0;
			height: 0;
			border-left: 8px solid transparent;
			border-right: 8px solid transparent;
			border-bottom: 8px solid #ffffff;
			filter: drop-shadow(0 -2px 2px rgba(0,0,0,0.1));
		}
		
		/* Responsive Mega Menu */
		@media (max-width: 768px) {
			.mega-menu {
				min-width: 300px;
				left: -50px;
			}
			
			.mega-menu-container {
				flex-direction: column;
				padding: 15px;
				gap: 15px;
			}
			
			.mega-menu-column {
				min-width: auto;
			}
			
			.mega-menu-section h4 {
				font-size: 14px;
			}
			
			.mega-menu-section ul li a {
				font-size: 13px;
			}
			
			.mega-menu-section {
				padding: 10px;
			}
			
			.mega-menu-section .count {
				font-size: 10px;
				padding: 1px 4px;
			}
			
			.mega-menu-section .badge {
				font-size: 9px;
				padding: 1px 4px;
			}
		}
		
		@media (max-width: 480px) {
			.mega-menu {
				min-width: 280px;
				left: -80px;
			}
			
			.mega-menu-container {
				padding: 10px;
				gap: 10px;
			}
		}
		
		/* Mega Menu Hover Effects */
		.mega-menu-section:hover h4 {
			color: #F4A261;
		}
		
		/* Mega Menu Animation */
		@keyframes megaMenuFadeIn {
			from {
				opacity: 0;
				transform: translateY(-20px) scale(0.9);
			}
			to {
				opacity: 1;
				transform: translateY(0) scale(1);
			}
		}
		
		.menu-item-has-mega-menu:hover .mega-menu {
			animation: megaMenuFadeIn 0.3s ease;
		}
	
	/* Middle Container Layout */
	.tg-middlecontainer .col-xs-12 {
		display: flex;
		align-items: center;
		justify-content: space-between;
		flex-wrap: wrap;
		gap: 20px;
	}
	
	.tg-logo {
		flex-shrink: 0;
	}
	
			/* Navigation Action Buttons */
		.tg-action-buttons {
			display: flex;
			align-items: center;
			gap: 12px;
			margin-left: auto;
			padding: 0;
		}
		
		/* Navigation Container Background */
		.tg-navigationarea .container {
			background: white;
		}
		
		/* Navigation Area Styling */
		.tg-navigationarea {
			background: white;
			border-bottom: 1px solid #e0e0e0;
			box-shadow: 0 2px 10px rgba(0,0,0,0.1);
		}
	
	/* Action Container Styling */
	.tg-action-container {
		display: flex;
		align-items: center;
		gap: 5px;
		background: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%);
		border: 1px solid rgba(255,255,255,0.2);
		border-radius: 50px;
		padding: 0px 0px;
		box-shadow: 0 4px 15px rgba(0,0,0,0.1);
		transition: all 0.3s ease;
	}
	

	
	.tg-action-buttons .dropdown {
		display: flex;
		align-items: center;
		margin: 0;
	}
	
	/* Search Dropdown Styles */
	.tg-wishlistandcart {
		display: flex;
		align-items: center;
		justify-content: center;
		gap: 15px;
		margin-left: auto;
		padding: 0 15px;
	}
	
	.tg-wishlistandcart .dropdown {
		display: flex;
		align-items: center;
		justify-content: center;
		margin: 0 5px;
	}
	
	.tg-action-buttons .tg-searchbtn,
	.tg-action-buttons .tg-btnthemedropdown {
		display: flex;
		align-items: center;
		justify-content: center;
		background: #666;
		width: 40px;
		height: 40px;
		border-radius: 50%;
		color: white;
		text-decoration: none;
		transition: all 0.3s ease;
		box-shadow: 0 2px 5px rgba(0,0,0,0.2);
		position: relative;
	}
	
	.tg-action-buttons .tg-searchbtn:hover,
	.tg-action-buttons .tg-btnthemedropdown:hover {
		background: #F4A261;
		transform: translateY(-2px);
		box-shadow: 0 4px 15px rgba(244, 162, 97, 0.3);
		color: white;
		text-decoration: none;
	}
	
	.tg-action-buttons .tg-searchbtn i,
	.tg-action-buttons .tg-btnthemedropdown i {
		font-size: 12px;
	}
	
	.tg-action-buttons .tg-themebadge {
		position: absolute;
		top: -5px;
		right: -5px;
		background: #e74c3c;
		color: white;
		border-radius: 50%;
		width: 16px;
		height: 16px;
		display: flex;
		align-items: center;
		justify-content: center;
		font-size: 10px;
		font-weight: bold;
	}
	
	/* Cart Total Price Styling */
	.tg-cart-total {
		display: flex;
		align-items: center;
		margin-left: 8px;
	}
	
	.tg-total-price {
		color: #333;
		padding: 4px 8px;
		border-radius: 12px;
		font-size: 12px;
		font-weight: 600;
		white-space: nowrap;
	}
	
	.tg-searchdropdown {
		position: relative;
	}
	
	.tg-searchbtn {
		display: flex;
		align-items: center;
		justify-content: center;
		background: #666;
		width: 28px;
		height: 28px;
		border-radius: 50%;
		color: white;
		text-decoration: none;
		transition: all 0.3s ease;
		box-shadow: 0 2px 5px rgba(0,0,0,0.2);
	}
	
	.tg-searchbtn:hover {
		background: #F4A261;
		transform: translateY(-2px);
		box-shadow: 0 4px 15px rgba(244, 162, 97, 0.3);
		color: white;
		text-decoration: none;
	}
	
	.tg-searchbtn i {
		font-size: 12px;
	}
	
	/* Dropdown Menu */
	.tg-searchdropdownmenu {
		position: absolute;
		top: 100%;
		right: 0;
		min-width: 300px;
		background: transparent;
		border: none;
		border-radius: 0;
		box-shadow: none;
		padding: 0;
		margin-top: 5px;
		z-index: 1000;
		display: none;
	}
	
	.tg-searchdropdownmenu.show {
		display: block;
	}
	
	.tg-searchdropdownmenu::before {
		content: '';
		position: absolute;
		top: -8px;
		right: 15px;
		width: 0;
		height: 0;
		border-left: 8px solid transparent;
		border-right: 8px solid transparent;
		border-bottom: 8px solid transparent;
	}
	
	.tg-searchform {
		margin: 0;
	}
	
	.tg-inputgroup {
		display: flex;
		align-items: center;
		background: transparent;
		border-radius: 0;
		border: none;
		overflow: hidden;
		transition: all 0.3s ease;
	}
	
	.tg-inputgroup:focus-within {
		border-color: transparent;
		background: transparent;
		box-shadow: none;
	}
	
	.tg-searchform .form-control {
		border: none;
		padding: 12px 15px;
		font-size: 14px;
		background: white;
		flex: 1;
		outline: none;
		border-radius: 5px;
	}
	
	.tg-searchform .form-control::placeholder {
		color: #999;
		font-style: italic;
	}
	
	.tg-searchsubmit {
		background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
		border: none;
		padding: 12px 15px;
		color: white;
		cursor: pointer;
		transition: all 0.3s ease;
		display: none;
	}
	
	.tg-searchsubmit:hover {
		background: linear-gradient(135deg, #5a6fd8 0%, #6a4190 100%);
		transform: none;
	}
	
	.tg-searchsubmit i {
		display: none;
	}
	
			/* Mobile Responsive for Search */
		@media (max-width: 768px) {
			.tg-action-buttons {
				gap: 8px;
				margin-left: auto;
			}
			
			.tg-action-buttons .tg-searchbtn,
			.tg-action-buttons .tg-btnthemedropdown {
				width: 24px;
				height: 24px;
			}
			
			.tg-action-buttons .tg-searchbtn i,
			.tg-action-buttons .tg-btnthemedropdown i {
				font-size: 10px;
			}
			
			.tg-searchdropdownmenu {
				min-width: 280px;
				right: -120px;
			}
			
			/* Mobile Navigation Area */
			.tg-navigationarea {
				background: white;
				box-shadow: 0 2px 8px rgba(0,0,0,0.1);
			}
		}
	

	
	.floating-element {
		position: absolute;
		border-radius: 50%;
		animation: float 6s ease-in-out infinite;
	}
	
	.float-1 {
		top: 10%;
		left: 10%;
		width: 100px;
		height: 100px;
		background: rgba(255,255,255,0.1);
		animation-duration: 6s;
	}
	
	.float-2 {
		top: 20%;
		right: 15%;
		width: 80px;
		height: 80px;
		background: rgba(255,255,255,0.08);
		animation-duration: 8s;
		animation-direction: reverse;
	}
	
	.float-3 {
		bottom: 20%;
		left: 20%;
		width: 60px;
		height: 60px;
		background: rgba(255,255,255,0.06);
		animation-duration: 7s;
			}
		
		/* Live Chat Styles */
		.tg-livechat {
			position: fixed;
			bottom: 20px;
			right: 20px;
			z-index: 1000;
			font-family: 'Arial', sans-serif;
		}
		
		.tg-chat-toggle {
			width: 60px;
			height: 60px;
			background: linear-gradient(135deg, #4A6366 0%, #3A4F52 100%);
			border-radius: 50%;
			display: flex;
			align-items: center;
			justify-content: center;
			color: white;
			cursor: pointer;
			box-shadow: 0 4px 15px rgba(0,0,0,0.3);
			transition: all 0.3s ease;
			position: relative;
		}
		
		.tg-chat-toggle:hover {
			transform: scale(1.1);
			box-shadow: 0 6px 20px rgba(0,0,0,0.4);
		}
		
		.tg-chat-badge {
			position: absolute;
			top: -5px;
			right: -5px;
			background: #e74c3c;
			color: white;
			border-radius: 50%;
			width: 20px;
			height: 20px;
			display: flex;
			align-items: center;
			justify-content: center;
			font-size: 10px;
			font-weight: bold;
		}
		
		.tg-chat-window {
			position: absolute;
			bottom: 80px;
			right: 0;
			width: 350px;
			height: 450px;
			background: white;
			border-radius: 15px;
			box-shadow: 0 10px 30px rgba(0,0,0,0.2);
			display: none;
			flex-direction: column;
			overflow: hidden;
			z-index: 1000;
			box-sizing: border-box;
		}
		
		.tg-chat-window.active {
			display: flex !important;
		}
		
		.tg-chat-header {
			background: linear-gradient(135deg, #4A6366 0%, #3A4F52 100%);
			color: white;
			padding: 15px 20px;
			display: flex;
			align-items: center;
			justify-content: space-between;
			flex-shrink: 0;
			height: 60px;
			box-sizing: border-box;
		}
		
		.tg-chat-title {
			display: flex;
			align-items: center;
			gap: 10px;
			font-weight: 600;
		}
		
		.tg-chat-actions {
			display: flex;
			gap: 10px;
		}
		
		.tg-chat-actions button {
			background: none;
			border: none;
			color: white;
			cursor: pointer;
			padding: 5px;
			border-radius: 3px;
			transition: background 0.3s ease;
		}
		
		.tg-chat-actions button:hover {
			background: rgba(255,255,255,0.2);
		}
		
		.tg-chat-body {
			flex: 1;
			display: flex;
			flex-direction: column;
			min-height: 0;
			height: 100%;
		}
		
		.tg-chat-messages {
			flex: 1;
			padding: 15px;
			overflow-y: auto;
			background: #f8f9fa;
			min-height: 0;
			height: calc(100% - 140px);
		}
		
		.tg-message {
			display: flex;
			margin-bottom: 15px;
			gap: 10px;
		}
		
		.tg-message-user {
			flex-direction: row-reverse;
		}
		
		.tg-message-avatar {
			width: 35px;
			height: 35px;
			border-radius: 50%;
			overflow: hidden;
			flex-shrink: 0;
		}
		
		.tg-message-avatar img {
			width: 100%;
			height: 100%;
			object-fit: cover;
		}
		
		.tg-message-content {
			max-width: 70%;
		}
		
		.tg-message-text {
			background: white;
			padding: 10px 15px;
			border-radius: 15px;
			box-shadow: 0 2px 5px rgba(0,0,0,0.1);
			margin-bottom: 5px;
		}
		
		.tg-message-user .tg-message-text {
			background: #4A6366;
			color: white;
		}
		
		.tg-message-time {
			font-size: 11px;
			color: #999;
			text-align: right;
		}
		
		.tg-message-user .tg-message-time {
			text-align: left;
		}
		
		.tg-chat-input {
			padding: 15px;
			display: flex;
			gap: 10px;
			background: white;
			border-top: 1px solid #eee;
			flex-shrink: 0;
			position: relative;
			z-index: 1;
			height: 80px;
			box-sizing: border-box;
		}
		
		.tg-chat-input input {
			flex: 1;
			border: 1px solid #ddd;
			border-radius: 20px;
			padding: 10px 15px;
			outline: none;
			font-size: 14px;
		}
		
		.tg-chat-input input:focus {
			border-color: #4A6366;
		}
		
		.tg-chat-input button {
			background: #4A6366;
			color: white;
			border: none;
			border-radius: 50%;
			width: 40px;
			height: 40px;
			cursor: pointer;
			transition: all 0.3s ease;
		}
		
		.tg-chat-input button:hover {
			background: #3A4F52;
			transform: scale(1.1);
		}
		
		/* Reading Progress Bar */
		.tg-reading-progress {
			position: fixed;
			top: 0;
			left: 0;
			width: 100%;
			height: 3px;
			background: rgba(255,255,255,0.2);
			z-index: 10000;
		}
		
		.tg-progress-bar {
			height: 100%;
			background: linear-gradient(90deg, #4A6366 0%, #F4A261 100%);
			width: 0%;
			transition: width 0.3s ease;
		}
		
		/* Back to Top Button */
		.tg-back-to-top {
			position: fixed;
			bottom: 100px;
			right: 20px;
			width: 45px;
			height: 45px;
			background: linear-gradient(135deg, #4A6366 0%, #3A4F52 100%);
			color: white;
			border-radius: 50%;
			display: flex;
			align-items: center;
			justify-content: center;
			cursor: pointer;
			opacity: 0;
			visibility: hidden;
			transform: translateY(20px) scale(0.8);
			transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
			z-index: 999;
			box-shadow: 0 4px 15px rgba(0,0,0,0.3);
			font-size: 16px;
			border: 2px solid rgba(255,255,255,0.1);
			backdrop-filter: blur(10px);
		}
		
		.tg-back-to-top.active {
			opacity: 1;
			visibility: visible;
			transform: translateY(0) scale(1);
		}
		
		.tg-back-to-top:hover {
			transform: translateY(-3px) scale(1.05);
			box-shadow: 0 6px 20px rgba(0,0,0,0.4);
			background: linear-gradient(135deg, #5A7376 0%, #4A5F62 100%);
		}
		
		.tg-back-to-top:active,
		.tg-back-to-top.clicked {
			transform: translateY(-1px) scale(0.95);
			transition: all 0.1s ease;
			background: linear-gradient(135deg, #6A8386 0%, #5A6F72 100%);
		}
		
		/* Mobile responsive for back-to-top */
		@media (max-width: 768px) {
			.tg-back-to-top {
				width: 40px;
				height: 40px;
				bottom: 80px;
				right: 15px;
				font-size: 14px;
			}
		}
		
		/* Quick Actions Menu */
		.tg-quick-actions {
			position: fixed;
			bottom: 20px;
			left: 20px;
			z-index: 999;
		}
		
		.tg-quick-toggle {
			width: 60px;
			height: 60px;
			background: linear-gradient(135deg, #F4A261 0%, #E8944A 100%);
			border-radius: 50%;
			display: flex;
			align-items: center;
			justify-content: center;
			color: white;
			cursor: pointer;
			box-shadow: 0 4px 15px rgba(0,0,0,0.3);
			transition: all 0.3s ease;
			font-size: 20px;
		}
		
		.tg-quick-toggle:hover {
			transform: scale(1.1);
			box-shadow: 0 6px 20px rgba(0,0,0,0.4);
		}
		
		.tg-quick-menu {
			position: absolute;
			bottom: 80px;
			left: 0;
			background: white;
			border-radius: 15px;
			box-shadow: 0 10px 30px rgba(0,0,0,0.2);
			padding: 10px;
			display: none;
			flex-direction: column;
			gap: 5px;
			min-width: 150px;
		}
		
		.tg-quick-menu.active {
			display: flex;
		}
		
		.tg-quick-item {
			display: flex;
			align-items: center;
			gap: 10px;
			padding: 12px 15px;
			color: #333;
			text-decoration: none;
			border-radius: 10px;
			transition: all 0.3s ease;
			font-size: 14px;
		}
		
		.tg-quick-item:hover {
			background: #f8f9fa;
			color: #4A6366;
			transform: translateX(5px);
		}
		
		.tg-quick-item i {
			width: 20px;
			text-align: center;
		}
		
		/* Mobile Responsive for New Features */
		@media (max-width: 768px) {
			.tg-chat-window {
				width: 300px;
				height: 400px;
				right: -10px;
			}
			
			.tg-quick-actions {
				bottom: 10px;
				left: 10px;
			}
			
			.tg-quick-menu {
				left: -10px;
			}
			
			.tg-back-to-top {
				bottom: 80px;
				right: 10px;
			}
			
			/* Mobile responsive for user profile */
			.tg-user-profile {
				margin-top: 10px !important;
			}
			
			.tg-user-info {
				padding: 6px 12px !important;
			}
			
			.tg-user-avatar {
				width: 28px !important;
				height: 28px !important;
			}
			
			#userName {
				font-size: 12px !important;
			}
			
			.tg-user-dropdown {
				right: 0 !important;
				min-width: 180px !important;
			}
		}
		
		/* User Profile Styles */
		.tg-user-profile {
			position: relative;
		}
		
		.tg-user-info:hover {
			transform: translateY(-1px);
			box-shadow: 0 4px 15px rgba(74, 99, 102, 0.3);
		}
		
		/* Hover Dropdown Styles */
		.tg-user-info:hover .tg-user-dropdown,
		.tg-user-dropdown:hover {
			display: block !important;
			opacity: 1;
			visibility: visible;
			transform: translateY(0) scale(1);
		}
		
		.tg-user-info:hover .fa-chevron-down {
			transform: rotate(180deg) !important;
			transition: transform 0.3s ease;
		}
		
		.tg-user-dropdown {
			display: none;
			opacity: 0;
			visibility: hidden;
			transform: translateY(-10px) scale(0.95);
			transition: all 0.3s ease;
			animation: dropdownFadeIn 0.3s ease;
			pointer-events: auto;
		}
		
		@keyframes dropdownFadeIn {
			from {
				opacity: 0;
				transform: translateY(-10px) scale(0.95);
			}
			to {
				opacity: 1;
				transform: translateY(0) scale(1);
			}
		}
		
		.tg-dropdown-item:hover {
			background: #f8f9fa !important;
			transform: translateX(5px);
			transition: all 0.3s ease;
		}
		
		/* Smooth hover transition for user info */
		.tg-user-info {
			transition: all 0.3s ease;
		}
		
		/* Ensure dropdown stays visible when hovering over it */
		.tg-user-profile:hover .tg-user-dropdown {
			display: block !important;
			opacity: 1;
			visibility: visible;
		}
		
		/* Add gap between user info and dropdown */
		.tg-user-dropdown {
			margin-top: -10px;
		}
		
		/* Prevent dropdown from being cut off */
		.tg-user-profile {
			z-index: 1000;
		}
		
		/* Modal Styles */
		.tg-book-modal,
		.tg-timer-modal {
			position: fixed;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			z-index: 10000;
			display: none;
		}
		
		.tg-book-modal.active,
		.tg-timer-modal.active {
			display: flex;
			align-items: center;
			justify-content: center;
		}
		
		.tg-modal-overlay {
			position: absolute;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			background: rgba(0,0,0,0.7);
			backdrop-filter: blur(5px);
		}
		
		.tg-modal-content {
			position: relative;
			background: white;
			border-radius: 15px;
			max-width: 95%;
			max-height: 95%;
			width: 800px;
			overflow: hidden;
			box-shadow: 0 20px 60px rgba(0,0,0,0.3);
			animation: modalSlideIn 0.3s ease;
		}
		
		@keyframes modalSlideIn {
			from {
				opacity: 0;
				transform: scale(0.8) translateY(-50px);
			}
			to {
				opacity: 1;
				transform: scale(1) translateY(0);
			}
		}
		
		.tg-modal-header {
			background: white;
			color: #333;
			padding: 20px 25px;
			display: flex;
			align-items: center;
			justify-content: space-between;
			border-bottom: 1px solid #e0e0e0;
		}
		
		.tg-modal-header h3 {
			margin: 0;
			font-size: 1.3rem;
			font-weight: 600;
		}
		
		.tg-modal-close {
			background: #f8f9fa;
			border: none;
			color: #666;
			font-size: 20px;
			cursor: pointer;
			padding: 8px;
			border-radius: 50%;
			transition: all 0.3s ease;
			width: 40px;
			height: 40px;
			display: flex;
			align-items: center;
			justify-content: center;
		}
		
		.tg-modal-close:hover {
			background: #e9ecef;
			color: #333;
			transform: scale(1.1);
		}
		
		.tg-modal-body {
			padding: 25px;
			max-height: 70vh;
			overflow-y: auto;
		}
		
		/* Book Preview Modal Specific Styles */
		.tg-book-preview {
			display: flex;
			gap: 25px;
			margin-bottom: 25px;
		}
		
		.tg-book-cover {
			flex-shrink: 0;
			width: 200px;
		}
		
		.tg-book-cover img {
			width: 100%;
			height: auto;
			border-radius: 10px;
			box-shadow: 0 8px 25px rgba(0,0,0,0.2);
		}
		
		.tg-book-info {
			flex: 1;
		}
		
		.tg-book-info h4 {
			font-size: 1.5rem;
			font-weight: 700;
			margin-bottom: 10px;
			color: #333;
		}
		
		.tg-preview-author {
			color: #666;
			font-size: 1.1rem;
			margin-bottom: 15px;
		}
		
		.tg-preview-rating {
			display: flex;
			align-items: center;
			gap: 10px;
			margin-bottom: 20px;
		}
		
		.tg-rating-text {
			color: #666;
			font-size: 14px;
		}
		
		.tg-preview-details {
			margin-bottom: 20px;
		}
		
		.tg-preview-details p {
			margin-bottom: 8px;
			color: #555;
		}
		
		.tg-preview-details strong {
			color: #333;
		}
		
		.tg-preview-description h5 {
			font-size: 1.1rem;
			font-weight: 600;
			margin-bottom: 10px;
			color: #333;
		}
		
		.tg-preview-description p {
			color: #666;
			line-height: 1.6;
		}
		
		.tg-preview-actions {
			display: flex;
			gap: 15px;
			flex-wrap: wrap;
		}
		
		.tg-btn-preview {
			background: #4A6366 !important;
			color: white !important;
		}
		
		.tg-btn-wishlist {
			background: #F4A261 !important;
			color: white !important;
		}
		
		.tg-btn-cart {
			background: #28a745 !important;
			color: white !important;
		}
		
		/* Timer Modal Specific Styles */
		.tg-timer-content {
			max-width: 500px;
		}
		
		.tg-timer-display {
			text-align: center;
			margin-bottom: 30px;
		}
		
		.tg-timer-time {
			font-size: 3rem;
			font-weight: 700;
			color: #4A6366;
			margin-bottom: 10px;
			font-family: 'Courier New', monospace;
		}
		
		.tg-timer-status {
			color: #666;
			font-size: 1.1rem;
		}
		
		.tg-timer-controls {
			display: flex;
			gap: 15px;
			justify-content: center;
			margin-bottom: 30px;
		}
		
		.tg-timer-settings h5 {
			font-size: 1.1rem;
			font-weight: 600;
			margin-bottom: 15px;
			color: #333;
		}
		
		.tg-timer-presets {
			display: flex;
			gap: 10px;
			flex-wrap: wrap;
		}
		
		.tg-timer-preset {
			background: #f8f9fa;
			border: 2px solid #e9ecef;
			color: #333;
			padding: 10px 15px;
			border-radius: 25px;
			cursor: pointer;
			transition: all 0.3s ease;
			font-size: 14px;
		}
		
		.tg-timer-preset:hover,
		.tg-timer-preset.active {
			background: #4A6366;
			color: white;
			border-color: #4A6366;
		}
		
		/* Mobile Responsive for Modals */
		@media (max-width: 768px) {
			.tg-book-preview {
				flex-direction: column;
				text-align: center;
			}
			
			.tg-book-cover {
				width: 150px;
				margin: 0 auto;
			}
			
			.tg-timer-time {
				font-size: 2.5rem;
			}
			
			.tg-timer-controls {
				flex-direction: column;
				align-items: center;
			}
			
			.tg-timer-presets {
				justify-content: center;
			}
		}
		
		/* Auth Modal Styles */
		.auth-modal {
			display: none;
			position: fixed;
			z-index: 10001;
			left: 0;
			top: 0;
			width: 100%;
			height: 100%;
			overflow: auto;
			background-color: rgba(0,0,0,0.5);
			backdrop-filter: blur(5px);
		}
		
		.auth-modal-content {
			background-color: #fefefe;
			margin: 5% auto;
			padding: 0;
			border-radius: 15px;
			width: 90%;
			max-width: 400px;
			box-shadow: 0 20px 60px rgba(0,0,0,0.3);
			animation: modalSlideIn 0.3s ease;
			position: relative;
		}
		
		.auth-modal-header {
			background: linear-gradient(135deg, #4A6366 0%, #3A4F52 100%);
			color: white;
			padding: 20px 25px;
			border-radius: 15px 15px 0 0;
			display: flex;
			align-items: center;
			justify-content: space-between;
		}
		
		.auth-modal-title {
			margin: 0;
			font-size: 1.3rem;
			font-weight: 600;
		}
		
		.auth-close {
			color: white;
			font-size: 28px;
			font-weight: bold;
			cursor: pointer;
			background: none;
			border: none;
			padding: 0;
			line-height: 1;
		}
		
		.auth-close:hover {
			opacity: 0.7;
		}
		
		.auth-form {
			padding: 25px;
		}
		
		.auth-form-group {
			margin-bottom: 20px;
		}
		
		.auth-form-group label {
			display: block;
			margin-bottom: 8px;
			font-weight: 600;
			color: #333;
			font-size: 14px;
		}
		
		.auth-form-group input {
			width: 100%;
			padding: 12px 15px;
			border: 2px solid #e1e5e9;
			border-radius: 8px;
			font-size: 14px;
			transition: all 0.3s ease;
			box-sizing: border-box;
		}
		
		.auth-form-group input:focus {
			outline: none;
			border-color: #4A6366;
			box-shadow: 0 0 0 3px rgba(74, 99, 102, 0.1);
		}
		
		.auth-forgot-password {
			text-align: right;
			margin-bottom: 20px;
		}
		
		.auth-forgot-password a {
			color: #4A6366;
			text-decoration: none;
			font-size: 14px;
			font-weight: 500;
		}
		
		.auth-forgot-password a:hover {
			text-decoration: underline;
		}
		
		.auth-form-submit {
			width: 100%;
			background: linear-gradient(135deg, #4A6366 0%, #3A4F52 100%);
			color: white;
			padding: 12px;
			border: none;
			border-radius: 8px;
			font-size: 16px;
			font-weight: 600;
			cursor: pointer;
			transition: all 0.3s ease;
			margin-bottom: 20px;
		}
		
		.auth-form-submit:hover {
			transform: translateY(-2px);
			box-shadow: 0 8px 25px rgba(74, 99, 102, 0.3);
		}
		
		.auth-divider {
			text-align: center;
			margin: 20px 0;
			position: relative;
		}
		
		.auth-divider::before {
			content: '';
			position: absolute;
			top: 50%;
			left: 0;
			right: 0;
			height: 1px;
			background: #e1e5e9;
		}
		
		.auth-divider span {
			background: white;
			padding: 0 15px;
			color: #666;
			font-size: 14px;
		}
		
		.auth-google-login {
			width: 100%;
			background: white;
			color: #333;
			padding: 12px;
			border: 2px solid #e1e5e9;
			border-radius: 8px;
			font-size: 14px;
			font-weight: 500;
			cursor: pointer;
			transition: all 0.3s ease;
			display: flex;
			align-items: center;
			justify-content: center;
			gap: 10px;
			margin-bottom: 20px;
		}
		
		.auth-google-login:hover {
			background: #f8f9fa;
			border-color: #4A6366;
		}
		
		.auth-google-login img {
			width: 20px;
			height: 20px;
		}
		
		.auth-form-footer {
			text-align: center;
			margin-top: 20px;
		}
		
		.auth-form-footer p {
			margin: 0;
			color: #666;
			font-size: 14px;
		}
		
		.auth-form-footer a {
			color: #4A6366;
			text-decoration: none;
			font-weight: 600;
		}
		
		.auth-form-footer a:hover {
			text-decoration: underline;
		}
		
		.auth-info-text {
			color: #1E3A8A;
			font-size: 0.9rem;
			margin-bottom: 1.5rem;
			line-height: 1.5;
		}
		
		/* Mobile Responsive for Auth Modals */
		@media (max-width: 768px) {
			.auth-modal-content {
				margin: 10% auto;
				width: 95%;
			}
			
			.auth-form {
				padding: 20px;
			}
		}
		
		/* Universal Modal Styles */
		.tg-universal-modal {
			display: none;
			position: fixed;
			z-index: 10002;
			left: 0;
			top: 0;
			width: 100%;
			height: 100%;
			overflow: auto;
			background-color: rgba(0,0,0,0.5);
			backdrop-filter: blur(5px);
		}
		
		.tg-universal-modal-content {
			max-width: 420px;
			padding: 0;
			border-radius: 15px;
			overflow: hidden;
			background: #E6F3FA;
			margin: 5% auto;
			box-shadow: 0 20px 60px rgba(0,0,0,0.3);
			animation: modalSlideIn 0.3s ease;
		}
		
		.tg-universal-modal-header {
			background: #E6F3FA;
			color: #1E3A8A;
			padding: 20px 24px;
			margin: 0;
			border-bottom: 1px solid #E4B04A;
			display: flex;
			align-items: center;
			justify-content: space-between;
		}
		
		.tg-universal-modal-title {
			margin: 0;
			font-size: 1.2rem;
			font-weight: 600;
			color: #1E3A8A;
		}
		
		.tg-universal-close {
			color: #1E3A8A;
			font-size: 1.5rem;
			cursor: pointer;
			background: none;
			border: none;
			padding: 0;
			line-height: 1;
		}
		
		.tg-universal-close:hover {
			opacity: 0.7;
		}
		
		.tg-universal-modal-body {
			padding: 24px;
		}
		
		.tg-universal-icon {
			color: #e74c3c;
			font-size: 3rem;
			margin-bottom: 16px;
		}
		
		.tg-universal-heading {
			color: #1E3A8A;
			font-size: 1.1rem;
			font-weight: 600;
			margin-bottom: 8px;
		}
		
		.tg-universal-description {
			color: #7f8c8d;
			font-size: 0.95rem;
			line-height: 1.5;
			margin: 0;
		}
		
		.tg-universal-info-box {
			background: #F0F7FB;
			border-radius: 8px;
			padding: 16px;
			margin-bottom: 24px;
			border-left: 4px solid #e74c3c;
		}
		
		.tg-universal-info-text {
			color: #1E3A8A;
			font-size: 0.9rem;
			line-height: 1.5;
			margin: 0;
		}
		
		.tg-universal-info-icon {
			color: #e74c3c;
			margin-right: 8px;
		}
		
		.tg-universal-buttons {
			display: flex;
			gap: 16px;
		}
		
		.tg-universal-btn {
			flex: 1;
			border: none;
			border-radius: 8px;
			padding: 14px 0;
			font-size: 1rem;
			font-weight: 600;
			cursor: pointer;
			transition: all 0.3s ease;
		}
		
		.tg-universal-btn-cancel {
			background: #95a5a6;
			color: white;
		}
		
		.tg-universal-btn-cancel:hover {
			background: #7f8c8d;
		}
		
		.tg-universal-btn-danger {
			background: #e74c3c;
			color: white;
		}
		
		.tg-universal-btn-danger:hover {
			background: #c0392b;
		}
		
		.tg-universal-btn-success {
			background: #27ae60;
			color: white;
		}
		
		.tg-universal-btn-success:hover {
			background: #229954;
		}
		
		.tg-universal-btn-primary {
			background: #3498db;
			color: white;
		}
		
		.tg-universal-btn-primary:hover {
			background: #2980b9;
		}
		
		/* Mobile Responsive for Universal Modal */
		@media (max-width: 768px) {
			.tg-universal-modal-content {
				margin: 10% auto;
				width: 95%;
			}
			
			.tg-universal-buttons {
				flex-direction: column;
			}
		}
		
		/* Notification System Styles */
		.tg-notification {
			position: fixed;
			top: 20px;
			right: 20px;
			background: white;
			border-radius: 8px;
			box-shadow: 0 5px 20px rgba(0, 0, 0, 0.15);
			padding: 12px 16px;
			transform: translateX(100%);
			transition: transform 0.3s ease;
			z-index: 10000;
			border-left: 3px solid #4A6366;
			font-size: 13px;
			max-width: 300px;
			min-width: 250px;
		}
		
		.tg-notification.show {
			transform: translateX(0);
		}
		
		.tg-notification-content {
			display: flex;
			align-items: center;
			gap: 8px;
		}
		
		.tg-notification-content i {
			font-size: 16px;
			flex-shrink: 0;
		}
		
		.tg-notification-content span {
			font-size: 13px;
			line-height: 1.4;
			color: #333;
		}
		
		.tg-notification-success {
			border-left-color: #28a745;
		}
		
		.tg-notification-success i {
			color: #28a745;
		}
		
		.tg-notification-error {
			border-left-color: #dc3545;
		}
		
		.tg-notification-error i {
			color: #dc3545;
		}
		
		.tg-notification-info {
			border-left-color: #17a2b8;
		}
		
		.tg-notification-info i {
			color: #17a2b8;
		}
		
			/* Mobile Responsive for Notifications */
	@media (max-width: 768px) {
		.tg-notification {
			top: 10px;
			right: 10px;
			left: 10px;
			max-width: none;
			min-width: auto;
		}
	}
	
	/* Uniform Book Item Heights */
	.tg-bestsellingbooksslider .item {
		height: 100%;
		display: flex;
		flex-direction: column;
	}
	
	.tg-bestsellingbooksslider .tg-postbook {
		height: 100%;
		display: flex;
		flex-direction: column;
		min-height: 500px;
	}
	
	.tg-bestsellingbooksslider .tg-postbookcontent {
		flex: 1;
		display: flex;
		flex-direction: column;
	}
	
	.tg-bestsellingbooksslider .tg-booktitle {
		flex: 1;
		margin-bottom: 10px;
	}
	
	.tg-bestsellingbooksslider .tg-booktitle h3 {
		line-height: 1.3;
		min-height: 2.6em;
		display: -webkit-box;
		-webkit-box-orient: vertical;
		overflow: hidden;
	}
	
	.tg-bestsellingbooksslider .tg-bookprice {
		margin-top: auto;
	}
	
	.tg-bestsellingbooksslider 		.tg-btn {
			margin-top: 10px;
		}
		
		/* Membership Package Section Styles */
	.tg-membership-package {
		position: relative;
		overflow: hidden;
	}
	
	.tg-benefit-icon {
		transition: all 0.3s ease;
	}
	
	.tg-laptop-design {
		transition: all 0.3s ease;
	}
	
	.tg-character {
		transition: all 0.3s ease;
	}
	
	.tg-btn {
		transition: all 0.3s ease;
	}
	
	/* Mobile Responsive for Membership Package */
	@media (max-width: 768px) {
		.tg-membership-package {
			padding: 30px 20px;
		}
		
		.tg-package-header h2 {
			font-size: 2rem !important;
		}
		
		.tg-price-badge {
			font-size: 1.1rem !important;
			padding: 10px 20px !important;
		}
		
		.tg-benefit-item {
			margin-bottom: 15px !important;
		}
		
		.tg-benefit-text span {
			font-size: 14px !important;
		}
		
		.tg-package-visual {
			height: 300px !important;
		}
		
		.tg-laptop-design {
			width: 250px !important;
			height: 150px !important;
		}
		
		.tg-base-design {
			width: 270px !important;
		}
		
		.tg-character {
			width: 50px !important;
			height: 65px !important;
		}
	}
	
	/* Căn chỉnh Client Services */
		.tg-clientservices {
			display: flex;
			align-items: stretch;
			gap: 0;
			margin: 0;
			padding: 0;
			list-style: none;
		}
		
		.tg-clientservices li {
			flex: 1;
			display: flex;
			flex-direction: column;
			justify-content: center;
			align-items: center;
			text-align: center;
			padding: 30px 20px;
			height: 100%;
			min-height: 120px;
		}
		
		.tg-clientservices .tg-clientserviceicon {
			margin-bottom: 15px;
			display: flex;
			align-items: center;
			justify-content: center;
		}
		
		.tg-clientservices .tg-clientserviceicon i {
			font-size: 3rem;
			color: #ffd700;
		}
		
		.tg-clientservices .tg-titlesubtitle {
			flex: 1;
			display: flex;
			flex-direction: column;
			justify-content: center;
		}
		
		.tg-clientservices .tg-titlesubtitle h3 {
			margin: 0 0 8px 0;
			font-size: 1.4rem;
			line-height: 1.3;
			font-weight: 600;
		}
		
		.tg-clientservices .tg-titlesubtitle p {
			margin: 0;
			font-size: 1.1rem;
			line-height: 1.4;
		}
		
		/* Responsive cho Client Services */
		@media (max-width: 768px) {
			.tg-clientservices {
				flex-direction: column;
				gap: 20px;
			}
			
			.tg-clientservices li {
				min-height: 100px;
				padding: 20px 15px;
			}
			
			.tg-clientservices .tg-clientserviceicon i {
				font-size: 2.5rem;
			}
			
			.tg-clientservices .tg-titlesubtitle h3 {
				font-size: 1.2rem;
			}
			
			.tg-clientservices .tg-titlesubtitle p {
				font-size: 1rem;
			}
		}
		
		/* Header Styles */
		.tg-header {
			position: relative;
			z-index: 1000;
		}
		
		/* Top Bar Styles */
		.tg-topbar {
			background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
			color: white;
			padding: 8px 0;
			font-size: 12px;
		}
		
		.tg-topbar a:hover {
			color: #ffd700 !important;
			transform: scale(1.1);
		}
		
		/* Main Header Styles */
		.tg-main-header {
			background: white;
			padding: 15px 0;
			box-shadow: 0 2px 10px rgba(0,0,0,0.1);
		}
		
		/* Ensure equal height for all header elements */
		.tg-main-header .row {
			align-items: stretch;
			height: 100px;
		}
		
		.tg-main-header .col-xs-12,
		.tg-main-header .col-sm-12,
		.tg-main-header .col-md-3,
		.tg-main-header .col-md-6,
		.tg-main-header .col-lg-3,
		.tg-main-header .col-lg-6 {
			display: flex;
			align-items: center;
			justify-content: center;
			height: 100px;
			padding: 0;
		}
		
		/* Logo container */
		.tg-logo {
			display: flex;
			align-items: center;
			justify-content: center;
			height: 100px;
			width: 100%;
		}
		
		.tg-logo img {
			max-height: 60px;
			width: auto;
			transition: transform 0.3s ease;
		}
		
		.tg-logo img:hover {
			transform: scale(1.05);
		}
		
		/* Search container */
		.tg-search-container {
			display: flex;
			align-items: center;
			justify-content: center;
			height: 100px;
			width: 100%;
		}
		
		/* User actions container */
		.tg-user-actions {
			display: flex;
			align-items: center;
			justify-content: center;
			height: 100px;
			width: 100%;
			gap: 15px;
		}
		
		/* Action items */
		.tg-action-item {
			position: relative;
		}
		
		.tg-action-item a {
			display: flex;
			align-items: center;
			justify-content: center;
			width: 40px;
			height: 40px;
			background: linear-gradient(135deg, #4A6366 0%, #3A4F52 100%);
			color: white;
			border-radius: 50%;
			text-decoration: none;
			transition: all 0.3s ease;
			position: relative;
		}
		
		.tg-badge {
			position: absolute;
			top: -5px;
			right: -5px;
			background: #e74c3c;
			color: white;
			border-radius: 50%;
			width: 18px;
			height: 18px;
			display: flex;
			align-items: center;
			justify-content: center;
			font-size: 10px;
			font-weight: bold;
		}
		
		/* User profile */
		.tg-user-profile {
			position: relative;
			display: flex;
			align-items: center;
			justify-content: center;
			height: 100%;
		}
		
		.tg-user-info {
			display: flex;
			align-items: center;
			gap: 12px;
			background: linear-gradient(135deg, #4A6366 0%, #3A4F52 100%);
			color: white;
			padding: 12px 20px;
			border-radius: 30px;
			cursor: pointer;
			transition: all 0.3s ease;
			box-shadow: 0 4px 15px rgba(74, 99, 102, 0.2);
			border: 1px solid rgba(255,255,255,0.1);
			min-width: 180px;
			justify-content: space-between;
		}
		
		.tg-user-info:hover {
			transform: translateY(-2px);
			box-shadow: 0 6px 20px rgba(74, 99, 102, 0.3);
			background: linear-gradient(135deg, #5A7376 0%, #4A5F62 100%);
		}
		
		.tg-user-avatar {
			width: 36px;
			height: 36px;
			border-radius: 50%;
			overflow: hidden;
			border: 2px solid rgba(255,255,255,0.3);
			flex-shrink: 0;
		}
		
		.tg-user-avatar img {
			width: 100%;
			height: 100%;
			object-fit: cover;
		}
		
		#userName {
			font-weight: 600;
			font-size: 14px;
			flex: 1;
			text-align: left;
			margin: 0 8px;
		}
		
		.tg-user-info .fa-chevron-down {
			font-size: 12px;
			transition: transform 0.3s ease;
			flex-shrink: 0;
			opacity: 0.8;
		}
		
		.tg-user-info:hover .fa-chevron-down {
			opacity: 1;
		}
		
		/* User dropdown */
		.tg-user-dropdown {
			position: absolute;
			top: 100%;
			right: 0;
			background: white;
			border-radius: 15px;
			box-shadow: 0 10px 30px rgba(0,0,0,0.15);
			min-width: 250px;
			z-index: 1000;
			display: none;
			margin-top: 10px;
			overflow: hidden;
		}
		
		.tg-dropdown-header {
			padding: 20px;
			background: linear-gradient(135deg, #4A6366 0%, #3A4F52 100%);
			color: white;
			text-align: center;
		}
		
		.tg-dropdown-avatar {
			width: 60px;
			height: 60px;
			border-radius: 50%;
			overflow: hidden;
			margin: 0 auto 10px;
			border: 3px solid rgba(255,255,255,0.3);
		}
		
		.tg-dropdown-avatar img {
			width: 100%;
			height: 100%;
			object-fit: cover;
		}
		
		#dropdownUserName {
			font-weight: 600;
			margin-bottom: 5px;
			font-size: 16px;
		}
		
		#dropdownUserEmail {
			font-size: 12px;
			opacity: 0.8;
		}
		
		.tg-dropdown-menu {
			padding: 10px 0;
		}
		
		.tg-dropdown-item {
			display: flex;
			align-items: center;
			gap: 12px;
			padding: 12px 20px;
			color: #333;
			text-decoration: none;
			transition: all 0.3s ease;
		}
		
		.tg-dropdown-item i {
			width: 16px;
			color: #4A6366;
		}
		
		.tg-dropdown-divider {
			border-top: 1px solid #eee;
			margin: 8px 0;
		}
		
		.tg-dropdown-logout {
			color: #dc3545 !important;
		}
		
		.tg-dropdown-logout i {
			color: #dc3545 !important;
		}
		
		/* Search box styles */
		.tg-search-box {
			position: relative;
			display: flex;
			align-items: center;
			background: #f8f9fa;
			border-radius: 25px;
			border: 2px solid #e9ecef;
			transition: all 0.3s ease;
			overflow: hidden;
			width: 100%;
			max-width: 500px;
		}
		
		.tg-search-box input {
			flex: 1;
			border: none;
			padding: 12px 20px;
			background: transparent;
			outline: none;
			font-size: 14px;
			color: #333;
		}
		
		.tg-search-box button {
			background: linear-gradient(135deg, #4A6366 0%, #3A4F52 100%);
			color: white;
			border: none;
			padding: 12px 20px;
			cursor: pointer;
			transition: all 0.3s ease;
			border-radius: 0 25px 25px 0;
		}
		
		/* Search suggestions */
		.tg-search-suggestions {
			position: absolute;
			top: 100%;
			left: 0;
			right: 0;
			background: white;
			border-radius: 10px;
			box-shadow: 0 5px 20px rgba(0,0,0,0.15);
			z-index: 1000;
			display: none;
			margin-top: 5px;
		}
		
		.tg-suggestion-item {
			padding: 10px 15px;
			border-bottom: 1px solid #eee;
			cursor: pointer;
			transition: background 0.3s ease;
			display: flex;
			align-items: center;
		}
		
		.tg-suggestion-item:last-child {
			border-bottom: none;
		}
		
		.tg-suggestion-item i {
			margin-right: 10px;
			color: #4A6366;
		}
		
		/* Cart Button Styles */
		.tg-cart-btn {
			position: relative;
			margin-right: 15px;
		}
		
		.tg-cart-link {
			display: flex;
			align-items: center;
			justify-content: center;
			width: 45px;
			height: 45px;
			background: linear-gradient(135deg, #4A6366 0%, #3A4F52 100%);
			color: white;
			border-radius: 50%;
			text-decoration: none;
			transition: all 0.3s ease;
			position: relative;
			box-shadow: 0 4px 15px rgba(74, 99, 102, 0.2);
			border: 1px solid rgba(255,255,255,0.1);
		}
		
		.tg-cart-link:hover {
			transform: translateY(-3px);
			box-shadow: 0 6px 20px rgba(74, 99, 102, 0.3);
			background: linear-gradient(135deg, #5A7376 0%, #4A5F62 100%);
		}
		
		.tg-cart-link i {
			font-size: 16px;
		}
		
		.tg-cart-badge {
			position: absolute;
			top: -5px;
			right: -5px;
			background: #e74c3c;
			color: white;
			border-radius: 50%;
			width: 20px;
			height: 20px;
			display: flex;
			align-items: center;
			justify-content: center;
			font-size: 11px;
			font-weight: bold;
			border: 2px solid white;
		}
		
		/* Cart Modal Styles */
		.tg-cart-modal {
			display: none;
			position: fixed;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			z-index: 10000;
			background: rgba(0,0,0,0.5);
			backdrop-filter: blur(5px);
		}
		
		.tg-cart-modal.active {
			display: flex;
			align-items: center;
			justify-content: center;
		}
		
		.tg-cart-modal-overlay {
			position: absolute;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
		}
		
		.tg-cart-modal-content {
			position: relative;
			background: white;
			border-radius: 15px;
			width: 90%;
			max-width: 600px;
			max-height: 80vh;
			overflow: hidden;
			box-shadow: 0 20px 60px rgba(0,0,0,0.3);
			animation: modalSlideIn 0.3s ease;
		}
		
		.tg-cart-modal-header {
			background: linear-gradient(135deg, #4A6366 0%, #3A4F52 100%);
			color: white;
			padding: 20px 25px;
			display: flex;
			align-items: center;
			justify-content: space-between;
		}
		
		.tg-cart-modal-header h3 {
			margin: 0;
			font-size: 1.3rem;
			font-weight: 600;
			display: flex;
			align-items: center;
			gap: 10px;
			color: white;
		}
		
		.tg-cart-modal-close {
			background: rgba(255,255,255,0.2);
			border: none;
			color: white;
			font-size: 18px;
			cursor: pointer;
			padding: 8px;
			border-radius: 50%;
			transition: all 0.3s ease;
			width: 35px;
			height: 35px;
			display: flex;
			align-items: center;
			justify-content: center;
		}
		
		.tg-cart-modal-close:hover {
			background: rgba(255,255,255,0.3);
			transform: scale(1.1);
		}
		
		.tg-cart-modal-body {
			padding: 25px;
			max-height: 50vh;
			overflow-y: auto;
		}
		
		.tg-cart-items {
			display: flex;
			flex-direction: column;
			gap: 20px;
		}
		
		.tg-cart-item {
			display: flex;
			align-items: center;
			gap: 15px;
			padding: 15px;
			background: #f8f9fa;
			border-radius: 10px;
			border: 1px solid #e9ecef;
		}
		
		.tg-cart-item-image {
			width: 80px;
			height: 100px;
			flex-shrink: 0;
		}
		
		.tg-cart-item-image img {
			width: 100%;
			height: 100%;
			object-fit: cover;
			border-radius: 8px;
		}
		
		.tg-cart-item-details {
			flex: 1;
		}
		
		.tg-cart-item-details h4 {
			margin: 0 0 5px 0;
			font-size: 16px;
			font-weight: 600;
			color: #333;
		}
		
		.tg-cart-item-author {
			margin: 0 0 10px 0;
			color: #666;
			font-size: 14px;
		}
		
		.tg-cart-item-price {
			display: flex;
			align-items: center;
			gap: 10px;
		}
		
		.tg-cart-item-current {
			font-weight: 600;
			color: #4A6366;
			font-size: 16px;
		}
		
		.tg-cart-item-original {
			color: #999;
			text-decoration: line-through;
			font-size: 14px;
		}
		
		.tg-cart-item-actions {
			display: flex;
			flex-direction: column;
			align-items: center;
			gap: 10px;
		}
		
		.tg-cart-item-quantity {
			display: flex;
			align-items: center;
			gap: 10px;
			background: white;
			border-radius: 20px;
			padding: 5px;
			border: 1px solid #ddd;
		}
		
		.tg-quantity-btn {
			background: #4A6366;
			color: white;
			border: none;
			width: 25px;
			height: 25px;
			border-radius: 50%;
			cursor: pointer;
			transition: all 0.3s ease;
			display: flex;
			align-items: center;
			justify-content: center;
			font-size: 12px;
		}
		
		.tg-quantity-btn:hover {
			background: #3A4F52;
			transform: scale(1.1);
		}
		
		.tg-quantity-number {
			font-weight: 600;
			color: #333;
			min-width: 20px;
			text-align: center;
		}
		
		.tg-cart-item-remove {
			background: #dc3545;
			color: white;
			border: none;
			width: 30px;
			height: 30px;
			border-radius: 50%;
			cursor: pointer;
			transition: all 0.3s ease;
			display: flex;
			align-items: center;
			justify-content: center;
		}
		
		.tg-cart-item-remove:hover {
			background: #c82333;
			transform: scale(1.1);
		}
		
		.tg-cart-empty {
			text-align: center;
			padding: 40px 20px;
			color: #666;
		}
		
		.tg-cart-empty i {
			font-size: 4rem;
			color: #ddd;
			margin-bottom: 20px;
			display: block;
		}
		
		.tg-cart-empty h4 {
			margin: 0 0 10px 0;
			color: #333;
		}
		
		.tg-cart-empty p {
			margin: 0 0 20px 0;
			color: #666;
		}
		
		.tg-cart-modal-footer {
			padding: 20px 25px;
			background: #f8f9fa;
			border-top: 1px solid #e9ecef;
		}
		
		.tg-cart-summary {
			display: flex;
			justify-content: space-between;
			align-items: center;
			margin-bottom: 20px;
			padding: 15px;
			background: white;
			border-radius: 10px;
			border: 1px solid #e9ecef;
		}
		
		.tg-cart-total {
			display: flex;
			align-items: center;
			gap: 10px;
		}
		
		.tg-cart-total-price {
			font-weight: 700;
			font-size: 18px;
			color: #4A6366;
		}
		
		.tg-cart-savings {
			display: flex;
			align-items: center;
			gap: 10px;
			color: #28a745;
		}
		
		.tg-cart-savings-amount {
			font-weight: 600;
		}
		
		.tg-cart-actions {
			display: flex;
			gap: 15px;
		}
		
		.tg-btn {
			flex: 1;
			padding: 12px 20px;
			border: none;
			border-radius: 8px;
			font-weight: 600;
			cursor: pointer;
			transition: all 0.3s ease;
			display: flex;
			align-items: center;
			justify-content: center;
			gap: 8px;
			text-decoration: none;
		}
		
		.tg-btn-primary {
			background: linear-gradient(135deg, #4A6366 0%, #3A4F52 100%);
			color: white;
		}
		
		.tg-btn-primary:hover {
			transform: translateY(-2px);
			box-shadow: 0 6px 20px rgba(74, 99, 102, 0.3);
		}
		
		.tg-btn-secondary {
			background: #6c757d;
			color: white;
		}
		
		.tg-btn-secondary:hover {
			background: #5a6268;
			transform: translateY(-2px);
		}
		
		/* Mobile Responsive for Header */
		@media (max-width: 768px) {
			.tg-main-header .row {
				flex-direction: column;
				gap: 15px;
				height: auto;
			}
			
			.tg-main-header .col-xs-12,
			.tg-main-header .col-sm-12,
			.tg-main-header .col-md-3,
			.tg-main-header .col-md-6,
			.tg-main-header .col-lg-3,
			.tg-main-header .col-lg-6 {
				height: auto;
				padding: 10px 0;
			}
			
			.tg-logo {
				height: auto;
				min-height: 60px;
			}
			
			.tg-search-container {
				margin: 15px 0;
				height: auto;
				min-height: 60px;
			}
			
			.tg-user-actions {
				justify-content: center;
				margin-top: 15px;
				height: auto;
				min-height: 60px;
				flex-wrap: wrap;
				gap: 10px;
			}
			
			.tg-action-item a {
				width: 35px;
				height: 35px;
			}
			
			.tg-user-info {
				padding: 8px 15px;
				min-width: 150px;
			}
			
			.tg-user-avatar {
				width: 30px;
				height: 30px;
			}
			
			#userName {
				font-size: 12px;
				margin: 0 6px;
			}
			
			.tg-nav-container {
				flex-direction: column;
				gap: 15px;
			}
			
			.tg-mobile-toggle {
				display: block !important;
			}
			
			.tg-nav-menu {
				display: none;
				width: 100%;
			}
			
			.tg-nav-menu.active {
				display: block;
			}
			
			.tg-nav-menu ul {
				flex-direction: column;
				gap: 0;
			}
			
			.tg-nav-menu ul li a {
				padding: 15px 20px;
				border-bottom: 1px solid #eee;
			}
			
			.tg-submenu {
				position: static;
				opacity: 1;
				visibility: visible;
				transform: none;
				box-shadow: none;
				border-radius: 0;
				margin-left: 20px;
			}
			
			.tg-cart-btn {
				margin-right: 10px;
			}
			
			.tg-cart-link {
				width: 40px;
				height: 40px;
			}
			
			.tg-cart-link i {
				font-size: 14px;
			}
			
			.tg-cart-badge {
				width: 18px;
				height: 18px;
				font-size: 10px;
			}
			
			.tg-membership-btn {
				text-align: center;
			}
		}
		
		@media (max-width: 480px) {
			.tg-topbar {
				font-size: 11px;
			}
			
			.tg-topbar-left span {
				display: block;
				margin-bottom: 5px;
			}
			
			.tg-logo img {
				max-height: 50px;
			}
		}
		
		/* Navigation Active State Styles */
		.nav-link {
			position: relative;
			overflow: hidden;
		}
		
		.nav-link::before {
			content: '';
			position: absolute;
			bottom: 0;
			left: 50%;
			width: 0;
			height: 3px;
			background: linear-gradient(135deg, #4A6366 0%, #3A4F52 100%);
			transition: all 0.3s ease;
			transform: translateX(-50%);
		}
		
		.nav-link:hover::before {
			width: 80%;
		}
		
		.nav-link.active {
			color: #4A6366 !important;
			font-weight: 600 !important;
		}
		
		.nav-link.active::before {
			width: 80%;
		}
		
		.nav-link.active i {
			color: #4A6366;
		}
		
		/* Submenu Active States */
		.tg-submenu a:hover {
			background: #f8f9fa;
			color: #4A6366;
		}
		
		.tg-submenu a.active {
			background: #4A6366;
			color: white;
		}
		
		/* Hover Effects for Navigation */
		.nav-link:hover {
			color: #4A6366 !important;
			transform: translateY(-2px);
		}
		
		.nav-link:hover i {
			color: #4A6366;
			transform: scale(1.1);
		}
		
		/* Active State Animation */
		@keyframes activePulse {
			0% { transform: scale(1); }
			50% { transform: scale(1.05); }
			100% { transform: scale(1); }
		}
		
		.nav-link.active {
			animation: activePulse 2s ease-in-out infinite;
		}
		
		/* Search Box Styles */
		.tg-search-box {
			position: relative;
			display: flex;
			align-items: center;
			background: #f8f9fa;
			border-radius: 25px;
			border: 2px solid #e9ecef;
			transition: all 0.3s ease;
			overflow: hidden;
		}
		
		.tg-search-box:focus-within {
			border-color: #4A6366;
			box-shadow: 0 0 0 3px rgba(74, 99, 102, 0.1);
			transform: translateY(-2px);
		}
		
		.tg-search-box input:focus {
			outline: none;
		}
	@keyframes float {
		0%, 100% { transform: translateY(0px); }
		50% { transform: translateY(-20px); }
	}
	
	@keyframes rotate {
		from { transform: translate(-50%, -50%) rotate(0deg); }
		to { transform: translate(-50%, -50%) rotate(360deg); }
	}
	
	@keyframes scroll {
		0% { transform: translateX(-50%) translateY(0px); opacity: 1; }
		100% { transform: translateX(-50%) translateY(20px); opacity: 0; }
	}
	
	.tg-banner .tg-btn:hover {
		transform: translateY(-3px);
		box-shadow: 0 8px 25px rgba(0,0,0,0.3);
	}
	
	/* Membership Package Hover Effects */
	.tg-package-card:hover {
		transform: translateY(-5px);
		box-shadow: 0 10px 30px rgba(0,0,0,0.15);
	}
	
	.tg-package-card .tg-btn:hover {
		transform: translateY(-2px);
		box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
	}
	
	/* Basic Package Button Hover */
	.tg-package-card:not([style*="gradient"]) .tg-btn:hover {
		background: #4A6366 !important;
		color: white !important;
		box-shadow: 0 6px 20px rgba(74, 99, 102, 0.4) !important;
	}
	
	/* Premium Package Button Hover */
	.tg-package-card[style*="gradient"] .tg-btn:hover {
		background: rgba(255,255,255,0.9) !important;
		color: #4A6366 !important;
		box-shadow: 0 6px 20px rgba(255, 255, 255, 0.4) !important;
	}
	
	/* VIP Package Button Hover */
	.tg-package-card[style*="#ffd700"] .tg-btn:hover {
		background: #E8944A !important;
		color: white !important;
		box-shadow: 0 6px 20px rgba(244, 162, 97, 0.4) !important;
	}
	
	.tg-banner .tg-btn:not(.tg-active):hover {
		background: rgba(255,255,255,0.1);
		border-color: rgba(255,255,255,0.5);
	}
	
	@media (max-width: 768px) {
		.tg-banner h1 {
			font-size: 2.5rem !important;
		}
		
		.tg-banner h2 {
			font-size: 1.2rem !important;
		}
		
		.tg-banner .tg-bannerbtns {
			flex-direction: column;
		}
		
		.tg-banner .tg-bannerbtns .tg-btn {
			width: 100%;
			justify-content: center;
		}
		
		/* Auth Buttons */
		.tg-auth-buttons {
			display: flex;
			align-items: center;
			gap: 10px;
		}
		
		.tg-auth-buttons a {
			background: linear-gradient(135deg, #4A6366 0%, #3A4F52 100%);
			color: white;
			padding: 8px 20px;
			border-radius: 25px;
			text-decoration: none;
			font-weight: 600;
		}
		
		/* Mobile User Login */
		.tg-user-profile {
			display: none !important;
		}
		
		.tg-auth-buttons {
			display: block !important;
			margin-top: 10px;
		}
		
		.tg-middlecontainer .col-xs-12 {
			flex-direction: column;
			gap: 15px;
		}
		
		/* Book card text truncation */
		.tg-booktitle h3 a {
			white-space: nowrap;
			overflow: hidden;
			text-overflow: ellipsis;
			display: block;
			max-width: 100%;
		}
		
		.tg-bookwriter {
			white-space: nowrap;
			overflow: hidden;
			text-overflow: ellipsis;
			display: block;
		}
		
		.tg-bookscategories li a {
			white-space: nowrap;
			overflow: hidden;
			text-overflow: ellipsis;
			display: block;
			max-width: 100%;
		}
	}
	
	/* Book card text truncation for all screen sizes */
	.tg-booktitle h3 a {
		white-space: nowrap;
		overflow: hidden;
		text-overflow: ellipsis;
		display: block;
		max-width: 100%;
	}
	
	.tg-bookwriter {
		white-space: nowrap;
		overflow: hidden;
		text-overflow: ellipsis;
		display: block;
	}
	
	.tg-bookscategories li a {
		white-space: nowrap;
		overflow: hidden;
		text-overflow: ellipsis;
		display: block;
		max-width: 100%;
	}
	
	.tg-btnaddtowishlist span {
		white-space: nowrap;
		overflow: hidden;
		text-overflow: ellipsis;
		display: block;
		max-width: 100%;
	}
	
	.tg-btn tg-btnstyletwo em {
		white-space: nowrap;
		overflow: hidden;
		text-overflow: ellipsis;
		display: block;
		max-width: 100%;
	}
	
	/* Top Trending Styles */
	.trending-column {
		padding: 20px;
		height: 100%;
	}
	
	.trending-header {
		display: flex;
		align-items: center;
		margin-bottom: 20px;
		padding-bottom: 10px;
		border-bottom: 1px solid #333;
	}
	
	.trending-header h3 {
		font-size: 18px;
		font-weight: bold;
	}
	
	.trending-list {
		margin-bottom: 20px;
	}
	
	.trending-item {
		display: flex;
		align-items: center;
		margin-bottom: 15px;
		padding: 8px 0;
	}
	
	.trending-number {
		font-weight: bold;
		color: #ffd700;
		min-width: 20px;
	}
	
	.trending-title {
		font-size: 14px;
		color: #ccc;
		flex: 1;
	}
	
	.trending-footer {
		text-align: center;
		padding-top: 15px;
		border-top: 1px solid #333;
	}
	
	.trending-comments {
		margin-bottom: 20px;
	}
	
	.comment-card {
		display: flex;
		align-items: flex-start;
		margin-bottom: 15px;
		padding: 12px;
		background: rgba(255,255,255,0.05);
		border-radius: 8px;
	}
	
	.comment-content {
		flex: 1;
		margin-left: 12px;
	}
	
	.comment-user {
		font-weight: bold;
		color: #ffd700;
		font-size: 14px;
		margin-bottom: 4px;
	}
	
	.comment-text {
		color: #ccc;
		font-size: 13px;
		margin-bottom: 6px;
		line-height: 1.4;
	}
	
	.comment-movie {
		display: flex;
		align-items: center;
		font-size: 12px;
		color: #999;
	}
	
	.comment-movie i {
		margin-right: 6px;
	}
	
	@media (max-width: 768px) {
		.trending-column {
			margin-bottom: 30px;
		}
		
		.trending-item {
			flex-wrap: wrap;
		}
		
		.trending-title {
			font-size: 12px;
		}
	}
	
	/* Banner Styles */
	.tg-banner {
		background: linear-gradient(135deg, #4A6366 0%, #3A4F52 100%);
		min-height: 600px;
		position: relative;
		overflow: hidden;
	}
	
	.banner-bg-pattern {
		position: absolute;
		top: 0;
		left: 0;
		right: 0;
		bottom: 0;
		background-image: url('data:image/svg+xml,%3Csvg width="60" height="60" viewBox="0 0 60 60" xmlns="http://www.w3.org/2000/svg"%3E%3Cg fill="none" fill-rule="evenodd"%3E%3Cg fill="%23BEB6F2" fill-opacity="0.15"%3E%3Ccircle cx="30" cy="30" r="2"/%3E%3C/g%3E%3C/g%3E%3C/svg%3E');
		opacity: 0.4;
	}
	
			/* Navigation Menu Layout */
		.tg-navigationarea {
			background: white;
			border-bottom: 1px solid #e0e0e0;
		}
		
		.tg-navigation ul {
			display: flex;
			align-items: center;
			justify-content: flex-start;
			flex-wrap: wrap;
			gap: 0;
			width: 100%;
		}
	
	.tg-navigation ul li {
		display: flex;
		align-items: center;
	}
	
			/* Menu Item Alignment */
		.tg-navigation ul li a {
			padding: 15px 20px;
			display: flex;
			align-items: center;
			text-decoration: none;
			color: #333;
			font-weight: 500;
			transition: all 0.3s ease;
			position: relative;
		}
		
		/* Navigation Container */
		.tg-navigationholder {
			background: white;
			padding: 0;
		}
	
	.tg-navigation ul li a:hover {
		color: #F4A261;
		background: rgba(244, 162, 97, 0.1);
	}
	
			/* Sub-menu Alignment */
		.tg-navigation ul li .sub-menu {
			position: absolute;
			top: 100%;
			left: 0;
			background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
			min-width: 220px;
			box-shadow: 0 15px 35px rgba(0,0,0,0.15);
			border-radius: 12px;
			padding: 8px 0;
			z-index: 1000;
			opacity: 0;
			visibility: hidden;
			transform: translateY(-15px) scale(0.95);
			transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
			border: 1px solid rgba(255,255,255,0.2);
			backdrop-filter: blur(10px);
		}
		
		/* Mega Menu Position */
		.tg-navigation ul li.menu-item-has-mega-menu {
			position: static;
		}
	
	.tg-navigation ul li:hover .sub-menu {
		opacity: 1;
		visibility: visible;
		transform: translateY(0) scale(1);
	}
	
	.tg-navigation ul li .sub-menu li {
		display: block;
		margin: 0;
		position: relative;
	}
	
			.tg-navigation ul li .sub-menu li a {
			padding: 12px 20px;
			display: block;
			color: #333;
			font-size: 14px;
			font-weight: 500;
			border-radius: 0;
			transition: all 0.3s ease;
			position: relative;
			overflow: hidden;
		}
	
	.tg-navigation ul li .sub-menu li a::before {
		content: '';
		position: absolute;
		left: 0;
		top: 0;
		width: 0;
		height: 100%;
		background: linear-gradient(90deg, rgba(244, 162, 97, 0.1) 0%, rgba(244, 162, 97, 0.05) 100%);
		transition: width 0.3s ease;
		z-index: -1;
	}
	
	.tg-navigation ul li .sub-menu li a:hover {
		background: transparent;
		color: #F4A261;
		transform: translateX(5px);
	}
	
	.tg-navigation ul li .sub-menu li a:hover::before {
		width: 100%;
	}
	
	/* Sub-menu arrow indicator */
	.tg-navigation ul li .sub-menu::before {
		content: '';
		position: absolute;
		top: -8px;
		left: 25px;
		width: 0;
		height: 0;
		border-left: 8px solid transparent;
		border-right: 8px solid transparent;
		border-bottom: 8px solid #ffffff;
		filter: drop-shadow(0 -2px 2px rgba(0,0,0,0.1));
	}
	
	/* Sub-menu item hover effects */
	.tg-navigation ul li .sub-menu li:first-child a {
		border-radius: 12px 12px 0 0;
	}
	
	.tg-navigation ul li .sub-menu li:last-child a {
		border-radius: 0 0 12px 12px;
	}
	
	
		
		/* Mega Menu Styles */
		.mega-menu {
			position: absolute;
			top: 100%;
			left: 0;
			background: white;
			min-width: 800px;
			box-shadow: 0 15px 35px rgba(0,0,0,0.15);
			border-radius: 12px;
			padding: 0;
			z-index: 1000;
			opacity: 0;
			visibility: hidden;
			transform: translateY(-15px) scale(0.95);
			transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
			border: 1px solid rgba(255,255,255,0.2);
			backdrop-filter: blur(10px);
		}
		
		.menu-item-has-mega-menu:hover .mega-menu {
			opacity: 1;
			visibility: visible;
			transform: translateY(0) scale(1);
		}
		
		.mega-menu-container {
			display: flex;
			flex-wrap: wrap;
			padding: 25px;
			gap: 20px;
		}
		
		.mega-menu-column {
			flex: 1;
			min-width: 180px;
		}
		
		.mega-menu-section {
			margin-bottom: 20px;
			padding: 15px;
			border-radius: 8px;
			transition: all 0.3s ease;
		}
		
		.mega-menu-section:hover {
			background: rgba(244, 162, 97, 0.05);
			transform: translateY(-2px);
		}
		
		.mega-menu-section h4 {
			color: #4A6366;
			font-size: 16px;
			font-weight: 700;
			margin-bottom: 15px;
			padding-bottom: 8px;
			border-bottom: 2px solid #F4A261;
			display: flex;
			align-items: center;
			justify-content: space-between;
		}
		
		.mega-menu-section ul {
			list-style: none;
			padding: 0;
			margin: 0;
		}
		
		.mega-menu-section ul li a {
			color: #666;
			font-size: 14px;
			font-weight: 500;
			text-decoration: none;
			transition: all 0.3s ease;
			display: block;
			padding: 6px 0;
			position: relative;
			padding-left: 15px;
		}
		
		.mega-menu-section ul li a::before {
			content: '';
			position: absolute;
			left: 0;
			top: 50%;
			transform: translateY(-50%);
			width: 4px;
			height: 4px;
			background: #F4A261;
			border-radius: 50%;
			opacity: 0;
			transition: all 0.3s ease;
		}
		
		.mega-menu-section ul li a:hover {
			color: #4A6366;
			transform: translateX(5px);
		}
		
		.mega-menu-section ul li a:hover::before {
			opacity: 1;
		}
		
		/* Mega Menu Badge */
		.mega-menu-section ul li a .badge {
			background: #F4A261;
			color: white;
			font-size: 10px;
			padding: 2px 6px;
			border-radius: 10px;
			margin-left: 8px;
			font-weight: 600;
		}
		
		/* Mega Menu Section Count */
		.mega-menu-section h4 .count {
			background: #4A6366;
			color: white;
			font-size: 11px;
			padding: 2px 6px;
			border-radius: 10px;
			margin-left: auto;
			font-weight: 600;
		}
		
		/* Mega Menu Arrow */
		.mega-menu::before {
			content: '';
			position: absolute;
			top: -8px;
			left: 25px;
			width: 0;
			height: 0;
			border-left: 8px solid transparent;
			border-right: 8px solid transparent;
			border-bottom: 8px solid #ffffff;
			filter: drop-shadow(0 -2px 2px rgba(0,0,0,0.1));
		}
		
		/* Responsive Mega Menu */
		@media (max-width: 768px) {
			.mega-menu {
				min-width: 300px;
				left: -50px;
			}
			
			.mega-menu-container {
				flex-direction: column;
				padding: 15px;
				gap: 15px;
			}
			
			.mega-menu-column {
				min-width: auto;
			}
			
			.mega-menu-section h4 {
				font-size: 14px;
			}
			
			.mega-menu-section ul li a {
				font-size: 13px;
			}
			
			.mega-menu-section {
				padding: 10px;
			}
			
			.mega-menu-section .count {
				font-size: 10px;
				padding: 1px 4px;
			}
			
			.mega-menu-section .badge {
				font-size: 9px;
				padding: 1px 4px;
			}
		}
		
		@media (max-width: 480px) {
			.mega-menu {
				min-width: 280px;
				left: -80px;
			}
			
			.mega-menu-container {
				padding: 10px;
				gap: 10px;
			}
		}
		
		/* Mega Menu Hover Effects */
		.mega-menu-section:hover h4 {
			color: #F4A261;
		}
		
		/* Mega Menu Animation */
		@keyframes megaMenuFadeIn {
			from {
				opacity: 0;
				transform: translateY(-20px) scale(0.9);
			}
			to {
				opacity: 1;
				transform: translateY(0) scale(1);
			}
		}
		
		.menu-item-has-mega-menu:hover .mega-menu {
			animation: megaMenuFadeIn 0.3s ease;
		}
	
	/* Middle Container Layout */
	.tg-middlecontainer .col-xs-12 {
		display: flex;
		align-items: center;
		justify-content: space-between;
		flex-wrap: wrap;
		gap: 20px;
	}
	
	.tg-logo {
		flex-shrink: 0;
	}
	
			/* Navigation Action Buttons */
		.tg-action-buttons {
			display: flex;
			align-items: center;
			gap: 12px;
			margin-left: auto;
			padding: 0;
		}
		
		/* Navigation Container Background */
		.tg-navigationarea .container {
			background: white;
		}
		
		/* Navigation Area Styling */
		.tg-navigationarea {
			background: white;
			border-bottom: 1px solid #e0e0e0;
			box-shadow: 0 2px 10px rgba(0,0,0,0.1);
		}
	
	/* Action Container Styling */
	.tg-action-container {
		display: flex;
		align-items: center;
		gap: 5px;
		background: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%);
		border: 1px solid rgba(255,255,255,0.2);
		border-radius: 50px;
		padding: 0px 0px;
		box-shadow: 0 4px 15px rgba(0,0,0,0.1);
		transition: all 0.3s ease;
	}
	

	
	.tg-action-buttons .dropdown {
		display: flex;
		align-items: center;
		margin: 0;
	}
	
	/* Search Dropdown Styles */
	.tg-wishlistandcart {
		display: flex;
		align-items: center;
		justify-content: center;
		gap: 15px;
		margin-left: auto;
		padding: 0 15px;
	}
	
	.tg-wishlistandcart .dropdown {
		display: flex;
		align-items: center;
		justify-content: center;
		margin: 0 5px;
	}
	
	.tg-action-buttons .tg-searchbtn,
	.tg-action-buttons .tg-btnthemedropdown {
		display: flex;
		align-items: center;
		justify-content: center;
		background: #666;
		width: 40px;
		height: 40px;
		border-radius: 50%;
		color: white;
		text-decoration: none;
		transition: all 0.3s ease;
		box-shadow: 0 2px 5px rgba(0,0,0,0.2);
		position: relative;
	}
	
	.tg-action-buttons .tg-searchbtn:hover,
	.tg-action-buttons .tg-btnthemedropdown:hover {
		background: #F4A261;
		transform: translateY(-2px);
		box-shadow: 0 4px 15px rgba(244, 162, 97, 0.3);
		color: white;
		text-decoration: none;
	}
	
	.tg-action-buttons .tg-searchbtn i,
	.tg-action-buttons .tg-btnthemedropdown i {
		font-size: 12px;
	}
	
	.tg-action-buttons .tg-themebadge {
		position: absolute;
		top: -5px;
		right: -5px;
		background: #e74c3c;
		color: white;
		border-radius: 50%;
		width: 16px;
		height: 16px;
		display: flex;
		align-items: center;
		justify-content: center;
		font-size: 10px;
		font-weight: bold;
	}
	
	/* Cart Total Price Styling */
	.tg-cart-total {
		display: flex;
		align-items: center;
		margin-left: 8px;
	}
	
	.tg-total-price {
		color: #333;
		padding: 4px 8px;
		border-radius: 12px;
		font-size: 12px;
		font-weight: 600;
		white-space: nowrap;
	}
	
	.tg-searchdropdown {
		position: relative;
	}
	
	.tg-searchbtn {
		display: flex;
		align-items: center;
		justify-content: center;
		background: #666;
		width: 28px;
		height: 28px;
		border-radius: 50%;
		color: white;
		text-decoration: none;
		transition: all 0.3s ease;
		box-shadow: 0 2px 5px rgba(0,0,0,0.2);
	}
	
	.tg-searchbtn:hover {
		background: #F4A261;
		transform: translateY(-2px);
		box-shadow: 0 4px 15px rgba(244, 162, 97, 0.3);
		color: white;
		text-decoration: none;
	}
	
	.tg-searchbtn i {
		font-size: 12px;
	}
	
	/* Dropdown Menu */
	.tg-searchdropdownmenu {
		position: absolute;
		top: 100%;
		right: 0;
		min-width: 300px;
		background: transparent;
		border: none;
		border-radius: 0;
		box-shadow: none;
		padding: 0;
		margin-top: 5px;
		z-index: 1000;
		display: none;
	}
	
	.tg-searchdropdownmenu.show {
		display: block;
	}
	
	.tg-searchdropdownmenu::before {
		content: '';
		position: absolute;
		top: -8px;
		right: 15px;
		width: 0;
		height: 0;
		border-left: 8px solid transparent;
		border-right: 8px solid transparent;
		border-bottom: 8px solid transparent;
	}
	
	.tg-searchform {
		margin: 0;
	}
	
	.tg-inputgroup {
		display: flex;
		align-items: center;
		background: transparent;
		border-radius: 0;
		border: none;
		overflow: hidden;
		transition: all 0.3s ease;
	}
	
	.tg-inputgroup:focus-within {
		border-color: transparent;
		background: transparent;
		box-shadow: none;
	}
	
	.tg-searchform .form-control {
		border: none;
		padding: 12px 15px;
		font-size: 14px;
		background: white;
		flex: 1;
		outline: none;
		border-radius: 5px;
	}
	
	.tg-searchform .form-control::placeholder {
		color: #999;
		font-style: italic;
	}
	
	.tg-searchsubmit {
		background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
		border: none;
		padding: 12px 15px;
		color: white;
		cursor: pointer;
		transition: all 0.3s ease;
		display: none;
	}
	
	.tg-searchsubmit:hover {
		background: linear-gradient(135deg, #5a6fd8 0%, #6a4190 100%);
		transform: none;
	}
	
	.tg-searchsubmit i {
		display: none;
	}
	
			/* Mobile Responsive for Search */
		@media (max-width: 768px) {
			.tg-action-buttons {
				gap: 8px;
				margin-left: auto;
			}
			
			.tg-action-buttons .tg-searchbtn,
			.tg-action-buttons .tg-btnthemedropdown {
				width: 24px;
				height: 24px;
			}
			
			.tg-action-buttons .tg-searchbtn i,
			.tg-action-buttons .tg-btnthemedropdown i {
				font-size: 10px;
			}
			
			.tg-searchdropdownmenu {
				min-width: 280px;
				right: -120px;
			}
			
			/* Mobile Navigation Area */
			.tg-navigationarea {
				background: white;
				box-shadow: 0 2px 8px rgba(0,0,0,0.1);
			}
		}
	

	
	.floating-element {
		position: absolute;
		border-radius: 50%;
		animation: float 6s ease-in-out infinite;
	}
	
	.float-1 {
		top: 10%;
		left: 10%;
		width: 100px;
		height: 100px;
		background: rgba(255,255,255,0.1);
		animation-duration: 6s;
	}
	
	.float-2 {
		top: 20%;
		right: 15%;
		width: 80px;
		height: 80px;
		background: rgba(255,255,255,0.08);
		animation-duration: 8s;
		animation-direction: reverse;
	}
	
	.float-3 {
		bottom: 20%;
		left: 20%;
		width: 60px;
		height: 60px;
		background: rgba(255,255,255,0.06);
		animation-duration: 7s;
			}
		
		/* Live Chat Styles */
		.tg-livechat {
			position: fixed;
			bottom: 20px;
			right: 20px;
			z-index: 1000;
			font-family: 'Arial', sans-serif;
		}
		
		.tg-chat-toggle {
			width: 60px;
			height: 60px;
			background: linear-gradient(135deg, #4A6366 0%, #3A4F52 100%);
			border-radius: 50%;
			display: flex;
			align-items: center;
			justify-content: center;
			color: white;
			cursor: pointer;
			box-shadow: 0 4px 15px rgba(0,0,0,0.3);
			transition: all 0.3s ease;
			position: relative;
		}
		
		.tg-chat-toggle:hover {
			transform: scale(1.1);
			box-shadow: 0 6px 20px rgba(0,0,0,0.4);
		}
		
		.tg-chat-badge {
			position: absolute;
			top: -5px;
			right: -5px;
			background: #e74c3c;
			color: white;
			border-radius: 50%;
			width: 20px;
			height: 20px;
			display: flex;
			align-items: center;
			justify-content: center;
			font-size: 10px;
			font-weight: bold;
		}
		
		.tg-chat-window {
			position: absolute;
			bottom: 80px;
			right: 0;
			width: 350px;
			height: 450px;
			background: white;
			border-radius: 15px;
			box-shadow: 0 10px 30px rgba(0,0,0,0.2);
			display: none;
			flex-direction: column;
			overflow: hidden;
			z-index: 1000;
			box-sizing: border-box;
		}
		
		.tg-chat-window.active {
			display: flex !important;
		}
		
		.tg-chat-header {
			background: linear-gradient(135deg, #4A6366 0%, #3A4F52 100%);
			color: white;
			padding: 15px 20px;
			display: flex;
			align-items: center;
			justify-content: space-between;
			flex-shrink: 0;
			height: 60px;
			box-sizing: border-box;
		}
		
		.tg-chat-title {
			display: flex;
			align-items: center;
			gap: 10px;
			font-weight: 600;
		}
		
		.tg-chat-actions {
			display: flex;
			gap: 10px;
		}
		
		.tg-chat-actions button {
			background: none;
			border: none;
			color: white;
			cursor: pointer;
			padding: 5px;
			border-radius: 3px;
			transition: background 0.3s ease;
		}
		
		.tg-chat-actions button:hover {
			background: rgba(255,255,255,0.2);
		}
		
		.tg-chat-body {
			flex: 1;
			display: flex;
			flex-direction: column;
			min-height: 0;
			height: 100%;
		}
		
		.tg-chat-messages {
			flex: 1;
			padding: 15px;
			overflow-y: auto;
			background: #f8f9fa;
			min-height: 0;
			height: calc(100% - 140px);
		}
		
		.tg-message {
			display: flex;
			margin-bottom: 15px;
			gap: 10px;
		}
		
		.tg-message-user {
			flex-direction: row-reverse;
		}
		
		.tg-message-avatar {
			width: 35px;
			height: 35px;
			border-radius: 50%;
			overflow: hidden;
			flex-shrink: 0;
		}
		
		.tg-message-avatar img {
			width: 100%;
			height: 100%;
			object-fit: cover;
		}
		
		.tg-message-content {
			max-width: 70%;
		}
		
		.tg-message-text {
			background: white;
			padding: 10px 15px;
			border-radius: 15px;
			box-shadow: 0 2px 5px rgba(0,0,0,0.1);
			margin-bottom: 5px;
		}
		
		.tg-message-user .tg-message-text {
			background: #4A6366;
			color: white;
		}
		
		.tg-message-time {
			font-size: 11px;
			color: #999;
			text-align: right;
		}
		
		.tg-message-user .tg-message-time {
			text-align: left;
		}
		
		.tg-chat-input {
			padding: 15px;
			display: flex;
			gap: 10px;
			background: white;
			border-top: 1px solid #eee;
			flex-shrink: 0;
			position: relative;
			z-index: 1;
			height: 80px;
			box-sizing: border-box;
		}
		
		.tg-chat-input input {
			flex: 1;
			border: 1px solid #ddd;
			border-radius: 20px;
			padding: 10px 15px;
			outline: none;
			font-size: 14px;
		}
		
		.tg-chat-input input:focus {
			border-color: #4A6366;
		}
		
		.tg-chat-input button {
			background: #4A6366;
			color: white;
			border: none;
			border-radius: 50%;
			width: 40px;
			height: 40px;
			cursor: pointer;
			transition: all 0.3s ease;
		}
		
		.tg-chat-input button:hover {
			background: #3A4F52;
			transform: scale(1.1);
		}
		
		/* Reading Progress Bar */
		.tg-reading-progress {
			position: fixed;
			top: 0;
			left: 0;
			width: 100%;
			height: 3px;
			background: rgba(255,255,255,0.2);
			z-index: 10000;
		}
		
		.tg-progress-bar {
			height: 100%;
			background: linear-gradient(90deg, #4A6366 0%, #F4A261 100%);
			width: 0%;
			transition: width 0.3s ease;
		}
		
		/* Back to Top Button */
		.tg-back-to-top {
			position: fixed;
			bottom: 100px;
			right: 20px;
			width: 45px;
			height: 45px;
			background: linear-gradient(135deg, #4A6366 0%, #3A4F52 100%);
			color: white;
			border-radius: 50%;
			display: flex;
			align-items: center;
			justify-content: center;
			cursor: pointer;
			opacity: 0;
			visibility: hidden;
			transform: translateY(20px) scale(0.8);
			transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
			z-index: 999;
			box-shadow: 0 4px 15px rgba(0,0,0,0.3);
			font-size: 16px;
			border: 2px solid rgba(255,255,255,0.1);
			backdrop-filter: blur(10px);
		}
		
		.tg-back-to-top.active {
			opacity: 1;
			visibility: visible;
			transform: translateY(0) scale(1);
		}
		
		.tg-back-to-top:hover {
			transform: translateY(-3px) scale(1.05);
			box-shadow: 0 6px 20px rgba(0,0,0,0.4);
			background: linear-gradient(135deg, #5A7376 0%, #4A5F62 100%);
		}
		
		.tg-back-to-top:active,
		.tg-back-to-top.clicked {
			transform: translateY(-1px) scale(0.95);
			transition: all 0.1s ease;
			background: linear-gradient(135deg, #6A8386 0%, #5A6F72 100%);
		}
		
		/* Mobile responsive for back-to-top */
		@media (max-width: 768px) {
			.tg-back-to-top {
				width: 40px;
				height: 40px;
				bottom: 80px;
				right: 15px;
				font-size: 14px;
			}
		}
		
		/* Quick Actions Menu */
		.tg-quick-actions {
			position: fixed;
			bottom: 20px;
			left: 20px;
			z-index: 999;
		}
		
		.tg-quick-toggle {
			width: 60px;
			height: 60px;
			background: linear-gradient(135deg, #F4A261 0%, #E8944A 100%);
			border-radius: 50%;
			display: flex;
			align-items: center;
			justify-content: center;
			color: white;
			cursor: pointer;
			box-shadow: 0 4px 15px rgba(0,0,0,0.3);
			transition: all 0.3s ease;
			font-size: 20px;
		}
		
		.tg-quick-toggle:hover {
			transform: scale(1.1);
			box-shadow: 0 6px 20px rgba(0,0,0,0.4);
		}
		
		.tg-quick-menu {
			position: absolute;
			bottom: 80px;
			left: 0;
			background: white;
			border-radius: 15px;
			box-shadow: 0 10px 30px rgba(0,0,0,0.2);
			padding: 10px;
			display: none;
			flex-direction: column;
			gap: 5px;
			min-width: 150px;
		}
		
		.tg-quick-menu.active {
			display: flex;
		}
		
		.tg-quick-item {
			display: flex;
			align-items: center;
			gap: 10px;
			padding: 12px 15px;
			color: #333;
			text-decoration: none;
			border-radius: 10px;
			transition: all 0.3s ease;
			font-size: 14px;
		}
		
		.tg-quick-item:hover {
			background: #f8f9fa;
			color: #4A6366;
			transform: translateX(5px);
		}
		
		.tg-quick-item i {
			width: 20px;
			text-align: center;
		}
		
		/* Mobile Responsive for New Features */
		@media (max-width: 768px) {
			.tg-chat-window {
				width: 300px;
				height: 400px;
				right: -10px;
			}
			
			.tg-quick-actions {
				bottom: 10px;
				left: 10px;
			}
			
			.tg-quick-menu {
				left: -10px;
			}
			
			.tg-back-to-top {
				bottom: 80px;
				right: 10px;
			}
			
			/* Mobile responsive for user profile */
			.tg-user-profile {
				margin-top: 10px !important;
			}
			
			.tg-user-info {
				padding: 6px 12px !important;
			}
			
			.tg-user-avatar {
				width: 28px !important;
				height: 28px !important;
			}
			
			#userName {
				font-size: 12px !important;
			}
			
			.tg-user-dropdown {
				right: 0 !important;
				min-width: 180px !important;
			}
		}
		
		/* User Profile Styles */
		.tg-user-profile {
			position: relative;
		}
		
		.tg-user-info:hover {
			transform: translateY(-1px);
			box-shadow: 0 4px 15px rgba(74, 99, 102, 0.3);
		}
		
		/* Hover Dropdown Styles */
		.tg-user-info:hover .tg-user-dropdown,
		.tg-user-dropdown:hover {
			display: block !important;
			opacity: 1;
			visibility: visible;
			transform: translateY(0) scale(1);
		}
		
		.tg-user-info:hover .fa-chevron-down {
			transform: rotate(180deg) !important;
			transition: transform 0.3s ease;
		}
		
		.tg-user-dropdown {
			display: none;
			opacity: 0;
			visibility: hidden;
			transform: translateY(-10px) scale(0.95);
			transition: all 0.3s ease;
			animation: dropdownFadeIn 0.3s ease;
			pointer-events: auto;
		}
		
		@keyframes dropdownFadeIn {
			from {
				opacity: 0;
				transform: translateY(-10px) scale(0.95);
			}
			to {
				opacity: 1;
				transform: translateY(0) scale(1);
			}
		}
		
		.tg-dropdown-item:hover {
			background: #f8f9fa !important;
			transform: translateX(5px);
			transition: all 0.3s ease;
		}
		
		/* Smooth hover transition for user info */
		.tg-user-info {
			transition: all 0.3s ease;
		}
		
		/* Ensure dropdown stays visible when hovering over it */
		.tg-user-profile:hover .tg-user-dropdown {
			display: block !important;
			opacity: 1;
			visibility: visible;
		}
		
		/* Add gap between user info and dropdown */
		.tg-user-dropdown {
			margin-top: -10px;
		}
		
		/* Prevent dropdown from being cut off */
		.tg-user-profile {
			z-index: 1000;
		}
		
		/* Modal Styles */
		.tg-book-modal,
		.tg-timer-modal {
			position: fixed;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			z-index: 10000;
			display: none;
		}
		
		.tg-book-modal.active,
		.tg-timer-modal.active {
			display: flex;
			align-items: center;
			justify-content: center;
		}
		
		.tg-modal-overlay {
			position: absolute;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			background: rgba(0,0,0,0.7);
			backdrop-filter: blur(5px);
		}
		
		.tg-modal-content {
			position: relative;
			background: white;
			border-radius: 15px;
			max-width: 95%;
			max-height: 95%;
			width: 800px;
			overflow: hidden;
			box-shadow: 0 20px 60px rgba(0,0,0,0.3);
			animation: modalSlideIn 0.3s ease;
		}
		
		@keyframes modalSlideIn {
			from {
				opacity: 0;
				transform: scale(0.8) translateY(-50px);
			}
			to {
				opacity: 1;
				transform: scale(1) translateY(0);
			}
		}
		
		.tg-modal-header {
			background: white;
			color: #333;
			padding: 20px 25px;
			display: flex;
			align-items: center;
			justify-content: space-between;
			border-bottom: 1px solid #e0e0e0;
		}
		
		.tg-modal-header h3 {
			margin: 0;
			font-size: 1.3rem;
			font-weight: 600;
		}
		
		.tg-modal-close {
			background: #f8f9fa;
			border: none;
			color: #666;
			font-size: 20px;
			cursor: pointer;
			padding: 8px;
			border-radius: 50%;
			transition: all 0.3s ease;
			width: 40px;
			height: 40px;
			display: flex;
			align-items: center;
			justify-content: center;
		}
		
		.tg-modal-close:hover {
			background: #e9ecef;
			color: #333;
			transform: scale(1.1);
		}
		
		.tg-modal-body {
			padding: 25px;
			max-height: 70vh;
			overflow-y: auto;
		}
		
		/* Book Preview Modal Specific Styles */
		.tg-book-preview {
			display: flex;
			gap: 25px;
			margin-bottom: 25px;
		}
		
		.tg-book-cover {
			flex-shrink: 0;
			width: 200px;
		}
		
		.tg-book-cover img {
			width: 100%;
			height: auto;
			border-radius: 10px;
			box-shadow: 0 8px 25px rgba(0,0,0,0.2);
		}
		
		.tg-book-info {
			flex: 1;
		}
		
		.tg-book-info h4 {
			font-size: 1.5rem;
			font-weight: 700;
			margin-bottom: 10px;
			color: #333;
		}
		
		.tg-preview-author {
			color: #666;
			font-size: 1.1rem;
			margin-bottom: 15px;
		}
		
		.tg-preview-rating {
			display: flex;
			align-items: center;
			gap: 10px;
			margin-bottom: 20px;
		}
		
		.tg-rating-text {
			color: #666;
			font-size: 14px;
		}
		
		.tg-preview-details {
			margin-bottom: 20px;
		}
		
		.tg-preview-details p {
			margin-bottom: 8px;
			color: #555;
		}
		
		.tg-preview-details strong {
			color: #333;
		}
		
		.tg-preview-description h5 {
			font-size: 1.1rem;
			font-weight: 600;
			margin-bottom: 10px;
			color: #333;
		}
		
		.tg-preview-description p {
			color: #666;
			line-height: 1.6;
		}
		
		.tg-preview-actions {
			display: flex;
			gap: 15px;
			flex-wrap: wrap;
		}
		
		.tg-btn-preview {
			background: #4A6366 !important;
			color: white !important;
		}
		
		.tg-btn-wishlist {
			background: #F4A261 !important;
			color: white !important;
		}
		
		.tg-btn-cart {
			background: #28a745 !important;
			color: white !important;
		}
		
		/* Timer Modal Specific Styles */
		.tg-timer-content {
			max-width: 500px;
		}
		
		.tg-timer-display {
			text-align: center;
			margin-bottom: 30px;
		}
		
		.tg-timer-time {
			font-size: 3rem;
			font-weight: 700;
			color: #4A6366;
			margin-bottom: 10px;
			font-family: 'Courier New', monospace;
		}
		
		.tg-timer-status {
			color: #666;
			font-size: 1.1rem;
		}
		
		.tg-timer-controls {
			display: flex;
			gap: 15px;
			justify-content: center;
			margin-bottom: 30px;
		}
		
		.tg-timer-settings h5 {
			font-size: 1.1rem;
			font-weight: 600;
			margin-bottom: 15px;
			color: #333;
		}
		
		.tg-timer-presets {
			display: flex;
			gap: 10px;
			flex-wrap: wrap;
		}
		
		.tg-timer-preset {
			background: #f8f9fa;
			border: 2px solid #e9ecef;
			color: #333;
			padding: 10px 15px;
			border-radius: 25px;
			cursor: pointer;
			transition: all 0.3s ease;
			font-size: 14px;
		}
		
		.tg-timer-preset:hover,
		.tg-timer-preset.active {
			background: #4A6366;
			color: white;
			border-color: #4A6366;
		}
		
		/* Mobile Responsive for Modals */
		@media (max-width: 768px) {
			.tg-book-preview {
				flex-direction: column;
				text-align: center;
			}
			
			.tg-book-cover {
				width: 150px;
				margin: 0 auto;
			}
			
			.tg-timer-time {
				font-size: 2.5rem;
			}
			
			.tg-timer-controls {
				flex-direction: column;
				align-items: center;
			}
			
			.tg-timer-presets {
				justify-content: center;
			}
		}
		
		/* Auth Modal Styles */
		.auth-modal {
			display: none;
			position: fixed;
			z-index: 10001;
			left: 0;
			top: 0;
			width: 100%;
			height: 100%;
			overflow: auto;
			background-color: rgba(0,0,0,0.5);
			backdrop-filter: blur(5px);
		}
		
		.auth-modal-content {
			background-color: #fefefe;
			margin: 5% auto;
			padding: 0;
			border-radius: 15px;
			width: 90%;
			max-width: 400px;
			box-shadow: 0 20px 60px rgba(0,0,0,0.3);
			animation: modalSlideIn 0.3s ease;
			position: relative;
		}
		
		.auth-modal-header {
			background: linear-gradient(135deg, #4A6366 0%, #3A4F52 100%);
			color: white;
			padding: 20px 25px;
			border-radius: 15px 15px 0 0;
			display: flex;
			align-items: center;
			justify-content: space-between;
		}
		
		.auth-modal-title {
			margin: 0;
			font-size: 1.3rem;
			font-weight: 600;
		}
		
		.auth-close {
			color: white;
			font-size: 28px;
			font-weight: bold;
			cursor: pointer;
			background: none;
			border: none;
			padding: 0;
			line-height: 1;
		}
		
		.auth-close:hover {
			opacity: 0.7;
		}
		
		.auth-form {
			padding: 25px;
		}
		
		.auth-form-group {
			margin-bottom: 20px;
		}
		
		.auth-form-group label {
			display: block;
			margin-bottom: 8px;
			font-weight: 600;
			color: #333;
			font-size: 14px;
		}
		
		.auth-form-group input {
			width: 100%;
			padding: 12px 15px;
			border: 2px solid #e1e5e9;
			border-radius: 8px;
			font-size: 14px;
			transition: all 0.3s ease;
			box-sizing: border-box;
		}
		
		.auth-form-group input:focus {
			outline: none;
			border-color: #4A6366;
			box-shadow: 0 0 0 3px rgba(74, 99, 102, 0.1);
		}
		
		.auth-forgot-password {
			text-align: right;
			margin-bottom: 20px;
		}
		
		.auth-forgot-password a {
			color: #4A6366;
			text-decoration: none;
			font-size: 14px;
			font-weight: 500;
		}
		
		.auth-forgot-password a:hover {
			text-decoration: underline;
		}
		
		.auth-form-submit {
			width: 100%;
			background: linear-gradient(135deg, #4A6366 0%, #3A4F52 100%);
			color: white;
			padding: 12px;
			border: none;
			border-radius: 8px;
			font-size: 16px;
			font-weight: 600;
			cursor: pointer;
			transition: all 0.3s ease;
			margin-bottom: 20px;
		}
		
		.auth-form-submit:hover {
			transform: translateY(-2px);
			box-shadow: 0 8px 25px rgba(74, 99, 102, 0.3);
		}
		
		.auth-divider {
			text-align: center;
			margin: 20px 0;
			position: relative;
		}
		
		.auth-divider::before {
			content: '';
			position: absolute;
			top: 50%;
			left: 0;
			right: 0;
			height: 1px;
			background: #e1e5e9;
		}
		
		.auth-divider span {
			background: white;
			padding: 0 15px;
			color: #666;
			font-size: 14px;
		}
		
		.auth-google-login {
			width: 100%;
			background: white;
			color: #333;
			padding: 12px;
			border: 2px solid #e1e5e9;
			border-radius: 8px;
			font-size: 14px;
			font-weight: 500;
			cursor: pointer;
			transition: all 0.3s ease;
			display: flex;
			align-items: center;
			justify-content: center;
			gap: 10px;
			margin-bottom: 20px;
		}
		
		.auth-google-login:hover {
			background: #f8f9fa;
			border-color: #4A6366;
		}
		
		.auth-google-login img {
			width: 20px;
			height: 20px;
		}
		
		.auth-form-footer {
			text-align: center;
			margin-top: 20px;
		}
		
		.auth-form-footer p {
			margin: 0;
			color: #666;
			font-size: 14px;
		}
		
		.auth-form-footer a {
			color: #4A6366;
			text-decoration: none;
			font-weight: 600;
		}
		
		.auth-form-footer a:hover {
			text-decoration: underline;
		}
		
		.auth-info-text {
			color: #1E3A8A;
			font-size: 0.9rem;
			margin-bottom: 1.5rem;
			line-height: 1.5;
		}
		
		/* Mobile Responsive for Auth Modals */
		@media (max-width: 768px) {
			.auth-modal-content {
				margin: 10% auto;
				width: 95%;
			}
			
			.auth-form {
				padding: 20px;
			}
		}
		
		/* Universal Modal Styles */
		.tg-universal-modal {
			display: none;
			position: fixed;
			z-index: 10002;
			left: 0;
			top: 0;
			width: 100%;
			height: 100%;
			overflow: auto;
			background-color: rgba(0,0,0,0.5);
			backdrop-filter: blur(5px);
		}
		
		.tg-universal-modal-content {
			max-width: 420px;
			padding: 0;
			border-radius: 15px;
			overflow: hidden;
			background: #E6F3FA;
			margin: 5% auto;
			box-shadow: 0 20px 60px rgba(0,0,0,0.3);
			animation: modalSlideIn 0.3s ease;
		}
		
		.tg-universal-modal-header {
			background: #E6F3FA;
			color: #1E3A8A;
			padding: 20px 24px;
			margin: 0;
			border-bottom: 1px solid #E4B04A;
			display: flex;
			align-items: center;
			justify-content: space-between;
		}
		
		.tg-universal-modal-title {
			margin: 0;
			font-size: 1.2rem;
			font-weight: 600;
			color: #1E3A8A;
		}
		
		.tg-universal-close {
			color: #1E3A8A;
			font-size: 1.5rem;
			cursor: pointer;
			background: none;
			border: none;
			padding: 0;
			line-height: 1;
		}
		
		.tg-universal-close:hover {
			opacity: 0.7;
		}
		
		.tg-universal-modal-body {
			padding: 24px;
		}
		
		.tg-universal-icon {
			color: #e74c3c;
			font-size: 3rem;
			margin-bottom: 16px;
		}
		
		.tg-universal-heading {
			color: #1E3A8A;
			font-size: 1.1rem;
			font-weight: 600;
			margin-bottom: 8px;
		}
		
		.tg-universal-description {
			color: #7f8c8d;
			font-size: 0.95rem;
			line-height: 1.5;
			margin: 0;
		}
		
		.tg-universal-info-box {
			background: #F0F7FB;
			border-radius: 8px;
			padding: 16px;
			margin-bottom: 24px;
			border-left: 4px solid #e74c3c;
		}
		
		.tg-universal-info-text {
			color: #1E3A8A;
			font-size: 0.9rem;
			line-height: 1.5;
			margin: 0;
		}
		
		.tg-universal-info-icon {
			color: #e74c3c;
			margin-right: 8px;
		}
		
		.tg-universal-buttons {
			display: flex;
			gap: 16px;
		}
		
		.tg-universal-btn {
			flex: 1;
			border: none;
			border-radius: 8px;
			padding: 14px 0;
			font-size: 1rem;
			font-weight: 600;
			cursor: pointer;
			transition: all 0.3s ease;
		}
		
		.tg-universal-btn-cancel {
			background: #95a5a6;
			color: white;
		}
		
		.tg-universal-btn-cancel:hover {
			background: #7f8c8d;
		}
		
		.tg-universal-btn-danger {
			background: #e74c3c;
			color: white;
		}
		
		.tg-universal-btn-danger:hover {
			background: #c0392b;
		}
		
		.tg-universal-btn-success {
			background: #27ae60;
			color: white;
		}
		
		.tg-universal-btn-success:hover {
			background: #229954;
		}
		
		.tg-universal-btn-primary {
			background: #3498db;
			color: white;
		}
		
		.tg-universal-btn-primary:hover {
			background: #2980b9;
		}
		
		/* Mobile Responsive for Universal Modal */
		@media (max-width: 768px) {
			.tg-universal-modal-content {
				margin: 10% auto;
				width: 95%;
			}
			
			.tg-universal-buttons {
				flex-direction: column;
			}
		}
		
		/* Notification System Styles */
		.tg-notification {
			position: fixed;
			top: 20px;
			right: 20px;
			background: white;
			border-radius: 8px;
			box-shadow: 0 5px 20px rgba(0, 0, 0, 0.15);
			padding: 12px 16px;
			transform: translateX(100%);
			transition: transform 0.3s ease;
			z-index: 10000;
			border-left: 3px solid #4A6366;
			font-size: 13px;
			max-width: 300px;
			min-width: 250px;
		}
		
		.tg-notification.show {
			transform: translateX(0);
		}
		
		.tg-notification-content {
			display: flex;
			align-items: center;
			gap: 8px;
		}
		
		.tg-notification-content i {
			font-size: 16px;
			flex-shrink: 0;
		}
		
		.tg-notification-content span {
			font-size: 13px;
			line-height: 1.4;
			color: #333;
		}
		
		.tg-notification-success {
			border-left-color: #28a745;
		}
		
		.tg-notification-success i {
			color: #28a745;
		}
		
		.tg-notification-error {
			border-left-color: #dc3545;
		}
		
		.tg-notification-error i {
			color: #dc3545;
		}
		
		.tg-notification-info {
			border-left-color: #17a2b8;
		}
		
		.tg-notification-info i {
			color: #17a2b8;
		}
		
			/* Mobile Responsive for Notifications */
	@media (max-width: 768px) {
		.tg-notification {
			top: 10px;
			right: 10px;
			left: 10px;
			max-width: none;
			min-width: auto;
		}
	}
	
	/* Uniform Book Item Heights */
	.tg-bestsellingbooksslider .item {
		height: 100%;
		display: flex;
		flex-direction: column;
	}
	
	.tg-bestsellingbooksslider .tg-postbook {
		height: 100%;
		display: flex;
		flex-direction: column;
		min-height: 500px;
	}
	
	.tg-bestsellingbooksslider .tg-postbookcontent {
		flex: 1;
		display: flex;
		flex-direction: column;
	}
	
	.tg-bestsellingbooksslider .tg-booktitle {
		flex: 1;
		margin-bottom: 10px;
	}
	
	.tg-bestsellingbooksslider .tg-booktitle h3 {
		line-height: 1.3;
		min-height: 2.6em;
		display: -webkit-box;
		-webkit-box-orient: vertical;
		overflow: hidden;
	}
	
	.tg-bestsellingbooksslider .tg-bookprice {
		margin-top: auto;
	}
	
	.tg-bestsellingbooksslider 		.tg-btn {
			margin-top: 10px;
		}
		
		/* Membership Package Section Styles */
	.tg-membership-package {
		position: relative;
		overflow: hidden;
	}
	
	.tg-benefit-icon {
		transition: all 0.3s ease;
	}
	
	.tg-laptop-design {
		transition: all 0.3s ease;
	}
	
	.tg-character {
		transition: all 0.3s ease;
	}
	
	.tg-btn {
		transition: all 0.3s ease;
	}
	
	/* Mobile Responsive for Membership Package */
	@media (max-width: 768px) {
		.tg-membership-package {
			padding: 30px 20px;
		}
		
		.tg-package-header h2 {
			font-size: 2rem !important;
		}
		
		.tg-price-badge {
			font-size: 1.1rem !important;
			padding: 10px 20px !important;
		}
		
		.tg-benefit-item {
			margin-bottom: 15px !important;
		}
		
		.tg-benefit-text span {
			font-size: 14px !important;
		}
		
		.tg-package-visual {
			height: 300px !important;
		}
		
		.tg-laptop-design {
			width: 250px !important;
			height: 150px !important;
		}
		
		.tg-base-design {
			width: 270px !important;
		}
		
		.tg-character {
			width: 50px !important;
			height: 65px !important;
		}
	}
	
	/* Căn chỉnh Client Services */
		.tg-clientservices {
			display: flex;
			align-items: stretch;
			gap: 0;
			margin: 0;
			padding: 0;
			list-style: none;
		}
		
		.tg-clientservices li {
			flex: 1;
			display: flex;
			flex-direction: column;
			justify-content: center;
			align-items: center;
			text-align: center;
			padding: 30px 20px;
			height: 100%;
			min-height: 120px;
		}
		
		.tg-clientservices .tg-clientserviceicon {
			margin-bottom: 15px;
			display: flex;
			align-items: center;
			justify-content: center;
		}
		
		.tg-clientservices .tg-clientserviceicon i {
			font-size: 3rem;
			color: #ffd700;
		}
		
		.tg-clientservices .tg-titlesubtitle {
			flex: 1;
			display: flex;
			flex-direction: column;
			justify-content: center;
		}
		
		.tg-clientservices .tg-titlesubtitle h3 {
			margin: 0 0 8px 0;
			font-size: 1.4rem;
			line-height: 1.3;
			font-weight: 600;
		}
		
		.tg-clientservices .tg-titlesubtitle p {
			margin: 0;
			font-size: 1.1rem;
			line-height: 1.4;
		}
		
		/* Responsive cho Client Services */
		@media (max-width: 768px) {
			.tg-clientservices {
				flex-direction: column;
				gap: 20px;
			}
			
			.tg-clientservices li {
				min-height: 100px;
				padding: 20px 15px;
			}
			
			.tg-clientservices .tg-clientserviceicon i {
				font-size: 2.5rem;
			}
			
			.tg-clientservices .tg-titlesubtitle h3 {
				font-size: 1.2rem;
			}
			
			.tg-clientservices .tg-titlesubtitle p {
				font-size: 1rem;
			}
		}
		
		/* Header Styles */
		.tg-header {
			position: relative;
			z-index: 1000;
		}
		
		/* Top Bar Styles */
		.tg-topbar {
			background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
			color: white;
			padding: 8px 0;
			font-size: 12px;
		}
		
		.tg-topbar a:hover {
			color: #ffd700 !important;
			transform: scale(1.1);
		}
		
		/* Main Header Styles */
		.tg-main-header {
			background: white;
			padding: 15px 0;
			box-shadow: 0 2px 10px rgba(0,0,0,0.1);
		}
		
		/* Ensure equal height for all header elements */
		.tg-main-header .row {
			align-items: stretch;
			height: 100px;
		}
		
		.tg-main-header .col-xs-12,
		.tg-main-header .col-sm-12,
		.tg-main-header .col-md-3,
		.tg-main-header .col-md-6,
		.tg-main-header .col-lg-3,
		.tg-main-header .col-lg-6 {
			display: flex;
			align-items: center;
			justify-content: center;
			height: 100px;
			padding: 0;
		}
		
		/* Logo container */
		.tg-logo {
			display: flex;
			align-items: center;
			justify-content: center;
			height: 100px;
			width: 100%;
		}
		
		.tg-logo img {
			max-height: 60px;
			width: auto;
			transition: transform 0.3s ease;
		}
		
		.tg-logo img:hover {
			transform: scale(1.05);
		}
		
		/* Search container */
		.tg-search-container {
			display: flex;
			align-items: center;
			justify-content: center;
			height: 100px;
			width: 100%;
		}
		
		/* User actions container */
		.tg-user-actions {
			display: flex;
			align-items: center;
			justify-content: center;
			height: 100px;
			width: 100%;
			gap: 15px;
		}
		
		/* Action items */
		.tg-action-item {
			position: relative;
		}
		
		.tg-action-item a {
			display: flex;
			align-items: center;
			justify-content: center;
			width: 40px;
			height: 40px;
			background: linear-gradient(135deg, #4A6366 0%, #3A4F52 100%);
			color: white;
			border-radius: 50%;
			text-decoration: none;
			transition: all 0.3s ease;
			position: relative;
		}
		
		.tg-badge {
			position: absolute;
			top: -5px;
			right: -5px;
			background: #e74c3c;
			color: white;
			border-radius: 50%;
			width: 18px;
			height: 18px;
			display: flex;
			align-items: center;
			justify-content: center;
			font-size: 10px;
			font-weight: bold;
		}
		
		/* User profile */
		.tg-user-profile {
			position: relative;
			display: flex;
			align-items: center;
			justify-content: center;
			height: 100%;
		}
		
		.tg-user-info {
			display: flex;
			align-items: center;
			gap: 12px;
			background: linear-gradient(135deg, #4A6366 0%, #3A4F52 100%);
			color: white;
			padding: 12px 20px;
			border-radius: 30px;
			cursor: pointer;
			transition: all 0.3s ease;
			box-shadow: 0 4px 15px rgba(74, 99, 102, 0.2);
			border: 1px solid rgba(255,255,255,0.1);
			min-width: 180px;
			justify-content: space-between;
		}
		
		.tg-user-info:hover {
			transform: translateY(-2px);
			box-shadow: 0 6px 20px rgba(74, 99, 102, 0.3);
			background: linear-gradient(135deg, #5A7376 0%, #4A5F62 100%);
		}
		
		.tg-user-avatar {
			width: 36px;
			height: 36px;
			border-radius: 50%;
			overflow: hidden;
			border: 2px solid rgba(255,255,255,0.3);
			flex-shrink: 0;
		}
		
		.tg-user-avatar img {
			width: 100%;
			height: 100%;
			object-fit: cover;
		}
		
		#userName {
			font-weight: 600;
			font-size: 14px;
			flex: 1;
			text-align: left;
			margin: 0 8px;
		}
		
		.tg-user-info .fa-chevron-down {
			font-size: 12px;
			transition: transform 0.3s ease;
			flex-shrink: 0;
			opacity: 0.8;
		}
		
		.tg-user-info:hover .fa-chevron-down {
			opacity: 1;
		}
		
		/* User dropdown */
		.tg-user-dropdown {
			position: absolute;
			top: 100%;
			right: 0;
			background: white;
			border-radius: 15px;
			box-shadow: 0 10px 30px rgba(0,0,0,0.15);
			min-width: 250px;
			z-index: 1000;
			display: none;
			margin-top: 10px;
			overflow: hidden;
		}
		
		.tg-dropdown-header {
			padding: 20px;
			background: linear-gradient(135deg, #4A6366 0%, #3A4F52 100%);
			color: white;
			text-align: center;
		}
		
		.tg-dropdown-avatar {
			width: 60px;
			height: 60px;
			border-radius: 50%;
			overflow: hidden;
			margin: 0 auto 10px;
			border: 3px solid rgba(255,255,255,0.3);
		}
		
		.tg-dropdown-avatar img {
			width: 100%;
			height: 100%;
			object-fit: cover;
		}
		
		#dropdownUserName {
			font-weight: 600;
			margin-bottom: 5px;
			font-size: 16px;
		}
		
		#dropdownUserEmail {
			font-size: 12px;
			opacity: 0.8;
		}
		
		.tg-dropdown-menu {
			padding: 10px 0;
		}
		
		.tg-dropdown-item {
			display: flex;
			align-items: center;
			gap: 12px;
			padding: 12px 20px;
			color: #333;
			text-decoration: none;
			transition: all 0.3s ease;
		}
		
		.tg-dropdown-item i {
			width: 16px;
			color: #4A6366;
		}
		
		.tg-dropdown-divider {
			border-top: 1px solid #eee;
			margin: 8px 0;
		}
		
		.tg-dropdown-logout {
			color: #dc3545 !important;
		}
		
		.tg-dropdown-logout i {
			color: #dc3545 !important;
		}
		
		/* Search box styles */
		.tg-search-box {
			position: relative;
			display: flex;
			align-items: center;
			background: #f8f9fa;
			border-radius: 25px;
			border: 2px solid #e9ecef;
			transition: all 0.3s ease;
			overflow: hidden;
			width: 100%;
			max-width: 500px;
		}
		
		.tg-search-box input {
			flex: 1;
			border: none;
			padding: 12px 20px;
			background: transparent;
			outline: none;
			font-size: 14px;
			color: #333;
		}
		
		.tg-search-box button {
			background: linear-gradient(135deg, #4A6366 0%, #3A4F52 100%);
			color: white;
			border: none;
			padding: 12px 20px;
			cursor: pointer;
			transition: all 0.3s ease;
			border-radius: 0 25px 25px 0;
		}
		
		/* Search suggestions */
		.tg-search-suggestions {
			position: absolute;
			top: 100%;
			left: 0;
			right: 0;
			background: white;
			border-radius: 10px;
			box-shadow: 0 5px 20px rgba(0,0,0,0.15);
			z-index: 1000;
			display: none;
			margin-top: 5px;
		}
		
		.tg-suggestion-item {
			padding: 10px 15px;
			border-bottom: 1px solid #eee;
			cursor: pointer;
			transition: background 0.3s ease;
			display: flex;
			align-items: center;
		}
		
		.tg-suggestion-item:last-child {
			border-bottom: none;
		}
		
		.tg-suggestion-item i {
			margin-right: 10px;
			color: #4A6366;
		}
		
		/* Cart Button Styles */
		.tg-cart-btn {
			position: relative;
			margin-right: 15px;
		}
		
		.tg-cart-link {
			display: flex;
			align-items: center;
			justify-content: center;
			width: 45px;
			height: 45px;
			background: linear-gradient(135deg, #4A6366 0%, #3A4F52 100%);
			color: white;
			border-radius: 50%;
			text-decoration: none;
			transition: all 0.3s ease;
			position: relative;
			box-shadow: 0 4px 15px rgba(74, 99, 102, 0.2);
			border: 1px solid rgba(255,255,255,0.1);
		}
		
		.tg-cart-link:hover {
			transform: translateY(-3px);
			box-shadow: 0 6px 20px rgba(74, 99, 102, 0.3);
			background: linear-gradient(135deg, #5A7376 0%, #4A5F62 100%);
		}
		
		.tg-cart-link i {
			font-size: 16px;
		}
		
		.tg-cart-badge {
			position: absolute;
			top: -5px;
			right: -5px;
			background: #e74c3c;
			color: white;
			border-radius: 50%;
			width: 20px;
			height: 20px;
			display: flex;
			align-items: center;
			justify-content: center;
			font-size: 11px;
			font-weight: bold;
			border: 2px solid white;
		}
		
		/* Cart Modal Styles */
		.tg-cart-modal {
			display: none;
			position: fixed;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			z-index: 10000;
			background: rgba(0,0,0,0.5);
			backdrop-filter: blur(5px);
		}
		
		.tg-cart-modal.active {
			display: flex;
			align-items: center;
			justify-content: center;
		}
		
		.tg-cart-modal-overlay {
			position: absolute;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
		}
		
		.tg-cart-modal-content {
			position: relative;
			background: white;
			border-radius: 15px;
			width: 90%;
			max-width: 600px;
			max-height: 80vh;
			overflow: hidden;
			box-shadow: 0 20px 60px rgba(0,0,0,0.3);
			animation: modalSlideIn 0.3s ease;
		}
		
		.tg-cart-modal-header {
			background: linear-gradient(135deg, #4A6366 0%, #3A4F52 100%);
			color: white;
			padding: 20px 25px;
			display: flex;
			align-items: center;
			justify-content: space-between;
		}
		
		.tg-cart-modal-header h3 {
			margin: 0;
			font-size: 1.3rem;
			font-weight: 600;
			display: flex;
			align-items: center;
			gap: 10px;
			color: white;
		}
		
		.tg-cart-modal-close {
			background: rgba(255,255,255,0.2);
			border: none;
			color: white;
			font-size: 18px;
			cursor: pointer;
			padding: 8px;
			border-radius: 50%;
			transition: all 0.3s ease;
			width: 35px;
			height: 35px;
			display: flex;
			align-items: center;
			justify-content: center;
		}
		
		.tg-cart-modal-close:hover {
			background: rgba(255,255,255,0.3);
			transform: scale(1.1);
		}
		
		.tg-cart-modal-body {
			padding: 25px;
			max-height: 50vh;
			overflow-y: auto;
		}
		
		.tg-cart-items {
			display: flex;
			flex-direction: column;
			gap: 20px;
		}
		
		.tg-cart-item {
			display: flex;
			align-items: center;
			gap: 15px;
			padding: 15px;
			background: #f8f9fa;
			border-radius: 10px;
			border: 1px solid #e9ecef;
		}
		
		.tg-cart-item-image {
			width: 80px;
			height: 100px;
			flex-shrink: 0;
		}
		
		.tg-cart-item-image img {
			width: 100%;
			height: 100%;
			object-fit: cover;
			border-radius: 8px;
		}
		
		.tg-cart-item-details {
			flex: 1;
		}
		
		.tg-cart-item-details h4 {
			margin: 0 0 5px 0;
			font-size: 16px;
			font-weight: 600;
			color: #333;
		}
		
		.tg-cart-item-author {
			margin: 0 0 10px 0;
			color: #666;
			font-size: 14px;
		}
		
		.tg-cart-item-price {
			display: flex;
			align-items: center;
			gap: 10px;
		}
		
		.tg-cart-item-current {
			font-weight: 600;
			color: #4A6366;
			font-size: 16px;
		}
		
		.tg-cart-item-original {
			color: #999;
			text-decoration: line-through;
			font-size: 14px;
		}
		
		.tg-cart-item-actions {
			display: flex;
			flex-direction: column;
			align-items: center;
			gap: 10px;
		}
		
		.tg-cart-item-quantity {
			display: flex;
			align-items: center;
			gap: 10px;
			background: white;
			border-radius: 20px;
			padding: 5px;
			border: 1px solid #ddd;
		}
		
		.tg-quantity-btn {
			background: #4A6366;
			color: white;
			border: none;
			width: 25px;
			height: 25px;
			border-radius: 50%;
			cursor: pointer;
			transition: all 0.3s ease;
			display: flex;
			align-items: center;
			justify-content: center;
			font-size: 12px;
		}
		
		.tg-quantity-btn:hover {
			background: #3A4F52;
			transform: scale(1.1);
		}
		
		.tg-quantity-number {
			font-weight: 600;
			color: #333;
			min-width: 20px;
			text-align: center;
		}
		
		.tg-cart-item-remove {
			background: #dc3545;
			color: white;
			border: none;
			width: 30px;
			height: 30px;
			border-radius: 50%;
			cursor: pointer;
			transition: all 0.3s ease;
			display: flex;
			align-items: center;
			justify-content: center;
		}
		
		.tg-cart-item-remove:hover {
			background: #c82333;
			transform: scale(1.1);
		}
		
		.tg-cart-empty {
			text-align: center;
			padding: 40px 20px;
			color: #666;
		}
		
		.tg-cart-empty i {
			font-size: 4rem;
			color: #ddd;
			margin-bottom: 20px;
			display: block;
		}
		
		.tg-cart-empty h4 {
			margin: 0 0 10px 0;
			color: #333;
		}
		
		.tg-cart-empty p {
			margin: 0 0 20px 0;
			color: #666;
		}
		
		.tg-cart-modal-footer {
			padding: 20px 25px;
			background: #f8f9fa;
			border-top: 1px solid #e9ecef;
		}
		
		.tg-cart-summary {
			display: flex;
			justify-content: space-between;
			align-items: center;
			margin-bottom: 20px;
			padding: 15px;
			background: white;
			border-radius: 10px;
			border: 1px solid #e9ecef;
		}
		
		.tg-cart-total {
			display: flex;
			align-items: center;
			gap: 10px;
		}
		
		.tg-cart-total-price {
			font-weight: 700;
			font-size: 18px;
			color: #4A6366;
		}
		
		.tg-cart-savings {
			display: flex;
			align-items: center;
			gap: 10px;
			color: #28a745;
		}
		
		.tg-cart-savings-amount {
			font-weight: 600;
		}
		
		.tg-cart-actions {
			display: flex;
			gap: 15px;
		}
		
		.tg-btn {
			flex: 1;
			padding: 12px 20px;
			border: none;
			border-radius: 8px;
			font-weight: 600;
			cursor: pointer;
			transition: all 0.3s ease;
			display: flex;
			align-items: center;
			justify-content: center;
			gap: 8px;
			text-decoration: none;
		}
		
		.tg-btn-primary {
			background: linear-gradient(135deg, #4A6366 0%, #3A4F52 100%);
			color: white;
		}
		
		.tg-btn-primary:hover {
			transform: translateY(-2px);
			box-shadow: 0 6px 20px rgba(74, 99, 102, 0.3);
		}
		
		.tg-btn-secondary {
			background: #6c757d;
			color: white;
		}
		
		.tg-btn-secondary:hover {
			background: #5a6268;
			transform: translateY(-2px);
		}
		
		/* Mobile Responsive for Header */
		@media (max-width: 768px) {
			.tg-main-header .row {
				flex-direction: column;
				gap: 15px;
				height: auto;
			}
			
			.tg-main-header .col-xs-12,
			.tg-main-header .col-sm-12,
			.tg-main-header .col-md-3,
			.tg-main-header .col-md-6,
			.tg-main-header .col-lg-3,
			.tg-main-header .col-lg-6 {
				height: auto;
				padding: 10px 0;
			}
			
			.tg-logo {
				height: auto;
				min-height: 60px;
			}
			
			.tg-search-container {
				margin: 15px 0;
				height: auto;
				min-height: 60px;
			}
			
			.tg-user-actions {
				justify-content: center;
				margin-top: 15px;
				height: auto;
				min-height: 60px;
				flex-wrap: wrap;
				gap: 10px;
			}
			
			.tg-action-item a {
				width: 35px;
				height: 35px;
			}
			
			.tg-user-info {
				padding: 8px 15px;
				min-width: 150px;
			}
			
			.tg-user-avatar {
				width: 30px;
				height: 30px;
			}
			
			#userName {
				font-size: 12px;
				margin: 0 6px;
			}
			
			.tg-nav-container {
				flex-direction: column;
				gap: 15px;
			}
			
			.tg-mobile-toggle {
				display: block !important;
			}
			
			.tg-nav-menu {
				display: none;
				width: 100%;
			}
			
			.tg-nav-menu.active {
				display: block;
			}
			
			.tg-nav-menu ul {
				flex-direction: column;
				gap: 0;
			}
			
			.tg-nav-menu ul li a {
				padding: 15px 20px;
				border-bottom: 1px solid #eee;
			}
			
			.tg-submenu {
				position: static;
				opacity: 1;
				visibility: visible;
				transform: none;
				box-shadow: none;
				border-radius: 0;
				margin-left: 20px;
			}
			
			.tg-cart-btn {
				margin-right: 10px;
			}
			
			.tg-cart-link {
				width: 40px;
				height: 40px;
			}
			
			.tg-cart-link i {
				font-size: 14px;
			}
			
			.tg-cart-badge {
				width: 18px;
				height: 18px;
				font-size: 10px;
			}
			
			.tg-membership-btn {
				text-align: center;
			}
		}
		
		@media (max-width: 480px) {
			.tg-topbar {
				font-size: 11px;
			}
			
			.tg-topbar-left span {
				display: block;
				margin-bottom: 5px;
			}
			
			.tg-logo img {
				max-height: 50px;
			}
		}
		
		/* Navigation Active State Styles */
		.nav-link {
			position: relative;
			overflow: hidden;
		}
		
		.nav-link::before {
			content: '';
			position: absolute;
			bottom: 0;
			left: 50%;
			width: 0;
			height: 3px;
			background: linear-gradient(135deg, #4A6366 0%, #3A4F52 100%);
			transition: all 0.3s ease;
			transform: translateX(-50%);
		}
		
		.nav-link:hover::before {
			width: 80%;
		}
		
		.nav-link.active {
			color: #4A6366 !important;
			font-weight: 600 !important;
		}
		
		.nav-link.active::before {
			width: 80%;
		}
		
		.nav-link.active i {
			color: #4A6366;
		}
		
		/* Submenu Active States */
		.tg-submenu a:hover {
			background: #f8f9fa;
			color: #4A6366;
		}
		
		.tg-submenu a.active {
			background: #4A6366;
			color: white;
		}
		
		/* Hover Effects for Navigation */
		.nav-link:hover {
			color: #4A6366 !important;
			transform: translateY(-2px);
		}
		
		.nav-link:hover i {
			color: #4A6366;
			transform: scale(1.1);
		}
		
		/* Active State Animation */
		@keyframes activePulse {
			0% { transform: scale(1); }
			50% { transform: scale(1.05); }
			100% { transform: scale(1); }
		}
		
		.nav-link.active {
			animation: activePulse 2s ease-in-out infinite;
		}
		
		/* Search Box Styles */
		.tg-search-box {
			position: relative;
			display: flex;
			align-items: center;
			background: #f8f9fa;
			border-radius: 25px;
			border: 2px solid #e9ecef;
			transition: all 0.3s ease;
			overflow: hidden;
		}
		
		.tg-search-box:focus-within {
			border-color: #4A6366;
			box-shadow: 0 0 0 3px rgba(74, 99, 102, 0.1);
			transform: translateY(-2px);
		}
		
		.tg-search-box input:focus {
			outline: none;
		}
		
		.tg-search-box button:hover {
			background: linear-gradient(135deg, #5A7376 0%, #4A5F62 100%);
			transform: scale(1.05);
		}
		
		/* User Actions Styles */
		.tg-action-item a:hover {
			transform: translateY(-3px);
			box-shadow: 0 6px 20px rgba(74, 99, 102, 0.3);
		}
		
		/* User Profile Styles */
		.tg-user-info:hover {
			transform: translateY(-2px);
			box-shadow: 0 6px 20px rgba(74, 99, 102, 0.3);
		}
		
		.tg-user-info:hover .fa-chevron-down {
			transform: rotate(180deg);
		}
		
		/* Navigation Styles */
		.tg-navigationarea {
			background: white;
			border-bottom: 1px solid #e0e0e0;
			box-shadow: 0 2px 8px rgba(0,0,0,0.1);
		}
		
		.tg-nav-menu ul li a {
			display: flex;
			align-items: center;
			padding: 20px 25px;
			color: #333;
			text-decoration: none;
			font-weight: 500;
			transition: all 0.3s ease;
			position: relative;
		}
		
		.tg-nav-menu ul li a:hover {
			color: #4A6366;
			background: rgba(74, 99, 102, 0.05);
		transform: translateY(-2px);
		}
		
		.tg-nav-menu ul li a::after {
		content: '';
		position: absolute;
			bottom: 0;
			left: 50%;
		width: 0;
			height: 3px;
			background: linear-gradient(135deg, #4A6366 0%, #3A4F52 100%);
			transition: all 0.3s ease;
			transform: translateX(-50%);
		}
		
		.tg-nav-menu ul li a:hover::after {
			width: 80%;
		}
		
		/* Submenu Styles */
		.tg-submenu {
			position: absolute;
			top: 100%;
			left: 0;
			background: white;
			min-width: 200px;
			box-shadow: 0 10px 30px rgba(0,0,0,0.15);
			border-radius: 10px;
			opacity: 0;
			visibility: hidden;
			transform: translateY(-10px);
			transition: all 0.3s ease;
			z-index: 1000;
			overflow: hidden;
		}
		
		.tg-nav-menu ul li:hover .tg-submenu {
				opacity: 1;
			visibility: visible;
			transform: translateY(0);
		}
		
		.tg-submenu a {
			display: block;
			padding: 12px 20px;
			color: #333;
			text-decoration: none;
			transition: all 0.3s ease;
			border-left: 3px solid transparent;
		}
		
		.tg-submenu a:hover {
			background: rgba(74, 99, 102, 0.05);
			color: #4A6366;
			border-left-color: #4A6366;
			transform: translateX(5px);
		}
	
	/* Cart Item Styles for Stories */
	.tg-cart-item {
			display: flex;
		align-items: flex-start;
			gap: 15px;
		padding: 15px;
			background: #f8f9fa;
		border-radius: 10px;
		border: 1px solid #e9ecef;
		margin-bottom: 15px;
			transition: all 0.3s ease;
	}
	
	.tg-cart-item:hover {
		box-shadow: 0 4px 15px rgba(0,0,0,0.1);
		transform: translateY(-2px);
	}
	
	.tg-cart-item-image {
		width: 80px;
		height: 100px;
		flex-shrink: 0;
	}
	
	.tg-cart-item-image img {
			width: 100%;
			height: 100%;
		object-fit: cover;
			border-radius: 8px;
		box-shadow: 0 2px 8px rgba(0,0,0,0.1);
	}
	
	.tg-cart-item-details {
		flex: 1;
		min-width: 0;
	}
	
	.tg-cart-item-details h4 {
		margin: 0 0 5px 0;
			font-size: 16px;
			font-weight: 600;
			color: #333;
		line-height: 1.3;
	}
	
	.tg-cart-item-author {
		margin: 0 0 8px 0;
			color: #666;
			font-size: 14px;
		}
		
	.tg-cart-item-info {
			display: flex;
		gap: 10px;
			margin-bottom: 8px;
		flex-wrap: wrap;
	}
	
	.tg-cart-item-category {
		background: #4A6366;
			color: white;
		padding: 2px 6px;
		border-radius: 10px;
			font-size: 10px;
			font-weight: 600;
		}
		
	.tg-cart-item-rating {
		color: #ffd700;
			font-size: 12px;
			font-weight: 600;
	}
	
	.tg-cart-item-type {
		background: #F4A261;
			color: white;
		padding: 2px 6px;
			border-radius: 10px;
		font-size: 10px;
			font-weight: 600;
	}
	
	.tg-cart-item-description {
		margin: 8px 0;
			color: #666;
		font-size: 12px;
		line-height: 1.4;
		font-style: italic;
		}
		
		.tg-cart-item-price {
			display: flex;
			align-items: center;
			gap: 10px;
		margin-bottom: 8px;
		}
		
		.tg-cart-item-current {
			font-weight: 600;
			color: #4A6366;
			font-size: 16px;
		}
		
		.tg-cart-item-original {
			color: #999;
			text-decoration: line-through;
			font-size: 14px;
		}
		
		.tg-cart-item-actions {
			display: flex;
			flex-direction: column;
			align-items: center;
			gap: 10px;
		}
		
		.tg-cart-item-quantity {
			display: flex;
			align-items: center;
			gap: 10px;
			background: white;
			border-radius: 20px;
			padding: 5px;
			border: 1px solid #ddd;
		}
		
		.tg-quantity-btn {
			background: #4A6366;
			color: white;
			border: none;
			width: 25px;
			height: 25px;
			border-radius: 50%;
			cursor: pointer;
			transition: all 0.3s ease;
			display: flex;
			align-items: center;
			justify-content: center;
			font-size: 12px;
		font-weight: bold;
		}
		
		.tg-quantity-btn:hover {
			background: #3A4F52;
			transform: scale(1.1);
		}
		
		.tg-quantity-number {
			font-weight: 600;
			color: #333;
			min-width: 20px;
			text-align: center;
		}
		
		.tg-cart-item-remove {
			background: #dc3545;
			color: white;
			border: none;
			width: 30px;
			height: 30px;
			border-radius: 50%;
			cursor: pointer;
			transition: all 0.3s ease;
			display: flex;
			align-items: center;
			justify-content: center;
		}
		
		.tg-cart-item-remove:hover {
			background: #c82333;
			transform: scale(1.1);
		}
		
	/* Mobile Responsive for Cart */
	@media (max-width: 768px) {
		.tg-cart-item {
			flex-direction: column;
			text-align: center;
			gap: 10px;
		}
		
		.tg-cart-item-image {
			width: 60px;
			height: 80px;
			margin: 0 auto;
		}
		
		.tg-cart-item-actions {
			flex-direction: row;
			justify-content: center;
		}
		
		.tg-cart-item-quantity {
			gap: 8px;
		}
		
		.tg-quantity-btn {
			width: 22px;
			height: 22px;
			font-size: 10px;
		}
		
		.tg-cart-item-info {
				justify-content: center;
		}
		}
	
	</style>
</head>
<body class="tg-home tg-homevtwo">

	<!--************************************
			Wrapper Start
	*************************************-->
	<div id="tg-wrapper" class="tg-wrapper tg-haslayout">
		<!--************************************
				Header Start
		*************************************-->
		<header id="tg-header" class="tg-header tg-headervtwo tg-haslayout">
			<!-- Top Bar -->
			<div class="tg-topbar" style="background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%); color: white; padding: 8px 0; font-size: 12px;">
				<div class="container">
					<div class="row">
						<div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
							<div class="tg-topbar-left" style="display: flex; align-items: center; gap: 20px;">
								<span><i class="fa fa-phone" style="margin-right: 5px;"></i>Hotline: 1900-1234</span>
								<span><i class="fa fa-envelope" style="margin-right: 5px;"></i>info@anbok.com</span>
							</div>
						</div>
						<div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
							<div class="tg-topbar-right" style="display: flex; align-items: center; justify-content: flex-end; gap: 15px;">
								<a href="javascript:void(0);" style="color: white; text-decoration: none; transition: color 0.3s ease;">
									<i class="fa fa-facebook"></i>
								</a>
								<a href="javascript:void(0);" style="color: white; text-decoration: none; transition: color 0.3s ease;">
									<i class="fa fa-twitter"></i>
								</a>
								<a href="javascript:void(0);" style="color: white; text-decoration: none; transition: color 0.3s ease;">
									<i class="fa fa-instagram"></i>
								</a>
								<a href="javascript:void(0);" style="color: white; text-decoration: none; transition: color 0.3s ease;">
									<i class="fa fa-youtube"></i>
								</a>
							</div>
						</div>
					</div>
				</div>
			</div>

			<!-- Main Header -->
			<div class="tg-main-header">
				<div class="container">
					<div class="row">
						<!-- Logo -->
						<div class="col-xs-12 col-sm-12 col-md-3 col-lg-3">
							<div class="tg-logo">
								<a href="index.html">
									<img src="images/logo-Photoroom.png" alt="AnBok Collection">
								</a>
							</div>
						</div>

						<!-- Search Bar -->
						<div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">
							<div class="tg-search-container">
								<div class="tg-search-box">
									<input type="text" placeholder="Tìm kiếm sách, tác giả, thể loại...">
									<button type="submit">
										<i class="fa fa-search"></i>
									</button>
								</div>
								<!-- Search Suggestions -->
								<div class="tg-search-suggestions">
									<div class="tg-suggestion-item">
										<i class="fa fa-book"></i>
										<span>Harry Potter và Hòn đá Phù thủy</span>
									</div>
									<div class="tg-suggestion-item">
										<i class="fa fa-user"></i>
										<span>J.K. Rowling</span>
									</div>
									<div class="tg-suggestion-item">
										<i class="fa fa-tag"></i>
										<span>Tiểu thuyết</span>
									</div>
								</div>
							</div>
						</div>

						<!-- User Actions -->
						<div class="col-xs-12 col-sm-12 col-md-3 col-lg-3">
							<div class="tg-user-actions">
								
								<!-- Auth Buttons (shown when not logged in) -->
								<div class="tg-auth-buttons" style="display: none;">
									<a href="auth.html" style="background: linear-gradient(135deg, #4A6366 0%, #3A4F52 100%); color: white; padding: 8px 20px; border-radius: 25px; text-decoration: none; font-weight: 600; font-size: 14px; transition: all 0.3s ease; display: inline-flex; align-items: center; gap: 8px; box-shadow: 0 4px 15px rgba(74, 99, 102, 0.3);">
										<i class="fa fa-sign-in"></i>
										<span>Đăng nhập</span>
									</a>
								</div>

								<!-- User Profile -->
								<div class="tg-user-profile">
									<div class="tg-user-info" onclick="toggleUserDropdown();">
										<div class="tg-user-avatar">
											<img id="userAvatar" src="https://lh3.googleusercontent.com/a/ACg8ocIaoBrElH5rH6G0XHjVCibEBr75qumVwwDXjMWsl2cipGpdeAE=s96-c" alt="User Avatar">
										</div>
										<span id="userName">Quân Phạm</span>
										<i class="fa fa-chevron-down"></i>
									</div>
									
									<!-- User Dropdown Menu -->
									<div class="tg-user-dropdown" id="userDropdown">
										<div class="tg-dropdown-header">
											<div class="tg-dropdown-avatar">
												<img id="dropdownUserAvatar" src="https://lh3.googleusercontent.com/a/ACg8ocIaoBrElH5rH6G0XHjVCibEBr75qumVwwDXjMWsl2cipGpdeAE=s96-c" alt="User Avatar">
											</div>
											<div id="dropdownUserName">Quân Phạm</div>
											<div id="dropdownUserEmail">phamhongquan9117@gmail.com</div>
										</div>
										<div class="tg-dropdown-menu">
											<a href="profile.html" class="tg-dropdown-item">
												<i class="fa fa-user"></i>
												<span>Hồ sơ cá nhân</span>
											</a>
											<a href="account/bookcase.html?tab=favorites" class="tg-dropdown-item">
												<i class="fa fa-heart"></i>
												<span>Yêu thích</span>
											</a>
											<a href="account/orders/orders-list.html" class="tg-dropdown-item">
												<i class="fa fa-shopping-cart"></i>
												<span>Đơn hàng</span>
											</a>
											<a href="account/setting.html" class="tg-dropdown-item">
												<i class="fa fa-cog"></i>
												<span>Cài đặt</span>
											</a>
											<div class="tg-dropdown-divider"></div>
											<a href="javascript:void(0);" class="tg-dropdown-item tg-dropdown-logout logout-btn">
												<i class="fa fa-sign-out"></i>
												<span>Đăng xuất</span>
											</a>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>

			<!-- Navigation Menu -->
			<div class="tg-navigationarea" style="background: white; border-bottom: 1px solid #e0e0e0; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
				<div class="container">
					<div class="row">
						<div class="col-xs-12">
							<nav class="tg-navigation" style="position: relative;">
								<div class="tg-nav-container" style="display: flex; align-items: center; justify-content: space-between;">
									<!-- Mobile Menu Toggle -->
									<div class="tg-mobile-toggle" style="display: none;">
										<button type="button" style="background: none; border: none; font-size: 20px; color: #333; cursor: pointer;">
											<i class="fa fa-bars"></i>
										</button>
									</div>

									<!-- Main Navigation -->
									<div class="tg-nav-menu" style="display: flex; align-items: center; gap: 0;">
										<ul style="display: flex; align-items: center; list-style: none; margin: 0; padding: 0; gap: 0;">
											<li style="position: relative;">
												<a href="index.html" class="nav-link active" style="display: flex; align-items: center; padding: 20px 25px; color: #333; text-decoration: none; font-weight: 500; transition: all 0.3s ease; position: relative;">
													<i class="fa fa-home" style="margin-right: 8px;"></i>
													Trang chủ
												</a>
											</li>
											<li style="position: relative;">
												<a href="book.html" style="display: flex; align-items: center; padding: 20px 25px; color: #333; text-decoration: none; font-weight: 500; transition: all 0.3s ease; position: relative;">
													<i class="fa fa-book" style="margin-right: 8px;"></i>
													Sách
												</a>
											</li>
											<li style="position: relative;">
												<a href="story.html" style="display: flex; align-items: center; padding: 20px 25px; color: #333; text-decoration: none; font-weight: 500; transition: all 0.3s ease; position: relative;">
													<i class="fa fa-newspaper-o" style="margin-right: 8px;"></i>
													Truyện
												</a>
											</li>
											<li style="position: relative;">
												<a href="javascript:void(0);" style="display: flex; align-items: center; padding: 20px 25px; color: #333; text-decoration: none; font-weight: 500; transition: all 0.3s ease; position: relative;">
													<i class="fa fa-user" style="margin-right: 8px;"></i>
													Tác giả
												</a>
											</li>
											<li style="position: relative;">
												<a href="javascript:void(0);" style="display: flex; align-items: center; padding: 20px 25px; color: #333; text-decoration: none; font-weight: 500; transition: all 0.3s ease; position: relative;">
													<i class="fa fa-newspaper-o" style="margin-right: 8px;"></i>
													Tin tức
												</a>
											</li>
											<li style="position: relative;">
												<a href="javascript:void(0);" style="display: flex; align-items: center; padding: 20px 25px; color: #333; text-decoration: none; font-weight: 500; transition: all 0.3s ease; position: relative;">
													<i class="fa fa-info-circle" style="margin-right: 8px;"></i>
													Về chúng tôi
												</a>
											</li>
											<li style="position: relative;">
												<a href="javascript:void(0);" style="display: flex; align-items: center; padding: 20px 25px; color: #333; text-decoration: none; font-weight: 500; transition: all 0.3s ease; position: relative;">
													<i class="fa fa-envelope" style="margin-right: 8px;"></i>
													Liên hệ
												</a>
											</li>
										</ul>
									</div>

									<!-- Cart Button -->
									<div class="tg-cart-btn">
										<a href="javascript:void(0);" class="tg-cart-link" onclick="toggleCartModal();">
											<i class="fa fa-shopping-cart"></i>
											<span class="tg-cart-badge" id="cart-badge">0</span>
										</a>
									</div>


								</div>
							</nav>
						</div>
					</div>
				</div>
			</div>
		</header>
		
			<!--************************************
					Banner Section End
			*************************************-->
			
			<!--************************************
					Books and Filter Section Start
			*************************************-->
			<section id="books-section" class="tg-sectionspace tg-haslayout" style="padding: 40px 0; background: #f8f9fa;">
				<div class="container">
					<div class="row">
						<!-- Books Column (Left) -->
						<div class="col-xs-12 col-sm-12 col-md-8 col-lg-9">
							<div class="tg-books-container">
								<!-- Books Header -->
								<div class="tg-books-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; padding: 20px; background: white; border-radius: 15px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
									<div class="tg-books-title">
										<h2 style="font-size: 1.8rem; font-weight: 700; color: #333; margin: 0;">
											Thư Viện Truyện	
										</h2>
										<p style="color: #666; margin: 5px 0 0 0; font-size: 0.9rem;">
											Khám phá kho tàng tri thức với hàng nghìn cuốn truyện đa dạng
										</p>
									</div>
									<div class="tg-books-count" style="text-align: right;">
										<span style="font-size: 1.2rem; font-weight: 600; color: #4A6366;" id="books-count">0</span>
										<p style="color: #666; margin: 0; font-size: 0.8rem;">cuốn truyện</p>
									</div>
								</div>
								
								<!-- Books Grid -->
													<div class="row" id="books-container">
						<!-- Books will be loaded dynamically here -->
						<div class="col-12 text-center" style="padding: 50px;">
							<i class="fa fa-spinner fa-spin" style="font-size: 2rem; color: #4A6366;"></i>
							<p style="margin-top: 15px; color: #666;">Đang tải sách...</p>
						</div>
					</div>
					
					<!-- Pagination Container -->
					<div id="pagination-container" style="display: none;">
						<!-- Pagination will be loaded here -->
					</div>
								

							</div>
						</div>
						
						<!-- Filter Column (Right) -->
						<div class="col-xs-12 col-sm-12 col-md-4 col-lg-3">
							<div class="tg-filter-sidebar" style="position: sticky; top: 20px;">
								<!-- Filter Header -->
								<div class="tg-filter-header" style="background: white; padding: 20px; border-radius: 15px 15px 0 0; box-shadow: 0 2px 10px rgba(0,0,0,0.1); border-bottom: 1px solid #e0e0e0;">
									<h3 style="font-size: 1.3rem; font-weight: 700; color: #333; margin: 0; display: flex; align-items: center; gap: 10px;">
										<i class="fa fa-filter" style="color: #4A6366;"></i>
										Bộ Lọc
									</h3>
									<p style="color: #666; margin: 5px 0 0 0; font-size: 0.85rem;">
										Tìm kiếm sách theo tiêu chí
									</p>
								</div>
								
								<!-- Filter Categories -->
								<div class="tg-filter-categories" style="background: white; padding: 20px; border-radius: 0 0 15px 15px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
									<div class="tg-filter-section" style="margin-bottom: 25px;">
										<h4 style="font-size: 1rem; font-weight: 600; color: #333; margin-bottom: 15px; display: flex; align-items: center; gap: 8px;">
											<i class="fa fa-tags" style="color: #F4A261; font-size: 0.9rem;"></i>
											Danh Mục
										</h4>
										<div class="tg-filter-buttons" style="display: flex; flex-direction: column; gap: 8px;">
											<button class="tg-filter-btn active" data-filter="all" style="background: #4A6366; color: white; padding: 10px 15px; border: none; border-radius: 8px; cursor: pointer; transition: all 0.3s ease; text-align: left; font-size: 0.9rem; display: flex; align-items: center; justify-content: space-between;">
												<span>Tất cả</span>
												<span class="category-count" style="background: rgba(255,255,255,0.2); padding: 2px 6px; border-radius: 10px; font-size: 0.75rem;" id="all-count">0</span>
											</button>
											<button class="tg-filter-btn" data-filter="SM001" style="background: #f8f9fa; color: #333; padding: 10px 15px; border: none; border-radius: 8px; cursor: pointer; transition: all 0.3s ease; text-align: left; font-size: 0.9rem; display: flex; align-items: center; justify-content: space-between;">
												<span>Sách mới</span>
												<span class="category-count" style="background: #4A6366; color: white; padding: 2px 6px; border-radius: 10px; font-size: 0.75rem;" id="SM001-count">0</span>
											</button>
											<button class="tg-filter-btn" data-filter="SNB002" style="background: #f8f9fa; color: #333; padding: 10px 15px; border: none; border-radius: 8px; cursor: pointer; transition: all 0.3s ease; text-align: left; font-size: 0.9rem; display: flex; align-items: center; justify-content: space-between;">
												<span>Sách nổi bật</span>
												<span class="category-count" style="background: #4A6366; color: white; padding: 2px 6px; border-radius: 10px; font-size: 0.75rem;" id="SNB002-count">0</span>
											</button>
											<button class="tg-filter-btn" data-filter="free" style="background: #f8f9fa; color: #333; padding: 10px 15px; border: none; border-radius: 8px; cursor: pointer; transition: all 0.3s ease; text-align: left; font-size: 0.9rem; display: flex; align-items: center; justify-content: space-between;">
												<span>Sách miễn phí</span>
												<span class="category-count" style="background: #4A6366; color: white; padding: 2px 6px; border-radius: 10px; font-size: 0.75rem;" id="free-count">0</span>
											</button>
											<button class="tg-filter-btn" data-filter="SHV003" style="background: #f8f9fa; color: #333; padding: 10px 15px; border: none; border-radius: 8px; cursor: pointer; transition: all 0.3s ease; text-align: left; font-size: 0.9rem; display: flex; align-items: center; justify-content: space-between;">
												<span>Sách hội viên</span>
												<span class="category-count" style="background: #4A6366; color: white; padding: 2px 6px; border-radius: 10px; font-size: 0.75rem;" id="SHV003-count">0</span>
											</button>
										</div>
									</div>
									
									<!-- Genre Filter -->
									<div class="tg-filter-section" style="margin-bottom: 25px;">
										<h4 style="font-size: 1rem; font-weight: 600; color: #333; margin-bottom: 15px; display: flex; align-items: center; gap: 8px;">
											<i class="fa fa-tags" style="color: #F4A261; font-size: 0.9rem;"></i>
											Thể Loại
										</h4>
										<div class="tg-genre-filter" id="genreFilter" style="display: flex; flex-direction: column; gap: 8px;">
											<!-- Genres will be loaded dynamically from Firebase -->
											<div class="text-center" style="padding: 20px;">
												<i class="fa fa-spinner fa-spin" style="font-size: 1rem; color: #4A6366;"></i>
												<p style="margin-top: 10px; color: #666; font-size: 0.8rem;">Đang tải thể loại...</p>
											</div>
										</div>
									</div>
									

									
									<!-- Clear Filter Button -->
									<div class="tg-filter-section">
										<button class="tg-clear-filter" style="width: 100%; background: #dc3545; color: white; border: none; padding: 10px; border-radius: 8px; cursor: pointer; font-size: 0.9rem; transition: all 0.3s ease;">
											<i class="fa fa-times" style="margin-right: 8px;"></i>
											Xóa bộ lọc
										</button>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</section>
			<!--************************************
					Books and Filter Section End
			*************************************-->
		</main>
		<!--************************************
				Main End
		*************************************-->
		<!-- Cart Modal -->
		<div id="cartModal" class="tg-cart-modal">
			<div class="tg-cart-modal-overlay" onclick="toggleCartModal();"></div>
			<div class="tg-cart-modal-content">
				<div class="tg-cart-modal-header">
					<h3><i class="fa fa-shopping-cart"></i> Giỏ hàng</h3>
					<button class="tg-cart-modal-close" onclick="toggleCartModal();">
						<i class="fa fa-times"></i>
					</button>
				</div>
				<div class="tg-cart-modal-body">
									<div class="tg-cart-items" id="cart-items-container">
					<!-- Cart items will be loaded dynamically from Firebase -->
					<div class="tg-cart-empty" style="display: block;">
						<i class="fa fa-shopping-cart"></i>
						<h4>Giỏ hàng trống</h4>
						<p>Hãy thêm sản phẩm vào giỏ hàng</p>
					</div>
				</div>
					
					<!-- Empty Cart Message -->
					<div class="tg-cart-empty" style="display: none;">
						<i class="fa fa-shopping-cart"></i>
						<h4>Giỏ hàng trống</h4>
						<p>Hãy thêm sản phẩm vào giỏ hàng</p>
						<button class="tg-btn tg-btn-primary" onclick="toggleCartModal();">Tiếp tục mua sắm</button>
					</div>
				</div>
				<div class="tg-cart-modal-footer">
					<div class="tg-cart-summary">
						<div class="tg-cart-total">
							<span>Tổng cộng:</span>
							<span class="tg-cart-total-price" id="cart-total-price">0₫</span>
						</div>
						<div class="tg-cart-savings">
							<span>Tiết kiệm:</span>
							<span class="tg-cart-savings-amount" id="cart-savings-amount">0₫</span>
						</div>
					</div>
					<div class="tg-cart-actions">
						<button class="tg-btn tg-btn-secondary" onclick="clearCart();">
							<i class="fa fa-trash"></i>
							Xóa giỏ hàng
						</button>
						<button class="tg-btn tg-btn-primary" onclick="checkout();">
							<i class="fa fa-credit-card"></i>
							Thanh toán
						</button>
					</div>
				</div>
			</div>
		</div>

		<!--************************************
				Footer Start
		*************************************-->
		<footer id="tg-footer" class="tg-footer tg-haslayout">
			<div class="tg-footerarea">
				<div class="container">
					<div class="row">
						<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
							                            <ul class="tg-clientservices" style="display: flex; align-items: stretch;">
                                <li class="tg-devlivery" style="display: flex; flex-direction: column; justify-content: center; height: 100%;">
                                    <span class="tg-clientserviceicon"><i class="icon-rocket"></i></span>
                                    <div class="tg-titlesubtitle">
                                        <h3 style="color: white; font-weight: 600;">Giao hàng nhanh</h3>
                                        <p style="color: rgba(255, 255, 255, 0.8);">Giao hàng toàn cầu</p>
                                    </div>
                                </li>
                                <li class="tg-discount" style="display: flex; flex-direction: column; justify-content: center; height: 100%;">
                                    <span class="tg-clientserviceicon"><i class="icon-tag"></i></span>
                                    <div class="tg-titlesubtitle">
                                        <h3 style="color: white; font-weight: 600;">Giảm giá mở</h3>
                                        <p style="color: rgba(255, 255, 255, 0.8);">Ưu đãi giảm giá</p>
                                    </div>
                                </li>
                                <li class="tg-quality" style="display: flex; flex-direction: column; justify-content: center; height: 100%;">
                                    <span class="tg-clientserviceicon"><i class="icon-leaf"></i></span>
                                    <div class="tg-titlesubtitle">
                                        <h3 style="color: white; font-weight: 600;">Chú trọng chất lượng</h3>
                                        <p style="color: rgba(255, 255, 255, 0.8);">Xuất bản tác phẩm chất lượng</p>
                                    </div>
                                </li>
                                <li class="tg-support" style="display: flex; flex-direction: column; justify-content: center; height: 100%;">
                                    <span class="tg-clientserviceicon"><i class="icon-heart"></i></span>
                                    <div class="tg-titlesubtitle">
                                        <h3 style="color: white; font-weight: 600;">Hỗ trợ 24/7</h3>
                                        <p style="color: rgba(255, 255, 255, 0.8);">Phục vụ mọi lúc</p>
                                    </div>
                                </li>
                            </ul>
						</div>
						<div class="tg-threecolumns">
							<div class="col-xs-12 col-sm-6 col-md-4 col-lg-4">
								<div class="tg-footercol">
									
									                                    <ul class="tg-contactinfo">
                                        <li style="color: rgba(255, 255, 255, 0.9);">
                                            <i class="icon-apartment" style="color: #F4A261;"></i>
                                            <address style="color: rgba(255, 255, 255, 0.9);">Phòng 07, Tòa nhà Rose World, Đường số 02, Quận 1, TP.HCM</address>
                                        </li>
                                        <li style="color: rgba(255, 255, 255, 0.9);">
                                            <i class="icon-phone-handset" style="color: #F4A261;"></i>
                                            <span>
                                                <em style="color: rgba(255, 255, 255, 0.9);">1900 1234 - 567 - 89</em>
                                                <em style="color: rgba(255, 255, 255, 0.9);">+84 28 1234 - 5678 - 90</em>
                                            </span>
                                        </li>
                                        <li style="color: rgba(255, 255, 255, 0.9);">
                                            <i class="icon-clock" style="color: #F4A261;"></i>
                                            <span style="color: rgba(255, 255, 255, 0.9);">Phục vụ 7 ngày/tuần từ 8h - 22h</span>
                                        </li>
                                        <li style="color: rgba(255, 255, 255, 0.9);">
                                            <i class="icon-envelope" style="color: #F4A261;"></i>
                                            <span>
                                                <em><a href="mailto:support@thuviensach.vn" style="color: rgba(255, 255, 255, 0.9);">support@thuviensach.vn</a></em>
                                                <em><a href="mailto:info@thuviensach.vn" style="color: rgba(255, 255, 255, 0.9);">info@thuviensach.vn</a></em>
                                            </span>
                                        </li>
                                    </ul>
									<ul class="tg-socialicons">
										<li class="tg-facebook"><a href="javascript:void(0);"><i class="fa fa-facebook"></i></a></li>
										<li class="tg-twitter"><a href="javascript:void(0);"><i class="fa fa-twitter"></i></a></li>
										<li class="tg-linkedin"><a href="javascript:void(0);"><i class="fa fa-linkedin"></i></a></li>
										<li class="tg-googleplus"><a href="javascript:void(0);"><i class="fa fa-google-plus"></i></a></li>
										<li class="tg-rss"><a href="javascript:void(0);"><i class="fa fa-rss"></i></a></li>
									</ul>
								</div>
							</div>
							<div class="col-xs-12 col-sm-6 col-md-4 col-lg-4">
								<div class="tg-footercol tg-widget tg-widgetnavigation">
									                                    <div class="tg-widgettitle">
                                        <h3 style="color: white; font-weight: 600;">Thông tin giao hàng và hỗ trợ</h3>
                                    </div>
                                    <div class="tg-widgetcontent">
                                                                                <ul>
                                            <li><a href="javascript:void(0);" style="color: rgba(255, 255, 255, 0.8);">Điều khoản sử dụng</a></li>
                                            <li><a href="javascript:void(0);" style="color: rgba(255, 255, 255, 0.8);">Điều khoản mua bán</a></li>
                                            <li><a href="javascript:void(0);" style="color: rgba(255, 255, 255, 0.8);">Chính sách đổi trả</a></li>
                                            <li><a href="javascript:void(0);" style="color: rgba(255, 255, 255, 0.8);">Chính sách bảo mật</a></li>
                                            <li><a href="javascript:void(0);" style="color: rgba(255, 255, 255, 0.8);">Chính sách Cookie</a></li>
                                            <li><a href="javascript:void(0);" style="color: rgba(255, 255, 255, 0.8);">Liên hệ chúng tôi</a></li>
                                            <li><a href="javascript:void(0);" style="color: rgba(255, 255, 255, 0.8);">Đối tác của chúng tôi</a></li>
                                            <li><a href="javascript:void(0);" style="color: rgba(255, 255, 255, 0.8);">Tầm nhìn &amp; Mục tiêu</a></li>
                                        </ul>
                                        <ul>
                                            <li><a href="javascript:void(0);" style="color: rgba(255, 255, 255, 0.8);">Câu chuyện của chúng tôi</a></li>
                                            <li><a href="javascript:void(0);" style="color: rgba(255, 255, 255, 0.8);">Gặp gỡ đội ngũ</a></li>
                                            <li><a href="javascript:void(0);" style="color: rgba(255, 255, 255, 0.8);">Câu hỏi thường gặp</a></li>
                                            <li><a href="javascript:void(0);" style="color: rgba(255, 255, 255, 0.8);">Đánh giá khách hàng</a></li>
                                            <li><a href="javascript:void(0);" style="color: rgba(255, 255, 255, 0.8);">Tham gia cùng chúng tôi</a></li>
                                        </ul>
                                    </div>
								</div>
							</div>
							<div class="col-xs-12 col-sm-12 col-md-4 col-lg-4">
								<div class="tg-footercol tg-widget tg-widgettopsellingauthors">
									                                    <div class="tg-widgettitle">
                                        <h3 style="color: white; font-weight: 600;">Tác giả bán chạy nhất</h3>
                                    </div>
                                    <div class="tg-widgetcontent">
                                        <ul>
                                                                                        <li>
                                                <figure><a href="javascript:void(0);"><img src="images/author/imag-09.jpg" alt="image description"></a></figure>
                                                <div class="tg-authornamebooks">
                                                    <h4><a href="javascript:void(0);" style="color: white;">Nguyễn Văn An</a></h4>
                                                    <p style="color: rgba(255, 255, 255, 0.8);">21,658 cuốn sách đã xuất bản</p>
                                                </div>
                                            </li>
                                            <li>
                                                <figure><a href="javascript:void(0);"><img src="images/author/imag-10.jpg" alt="image description"></a></figure>
                                                <div class="tg-authornamebooks">
                                                    <h4><a href="javascript:void(0);" style="color: white;">Trần Thị Bình</a></h4>
                                                    <p style="color: rgba(255, 255, 255, 0.8);">20,257 cuốn sách đã xuất bản</p>
                                                </div>
                                            </li>
                                            <li>
                                                <figure><a href="javascript:void(0);"><img src="images/author/imag-11.jpg" alt="image description"></a></figure>
                                                <div class="tg-authornamebooks">
                                                    <h4><a href="javascript:void(0);" style="color: white;">Lê Văn Cường</a></h4>
                                                    <p style="color: rgba(255, 255, 255, 0.8);">15,686 cuốn sách đã xuất bản</p>
                                                </div>
                                            </li>
                                        </ul>
                                    </div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			
			<div class="tg-footerbar">
				<div class="container">
					<div class="row">
						<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12" style="text-align: center;">
							<span class="tg-copyright" style="color: rgba(255, 255, 255, 0.8);">2017 Bản quyền thuộc về © Thư Viện Sách</span>
						</div>
					</div>
				</div>
			</div>
		</footer>
		<!--************************************
				Footer End
		*************************************-->
	</div>
	<!--************************************
			Wrapper End
	*************************************-->
	
	<!-- Live Chat Widget -->
	<div class="tg-livechat">
		<div class="tg-chat-toggle" id="tg-chat-toggle">
			<i class="fa fa-comments"></i>
			<span class="tg-chat-badge">1</span>
		</div>
		<div class="tg-chat-window" id="tg-chat-window">
			<div class="tg-chat-header">
				<div class="tg-chat-title">
					<i class="fa fa-headphones"></i>
					<span>Hỗ trợ trực tuyến</span>
				</div>
				<div class="tg-chat-actions">
					<button class="tg-chat-minimize" id="tg-chat-minimize">
						<i class="fa fa-minus"></i>
					</button>
					<button class="tg-chat-close" id="tg-chat-close">
						<i class="fa fa-times"></i>
					</button>
				</div>
			</div>
			<div class="tg-chat-body" id="tg-chat-body">
				<div class="tg-chat-messages" id="tg-chat-messages">
					<div class="tg-message tg-message-agent">
						<div class="tg-message-avatar">
							<img src="images/users/img-01.jpg" alt="Hỗ trợ viên">
						</div>
						<div class="tg-message-content">
							<div class="tg-message-text">
								Chào bạn! 👋 Tôi có thể giúp gì cho bạn hôm nay?
							</div>
							<div class="tg-message-time">Bây giờ</div>
						</div>
					</div>
				</div>
				<div class="tg-chat-input">
					<input type="text" id="tg-chat-input" placeholder="Nhập tin nhắn...">
					<button id="tg-chat-send">
						<i class="fa fa-paper-plane"></i>
					</button>
				</div>
			</div>
		</div>
	</div>

	<!-- Reading Progress Bar -->
	<div class="tg-reading-progress">
		<div class="tg-progress-bar" id="tg-progress-bar"></div>
	</div>


	
	<!-- Book Preview Modal -->
	<div class="tg-book-modal" id="tg-book-modal">
		<div class="tg-modal-overlay" id="tg-modal-overlay"></div>
		<div class="tg-modal-content">
			<div class="tg-modal-header">
				<h3>Xem trước sách</h3>
				<button class="tg-modal-close" id="tg-modal-close">
					<i class="fa fa-times"></i>
				</button>
			</div>
			<div class="tg-modal-body">
				<div class="tg-book-preview">
					<div class="tg-book-cover">
						<img src="" alt="Book Cover" id="tg-preview-cover">
					</div>
					<div class="tg-book-info">
						<h4 id="tg-preview-title"></h4>
						<p class="tg-preview-author" id="tg-preview-author"></p>
						<div class="tg-preview-rating">
							<span class="tg-stars" id="tg-preview-stars"></span>
							<span class="tg-rating-text" id="tg-preview-rating-text"></span>
						</div>
						<div class="tg-preview-details">
							<p><strong>Thể loại:</strong> <span id="tg-preview-category"></span></p>
							<p><strong>Số trang:</strong> <span id="tg-preview-pages"></span></p>
							<p><strong>Ngôn ngữ:</strong> <span id="tg-preview-language"></span></p>
							<p><strong>Nhà xuất bản:</strong> <span id="tg-preview-publisher"></span></p>
						</div>
						<div class="tg-preview-description">
							<h5>Mô tả</h5>
							<p id="tg-preview-description"></p>
						</div>
					</div>
				</div>
				<div class="tg-preview-actions">
					<button class="tg-btn tg-btn-preview" id="tg-preview-read">
						<i class="fa fa-book"></i>
						<span>Đọc thử</span>
					</button>
					<button class="tg-btn tg-btn-wishlist" id="tg-preview-wishlist">
						<i class="fa fa-heart"></i>
						
					</button>
					<button class="tg-btn tg-btn-cart" id="tg-preview-cart">
						<i class="fa fa-shopping-cart"></i>
						<span>Thêm vào giỏ</span>
					</button>
				</div>
			</div>
		</div>
	</div>

	<!-- Reading Timer Modal -->
	<div class="tg-timer-modal" id="tg-timer-modal">
		<div class="tg-modal-overlay" id="tg-timer-overlay"></div>
		<div class="tg-modal-content tg-timer-content">
			<div class="tg-modal-header">
				<h3>Đồng hồ đọc sách</h3>
				<button class="tg-modal-close" id="tg-timer-close">
					<i class="fa fa-times"></i>
				</button>
			</div>
			<div class="tg-modal-body">
				<div class="tg-timer-display">
					<div class="tg-timer-time" id="tg-timer-time">00:00:00</div>
					<div class="tg-timer-status" id="tg-timer-status">Sẵn sàng bắt đầu</div>
				</div>
				<div class="tg-timer-controls">
					<button class="tg-btn tg-btn-start" id="tg-timer-start">
						<i class="fa fa-play"></i>
						<span>Bắt đầu</span>
					</button>
					<button class="tg-btn tg-btn-pause" id="tg-timer-pause" style="display: none;">
						<i class="fa fa-pause"></i>
						<span>Tạm dừng</span>
					</button>
					<button class="tg-btn tg-btn-reset" id="tg-timer-reset">
						<i class="fa fa-refresh"></i>
						<span>Đặt lại</span>
					</button>
				</div>
				<div class="tg-timer-settings">
					<h5>Cài đặt thời gian</h5>
					<div class="tg-timer-presets">
						<button class="tg-timer-preset" data-time="1800">30 phút</button>
						<button class="tg-timer-preset" data-time="3600">1 giờ</button>
						<button class="tg-timer-preset" data-time="7200">2 giờ</button>
						<button class="tg-timer-preset" data-time="0">Tùy chỉnh</button>
					</div>
				</div>
			</div>
		</div>
	</div>



	<script src="js/vendor/jquery-library.js"></script>
	<script src="js/vendor/bootstrap.min.js"></script>
	<script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCR-KEWAVCn52mSdeVeTqZjtqbmVJyfSus&amp;language=en&amp;loading=async"></script>
	<script src="js/owl.carousel.min.js"></script>
	<script src="js/jquery.vide.min.js"></script>
	<script src="js/countdown.js"></script>
	<script src="js/jquery-ui.js"></script>
	<script src="js/appear.js"></script>
	<script src="js/countTo.js"></script>
	<script src="js/owl.carousel.min.js"></script>
	<script src="js/gmap3.js"></script>
	<script src="js/parallax.js"></script>
	<script src="js/auth.js"></script>
	<script src="js/sync-auth.js"></script>
	<script src="js/button-fix.js"></script>
	<script src="js/main.js"></script>
	
	<!-- Firebase SDK -->
	<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
	<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>

	<!-- SweetAlert2 JS -->
	<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.all.min.js"></script>
	
	<!-- Firebase SDK -->
	<script type="module">
		// Import the functions you need from the SDKs you need
		import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
		import { getAuth, signInWithEmailAndPassword, createUserWithEmailAndPassword, sendPasswordResetEmail, signInWithPopup, GoogleAuthProvider, updateProfile } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
		import { getDatabase, ref, get, set, child } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";
		import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-analytics.js";

		// Your web app's Firebase configuration
		const firebaseConfig = {
			apiKey: "AIzaSyDYLKQprHcGWDUo4TNOvDzTqTbqUFG4FkA",
			authDomain: "anbok-collection.firebaseapp.com",
			databaseURL: "https://anbok-collection-default-rtdb.asia-southeast1.firebasedatabase.app",
			projectId: "anbok-collection",
			storageBucket: "anbok-collection.firebasestorage.app",
			messagingSenderId: "835844957818",
			appId: "1:835844957818:web:33fc3d03875d49fc5c3dc3",
			measurementId: "G-MS5FT355WW"
		};

		// Initialize Firebase
		const app = initializeApp(firebaseConfig);
		const auth = getAuth(app);
		const database = getDatabase(app);
		const analytics = getAnalytics(app);
		const googleProvider = new GoogleAuthProvider();

		// Make Firebase available globally
		window.firebaseAuth = auth;
		window.firebaseDatabase = database;
		window.firebaseRef = ref;
		window.firebaseGet = get;
		window.firebaseSet = set;
		window.firebaseChild = child;
		window.googleProvider = googleProvider;
		window.signInWithPopup = signInWithPopup;
		window.signInWithEmailAndPassword = signInWithEmailAndPassword;
		window.createUserWithEmailAndPassword = createUserWithEmailAndPassword;
		window.sendPasswordResetEmail = sendPasswordResetEmail;
		window.updateProfile = updateProfile;
		
		// Check Firebase status
		console.log('Firebase initialized:', app);
		console.log('Auth initialized:', auth);
		console.log('Google provider:', googleProvider);
		
		// Dispatch Firebase ready event
		document.dispatchEvent(new CustomEvent('firebase-ready', {
			detail: { auth, googleProvider }
		}));
		
		// Listen for auth state changes
		auth.onAuthStateChanged((user) => {
			if (user) {
				console.log('User is signed in:', user);
				// Update user info in localStorage
				const userData = {
					isLoggedIn: true,
					uid: user.uid,
					email: user.email,
					displayName: user.displayName || user.email,
					photoURL: user.photoURL,
					lastLogin: new Date().toISOString()
				};
				localStorage.setItem('user', JSON.stringify(userData));
				console.log('User data saved to localStorage:', userData);
				
				// Update UI
				if (window.checkAuthStatus) {
					window.checkAuthStatus();
				}
				
				// Reload books to show member-only books if user has membership
				if (window.loadAllBooksAndUpdateCounts) {
					setTimeout(() => {
						window.loadAllBooksAndUpdateCounts();
					}, 1000);
				}
			} else {
				console.log('User is signed out');
				// Clear user data from localStorage
				localStorage.removeItem('user');
				console.log('User data removed from localStorage');
				
				// Update UI
				if (window.checkAuthStatus) {
					window.checkAuthStatus();
				}
				
				// Reload books to hide member-only books for logged out users
				if (window.loadAllBooksAndUpdateCounts) {
					setTimeout(() => {
						window.loadAllBooksAndUpdateCounts();
					}, 1000);
				}
			}
		});
	</script>
	
	<!-- Auth Modal JavaScript -->
	<script>
					// Auth Modal Functions
			function showAuthModal(modalId) {
				document.getElementById(modalId).style.display = 'block';
				document.body.style.overflow = 'hidden';
			}
			
			function closeAuthModal(modalId) {
				document.getElementById(modalId).style.display = 'none';
				document.body.style.overflow = 'auto';
			}
			
			// Form submission handlers - chỉ giữ lại thông báo thành công
			$('#loginForm').on('submit', function(e) {
				e.preventDefault();
				setTimeout(() => {
					showNotification('Đăng nhập thành công!', 'success');
					closeAuthModal('loginModal');
				}, 1500);
			});
			
			$('#registerForm').on('submit', function(e) {
				e.preventDefault();
				setTimeout(() => {
					showNotification('Đăng ký thành công!', 'success');
					closeAuthModal('registerModal');
				}, 1500);
			});
			
			$('#forgotPasswordForm').on('submit', function(e) {
				e.preventDefault();
				setTimeout(() => {
					showNotification('Email đã được gửi! Vui lòng kiểm tra hộp thư.', 'success');
					closeAuthModal('forgotPasswordModal');
				}, 1500);
			});
			
			function loginWithGoogle() {
				setTimeout(() => {
					showNotification('Đăng nhập bằng Google thành công!', 'success');
					closeAuthModal('loginModal');
				}, 2000);
			}
		
		// Close modal when clicking outside
		window.onclick = function(event) {
			const modals = document.querySelectorAll('.auth-modal');
			modals.forEach(modal => {
				if (event.target === modal) {
					modal.style.display = 'none';
					document.body.style.overflow = 'auto';
				}
			});
		}
		
		// Login Form Handler
		const loginForm = document.getElementById('loginForm');
		if (loginForm) {
			loginForm.addEventListener('submit', function(e) {
				e.preventDefault();
				const email = document.getElementById('loginEmail')?.value;
				const password = document.getElementById('loginPassword')?.value;
				
				// Add your login logic here
				console.log('Login attempt:', { email, password });
				
				// Simulate login success
				showSuccessAlert('Đăng nhập thành công!');
				closeAuthModal('loginModal');
			});
		}
		
		// Register Form Handler
		const registerForm = document.getElementById('registerForm');
		if (registerForm) {
			registerForm.addEventListener('submit', function(e) {
				e.preventDefault();
				const name = document.getElementById('registerName')?.value;
				const email = document.getElementById('registerEmail')?.value;
				const password = document.getElementById('registerPassword')?.value;
				const confirmPassword = document.getElementById('confirmPassword')?.value;
				
				if (password !== confirmPassword) {
					showErrorAlert('Mật khẩu xác nhận không khớp!');
					return;
				}
				
				// Add your registration logic here
				console.log('Register attempt:', { name, email, password });
				
				// Simulate registration success
				showSuccessAlert('Đăng ký thành công!');
				closeAuthModal('registerModal');
			});
		}
		
		// Forgot Password Form Handler
		const forgotPasswordForm = document.getElementById('forgotPasswordForm');
		if (forgotPasswordForm) {
			forgotPasswordForm.addEventListener('submit', function(e) {
				e.preventDefault();
				const email = document.getElementById('forgotEmail')?.value;
				
				// Add your forgot password logic here
				console.log('Forgot password attempt:', { email });
				
				// Simulate success
				showSuccessAlert('Email đặt lại mật khẩu đã được gửi!');
				closeAuthModal('forgotPasswordModal');
			});
		}
		
		// Google Login Function
		function loginWithGoogle() {
			// Add your Google login logic here
			console.log('Google login attempt');
			Swal.fire({
				title: 'Thông báo',
				text: 'Chức năng đăng nhập Google sẽ được tích hợp sau!',
				icon: 'info',
				confirmButtonColor: '#4A6366'
			});
		}
		
		// Utility function for SweetAlert2 notifications
		function showSweetAlert(title, text, icon = 'info', timer = null) {
			const options = {
				title: title,
				text: text,
				icon: icon,
				confirmButtonColor: '#4A6366'
			};
			
			if (timer) {
				options.timer = timer;
				options.showConfirmButton = false;
			}
			
			Swal.fire(options);
		}
		
		// Success notification
		function showSuccessAlert(message, timer = 2000) {
			showSweetAlert('Thành công!', message, 'success', timer);
		}
		
		// Error notification
		function showErrorAlert(message) {
			showSweetAlert('Lỗi!', message, 'error');
		}
		
		// Info notification
		function showInfoAlert(message) {
			showSweetAlert('Thông báo', message, 'info');
		}
		
		// Warning notification
		function showWarningAlert(message) {
			showSweetAlert('Cảnh báo', message, 'warning');
		}
		
		// Loading notification
		function showLoadingAlert(title = 'Đang xử lý...', text = 'Vui lòng chờ trong giây lát') {
			Swal.fire({
				title: title,
				text: text,
				allowOutsideClick: false,
				allowEscapeKey: false,
				showConfirmButton: false,
				didOpen: () => {
					Swal.showLoading();
				}
			});
		}
		
		// Close loading
		function closeLoadingAlert() {
			Swal.close();
		}
		


	</script>
	<script src="js/countTo.js"></script>
	<script src="js/appear.js"></script>
	<script src="js/gmap3.js"></script>
	<script src="js/main.js"></script>
	<script>
		// Enhanced User Dropdown Functionality
		$(document).ready(function() {
			// Search dropdown functionality
			$('#tg-search').on('click', function(e) {
				e.preventDefault();
				$(this).next('.tg-searchdropdownmenu').toggleClass('show');
			});
			
			// Close search dropdown when clicking outside
			$(document).on('click', function(e) {
				if (!$(e.target).closest('.tg-searchdropdown').length) {
					$('.tg-searchdropdownmenu').removeClass('show');
				}
			});
			

			
			// Simple menu item interactions
			$('.tg-menu-item').on('mouseenter', function() {
				$(this).find('i').addClass('fa-bounce');
			}).on('mouseleave', function() {
				$(this).find('i').removeClass('fa-bounce');
			});
			
			// Become member button for guest users
			$('.tg-become-member').on('click', function(e) {
				e.preventDefault();
				e.stopPropagation();
				showSuccessAlert('Đang chuyển hướng đến trang đăng ký hội viên...');
			});
			
			// Login functionality for guest users
			$('.tg-menu-item').on('click', function(e) {
				e.preventDefault();
				e.stopPropagation();
				
				const action = $(this).find('span').text();
				
				if (action === 'Đăng nhập') {
					showNotification('Chuyển hướng đến trang đăng nhập...', 'info');
					// Simulate login process
					setTimeout(() => {
						$('.tg-user-info h4').text('Quân Phạm');
						$('.tg-user-status').text('Hội viên Bạc');
						$('.tg-points span').text('1,250');
						$('.tg-become-member span').text('Nâng cấp VIP');
						$('.tg-become-member i').removeClass('fa-user-plus').addClass('fa-crown');
						
						// Update menu items for logged in user
						$('.tg-user-menu').html(`
							<a href="javascript:void(0);" class="tg-menu-item">
								<i class="fa fa-user"></i>
								<span>Quản lý tài khoản</span>
								<i class="fa fa-chevron-right tg-menu-arrow"></i>
							</a>
							<a href="javascript:void(0);" class="tg-menu-item">
								<i class="fa fa-book"></i>
								<span>Tủ sách cá nhân</span>
								<span class="tg-menu-badge">12</span>
							</a>
							<a href="javascript:void(0);" class="tg-menu-item">
								<i class="fa fa-shopping-cart"></i>
								<span>Quản lý đơn hàng</span>
								<i class="fa fa-chevron-right tg-menu-arrow"></i>
							</a>
							<a href="javascript:void(0);" class="tg-menu-item">
								<i class="fa fa-trophy"></i>
								<span>Thứ hạng đọc sách</span>
								<span class="tg-menu-badge tg-badge-gold">#15</span>
							</a>
							<a href="javascript:void(0);" class="tg-menu-item">
								<i class="fa fa-headphones"></i>
								<span>Hỗ trợ khách hàng</span>
								<i class="fa fa-chevron-right tg-menu-arrow"></i>
							</a>
							
							<div class="tg-menu-divider"></div>
							
							<a href="javascript:void(0);" class="tg-menu-item tg-logout">
								<i class="fa fa-sign-out"></i>
								<span>Đăng xuất</span>
								<i class="fa fa-chevron-right tg-menu-arrow"></i>
							</a>
						`);
						
						// Re-bind logout functionality
						$('.tg-logout').on('click', function(e) {
							e.preventDefault();
							e.stopPropagation();
							
							if (confirm('Bạn có chắc chắn muốn đăng xuất?')) {
								showNotification('Đăng xuất thành công!', 'success');
								$('#user-dropdown').removeClass('show');
								
								// Reset to guest state
								setTimeout(() => {
									$('.tg-user-info h4').text('Khách');
									$('.tg-user-status').text('Chưa đăng nhập');
									$('.tg-points span').text('0');
									$('.tg-become-member span').text('Đăng ký hội viên');
									$('.tg-become-member i').removeClass('fa-crown').addClass('fa-user-plus');
									
									// Reset menu items for guest
									$('.tg-user-menu').html(`
										<a href="javascript:void(0);" class="tg-menu-item">
											<i class="fa fa-sign-in"></i>
											<span>Đăng nhập</span>
											<i class="fa fa-chevron-right tg-menu-arrow"></i>
										</a>
										<a href="javascript:void(0);" class="tg-menu-item">
											<i class="fa fa-user-plus"></i>
											<span>Đăng ký</span>
											<i class="fa fa-chevron-right tg-menu-arrow"></i>
										</a>
										<a href="javascript:void(0);" class="tg-menu-item">
											<i class="fa fa-book"></i>
											<span>Khám phá sách</span>
											<i class="fa fa-chevron-right tg-menu-arrow"></i>
										</a>
										<a href="javascript:void(0);" class="tg-menu-item">
											<i class="fa fa-headphones"></i>
											<span>Hỗ trợ khách hàng</span>
											<i class="fa fa-chevron-right tg-menu-arrow"></i>
										</a>
										
										<div class="tg-menu-divider"></div>
										
										<a href="javascript:void(0);" class="tg-menu-item">
											<i class="fa fa-info-circle"></i>
											<span>Về chúng tôi</span>
											<i class="fa fa-chevron-right tg-menu-arrow"></i>
										</a>
									`);
								}, 1000);
							}
						});
					}, 1000);
				}
			});
			
			// Menu item click handlers for guest users
			$(document).on('click', '.tg-menu-item', function(e) {
				e.preventDefault();
				e.stopPropagation();
				
				const action = $(this).find('span').text();
				
				// Handle different menu actions for guest users
				switch(action) {
					case 'Đăng ký':
						showNotification('Chuyển hướng đến trang đăng ký...', 'info');
						break;
					case 'Khám phá sách':
						showNotification('Chuyển hướng đến trang sách...', 'info');
						break;
					case 'Hỗ trợ khách hàng':
						showNotification('Chuyển hướng đến trang hỗ trợ...', 'info');
						break;
					case 'Về chúng tôi':
						showNotification('Chuyển hướng đến trang giới thiệu...', 'info');
						break;
				}
			});
			
			// Notification system
			function showNotification(message, type = 'info') {
				const notification = $(`
					<div class="tg-notification tg-notification-${type}">
						<div class="tg-notification-content">
							<i class="fa fa-${type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-circle' : 'info-circle'}"></i>
							<span>${message}</span>
						</div>
					</div>
				`);
				
				$('body').append(notification);
				
				// Animate in
				setTimeout(() => {
					notification.addClass('show');
				}, 100);
				
				// Auto remove after 3 seconds
				setTimeout(() => {
					notification.removeClass('show');
					setTimeout(() => {
						notification.remove();
					}, 300);
				}, 3000);
			}
			
			// Simple notification styles
			$('<style>')
				.prop('type', 'text/css')
				.html(`
					.tg-notification {
						position: fixed;
						top: 20px;
						right: 20px;
						background: white;
						border-radius: 8px;
						box-shadow: 0 5px 20px rgba(0, 0, 0, 0.15);
						padding: 12px 16px;
						transform: translateX(100%);
						transition: transform 0.3s ease;
						z-index: 10000;
						border-left: 3px solid #4A6366;
						font-size: 13px;
					}
					
					.tg-notification.show {
						transform: translateX(0);
					}
					
					.tg-notification-content {
						display: flex;
						align-items: center;
						gap: 8px;
					}
					
					.tg-notification-success {
						border-left-color: #28a745;
					}
					
					.tg-notification-error {
						border-left-color: #dc3545;
					}
					
					.tg-notification-info {
						border-left-color: #17a2b8;
					}
				`)
				.appendTo('head');
				
			// Live Chat Functionality
			$('#tg-chat-toggle').on('click', function() {
				$('#tg-chat-window').toggleClass('active');
				$('.tg-chat-badge').hide();
				
				// Ensure chat input is visible and focused when chat window is active
				if ($('#tg-chat-window').hasClass('active')) {
					setTimeout(() => {
						$('#tg-chat-input').focus();
						$('#tg-chat-body').scrollTop($('#tg-chat-body')[0].scrollHeight);
					}, 100);
				}
			});
			
			$('#tg-chat-minimize').on('click', function() {
				$('#tg-chat-window').removeClass('active');
			});
			
			$('#tg-chat-close').on('click', function() {
				$('#tg-chat-window').removeClass('active');
			});
			
			// Chat input functionality
			$('#tg-chat-send').on('click', sendMessage);
			$('#tg-chat-input').on('keypress', function(e) {
				if (e.which === 13) {
					sendMessage();
				}
			});
			
			function sendMessage() {
				const input = $('#tg-chat-input');
				const message = input.val().trim();
				
				if (message) {
					addMessage(message, 'user');
					input.val('');
					
					// Simulate agent response
					setTimeout(() => {
						const responses = [
							'Cảm ơn bạn đã liên hệ! Tôi sẽ kiểm tra và phản hồi sớm nhất.',
							'Thông tin của bạn đã được ghi nhận. Chúng tôi sẽ xử lý trong 24h.',
							'Bạn có thể cho tôi biết thêm chi tiết không?',
							'Tôi hiểu vấn đề của bạn. Hãy để tôi kiểm tra và hỗ trợ.'
						];
						const randomResponse = responses[Math.floor(Math.random() * responses.length)];
						addMessage(randomResponse, 'agent');
					}, 1000);
				}
			}
			
			function addMessage(text, sender) {
				const messageHtml = `
					<div class="tg-message tg-message-${sender}">
						${sender === 'agent' ? '<div class="tg-message-avatar"><img src="images/users/img-01.jpg" alt="Hỗ trợ viên"></div>' : ''}
						<div class="tg-message-content">
							<div class="tg-message-text">${text}</div>
							<div class="tg-message-time">Bây giờ</div>
						</div>
					</div>
				`;
				$('#tg-chat-messages').append(messageHtml);
				
				// Ensure chat input remains visible and scroll to bottom
				setTimeout(() => {
					$('#tg-chat-body').scrollTop($('#tg-chat-body')[0].scrollHeight);
					$('#tg-chat-input').focus();
				}, 50);
			}
			
			// Reading Progress Bar
			$(window).on('scroll', function() {
				const scrollTop = $(window).scrollTop();
				const docHeight = $(document).height() - $(window).height();
				const scrollPercent = (scrollTop / docHeight) * 100;
				$('#tg-progress-bar').css('width', scrollPercent + '%');
			});
			
			// Back to Top Button
			$(window).on('scroll', function() {
				const scrollTop = $(window).scrollTop();
				const threshold = 300;
				
				if (scrollTop > threshold) {
					$('#tg-back-to-top').addClass('active');
				} else {
					$('#tg-back-to-top').removeClass('active');
				}
			});
			
			$('#tg-back-to-top').on('click', function() {
				// Add click feedback
				$(this).addClass('clicked');
				setTimeout(() => {
					$(this).removeClass('clicked');
				}, 150);
				
				$('html, body').animate({
					scrollTop: 0
				}, {
					duration: 800,
					easing: 'easeInOutCubic'
				});
			});
			
			// Quick Actions Menu
			$('#tg-quick-toggle').on('click', function() {
				$('.tg-quick-menu').toggleClass('active');
				$(this).find('i').toggleClass('fa-plus fa-times');
			});
			
			$('.tg-quick-item').on('click', function() {
				const action = $(this).data('action');
				handleQuickAction(action);
			});
			
			function handleQuickAction(action) {
				switch(action) {
					case 'search':
						$('#tg-search').click();
						break;
					case 'wishlist':
						showNotification('Chuyển đến trang yêu thích...', 'info');
						break;
					case 'cart':
						$('#tg-minicart').click();
						break;
					case 'support':
						$('#tg-chat-toggle').click();
						break;
					case 'timer':
						$('#tg-timer-modal').addClass('active');
						break;
				}
			}
			
			// Book Preview Modal Functionality
			$('.tg-postbook').on('click', function() {
				const bookTitle = $(this).find('.tg-booktitle h3 a').text();
				const bookAuthor = $(this).find('.tg-bookwriter a').text();
				const bookImage = $(this).find('.tg-frontcover img').attr('src');
				
				$('#tg-preview-title').text(bookTitle);
				$('#tg-preview-author').text(bookAuthor);
				$('#tg-preview-cover').attr('src', bookImage);
				
				$('#tg-book-modal').addClass('active');
			});
			
			$('#tg-modal-close, #tg-modal-overlay').on('click', function() {
				$('#tg-book-modal').removeClass('active');
			});
			
			$('#tg-preview-read').on('click', function() {
				showNotification('Mở trang đọc thử...', 'info');
				$('#tg-book-modal').removeClass('active');
			});
			
			$('#tg-preview-wishlist').on('click', function() {
				showNotification('Đã thêm vào danh sách yêu thích!', 'success');
			});
			
			$('#tg-preview-cart').on('click', function() {
				showNotification('Đã thêm vào giỏ hàng!', 'success');
			});
			// Chỉ giữ lại thông báo cho các hành động quan trọng
			// Các thông báo không cần thiết đã được loại bỏ
			
			// Reading Timer Functionality
			let timerInterval;
			let timerSeconds = 0;
			let timerRunning = false;
			
			$('#tg-timer-close, #tg-timer-overlay').on('click', function() {
				$('#tg-timer-modal').removeClass('active');
			});
			
			$('#tg-timer-start').on('click', function() {
				if (!timerRunning) {
					timerRunning = true;
					$(this).hide();
					$('#tg-timer-pause').show();
					$('#tg-timer-status').text('Đang đọc...');
					
					timerInterval = setInterval(function() {
						timerSeconds++;
						updateTimerDisplay();
					}, 1000);
				}
			});
			
			$('#tg-timer-pause').on('click', function() {
				if (timerRunning) {
					timerRunning = false;
					clearInterval(timerInterval);
					$(this).hide();
					$('#tg-timer-start').show();
					$('#tg-timer-status').text('Đã tạm dừng');
				}
			});
			
			$('#tg-timer-reset').on('click', function() {
				timerRunning = false;
				clearInterval(timerInterval);
				timerSeconds = 0;
				updateTimerDisplay();
				$('#tg-timer-pause').hide();
				$('#tg-timer-start').show();
				$('#tg-timer-status').text('Sẵn sàng bắt đầu');
			});
			
			$('.tg-timer-preset').on('click', function() {
				const time = parseInt($(this).data('time'));
				if (time > 0) {
					timerSeconds = time;
					updateTimerDisplay();
					$('.tg-timer-preset').removeClass('active');
					$(this).addClass('active');
				}
			});
			
			function updateTimerDisplay() {
				const hours = Math.floor(timerSeconds / 3600);
				const minutes = Math.floor((timerSeconds % 3600) / 60);
				const seconds = timerSeconds % 60;
				
				const timeString = 
					(hours < 10 ? '0' : '') + hours + ':' +
					(minutes < 10 ? '0' : '') + minutes + ':' +
					(seconds < 10 ? '0' : '') + seconds;
				
				$('#tg-timer-time').text(timeString);
			}
			
			// Notification System Functions
			function showNotification(message, type = 'info') {
				// Tạo element thông báo
				const notification = document.createElement('div');
				notification.className = `tg-notification tg-notification-${type}`;
				
				// Icon tương ứng với loại thông báo
				let icon = 'fa-info-circle';
				if (type === 'success') icon = 'fa-check-circle';
				else if (type === 'error') icon = 'fa-exclamation-circle';
				
				// Nội dung thông báo
				notification.innerHTML = `
					<div class="tg-notification-content">
						<i class="fa ${icon}"></i>
						<span>${message}</span>
					</div>
				`;
				
				// Thêm vào body
				document.body.appendChild(notification);
				
				// Hiển thị với animation
				setTimeout(() => {
					notification.classList.add('show');
				}, 100);
				
				// Tự động ẩn sau 3 giây
				setTimeout(() => {
					notification.classList.remove('show');
					setTimeout(() => {
						document.body.removeChild(notification);
					}, 300);
				}, 3000);
			}
			
			// Các thông báo tiếng Việt không yêu cầu xác nhận
			function showVietnameseNotifications() {
				// Chỉ hiển thị thông báo chào mừng khi cần thiết
				// Các thông báo khác đã được loại bỏ để tránh spam
			}
			
			// Khởi tạo thông báo khi trang load
			$(document).ready(function() {
				showVietnameseNotifications();
			});
			
			// Universal Modal Functions
			let universalModalCallback = null;
			
			function showUniversalModal(config) {
				const modal = document.getElementById('universalModal');
				const title = document.getElementById('universalModalTitle');
				const icon = document.getElementById('universalModalIcon');
				const heading = document.getElementById('universalModalHeading');
				const description = document.getElementById('universalModalDescription');
				const infoBox = document.getElementById('universalModalInfoBox');
				const infoText = document.getElementById('universalModalInfoText');
				const cancelBtn = document.getElementById('universalModalCancelBtn');
				const confirmBtn = document.getElementById('universalModalConfirmBtn');
				
				// Set title
				title.textContent = config.title || 'Xác nhận';
				
				// Set icon
				icon.className = `fas ${config.icon || 'fa-question-circle'} tg-universal-icon`;
				if (config.iconColor) {
					icon.style.color = config.iconColor;
				}
				
				// Set heading
				heading.textContent = config.heading || 'Bạn có chắc chắn?';
				
				// Set description
				description.textContent = config.description || 'Mô tả chi tiết về hành động này sẽ được hiển thị ở đây.';
				
				// Set info box (optional)
				if (config.infoText) {
					infoText.textContent = config.infoText;
					infoBox.style.display = 'block';
				} else {
					infoBox.style.display = 'none';
				}
				
				// Set button texts
				cancelBtn.textContent = config.cancelText || 'Hủy bỏ';
				confirmBtn.textContent = config.confirmText || 'Xác nhận';
				
				// Set button styles
				cancelBtn.className = `tg-universal-btn tg-universal-btn-${config.cancelStyle || 'cancel'}`;
				confirmBtn.className = `tg-universal-btn tg-universal-btn-${config.confirmStyle || 'danger'}`;
				
				// Store callback
				universalModalCallback = config.onConfirm;
				
				// Show modal
				modal.style.display = 'block';
				document.body.style.overflow = 'hidden';
			}
			
			function closeUniversalModal() {
				const modal = document.getElementById('universalModal');
				modal.style.display = 'none';
				document.body.style.overflow = 'auto';
				universalModalCallback = null;
			}
			
			function confirmUniversalAction() {
				if (universalModalCallback) {
					universalModalCallback();
				}
				closeUniversalModal();
			}
			
			// Close universal modal when clicking outside
			window.addEventListener('click', function(event) {
				const modal = document.getElementById('universalModal');
				if (event.target === modal) {
					closeUniversalModal();
				}
			});
			
			// Example usage functions
			function showLogoutAllSessionsModal() {
				showUniversalModal({
					title: 'Xác nhận đăng xuất tất cả thiết bị',
					icon: 'fa-sign-out-alt',
					iconColor: '#e74c3c',
					heading: 'Bạn có chắc chắn muốn đăng xuất tất cả các thiết bị?',
					description: 'Bạn sẽ cần đăng nhập lại trên tất cả thiết bị để tiếp tục sử dụng tài khoản.',
					infoText: 'Tất cả các phiên đăng nhập trên mọi thiết bị sẽ bị đăng xuất ngay lập tức.',
					confirmText: 'Đăng xuất tất cả',
					confirmStyle: 'danger',
					onConfirm: function() {
						// Add your logout all sessions logic here
						console.log('Logging out all sessions...');
						alert('Đã đăng xuất tất cả thiết bị!');
					}
				});
			}
			
			function showDeleteAccountModal() {
				showUniversalModal({
					title: 'Xác nhận xóa tài khoản',
					icon: 'fa-user-times',
					iconColor: '#e74c3c',
					heading: 'Bạn có chắc chắn muốn xóa tài khoản?',
					description: 'Hành động này không thể hoàn tác. Tất cả dữ liệu sẽ bị mất vĩnh viễn.',
					infoText: 'Tài khoản và tất cả dữ liệu liên quan sẽ bị xóa hoàn toàn.',
					confirmText: 'Xóa tài khoản',
					confirmStyle: 'danger',
					onConfirm: function() {
						// Add your delete account logic here
						console.log('Deleting account...');
						alert('Tài khoản đã được xóa!');
					}
				});
			}
			
			function showSuccessModal() {
				showUniversalModal({
					title: 'Thành công',
					icon: 'fa-check-circle',
					iconColor: '#27ae60',
					heading: 'Thao tác đã được thực hiện thành công!',
					description: 'Dữ liệu đã được cập nhật và lưu trữ.',
					confirmText: 'Đóng',
					confirmStyle: 'success',
					onConfirm: function() {
						// Just close the modal
					}
				});
			}
			
			// Add CSS animation for fade out effect
			const style = document.createElement('style');
			style.textContent = `
				@keyframes fadeOut {
					from { opacity: 1; transform: translateX(0); }
					to { opacity: 0; transform: translateX(-20px); }
				}
				
				.qty-btn:hover {
					background: #e9ecef !important;
				}
				
				.qty-btn:active {
					transform: scale(0.95);
				}
				
				.remove-item:hover {
					color: #dc3545 !important;
				}
				
				/* Cart footer button styles */
				.tg-minicartfoot .tg-btn {
					transition: all 0.3s ease !important;
				}
				
				.tg-minicartfoot .tg-btn:hover {
					transform: translateY(-2px) !important;
					box-shadow: 0 4px 12px rgba(0,0,0,0.15) !important;
				}
				
				.tg-minicartfoot .tg-btn.tg-active:hover {
					background: #3a4f52 !important;
					border-color: #3a4f52 !important;
				}
				
				.tg-minicartfoot .tg-btn:not(.tg-active):hover {
					background: #218838 !important;
					border-color: #218838 !important;
				}
				
				.tg-btnemptycart:hover {
					background: rgba(220, 53, 69, 0.1) !important;
				}
				
				/* Prevent dropdown from closing when clicking inside */
				.tg-themedropdownmenu {
					pointer-events: auto;
				}
				
				.tg-themedropdownmenu * {
					pointer-events: auto;
				}
				
				/* Ensure dropdown container has relative positioning */
				.tg-minicartdropdown {
					position: relative !important;
				}
				
				/* Force dropdown to stay in fixed position */
				.tg-themedropdownmenu {
					position: absolute !important;
					top: 100% !important;
					right: 0 !important;
					left: auto !important;
					transform: none !important;
					margin-top: 5px !important;
					z-index: 1000 !important;
					width: 350px !important;
				}
				
				/* Stabilize cart layout */
				.tg-minicartbody {
					position: relative;
					overflow: hidden;
				}
				
				.tg-minicarproduct {
					transition: all 0.3s ease;
					transform-origin: top;
				}
				
				/* Prevent layout shift */
				.quantity-controls {
					position: relative;
					z-index: 1;
				}
				
				.qty-btn {
					transition: all 0.2s ease;
					user-select: none;
				}
				
				/* Smooth animations */
				@keyframes slideIn {
					from { opacity: 0; transform: translateY(-10px); }
					to { opacity: 1; transform: translateY(0); }
				}
				
				@keyframes slideOut {
					from { opacity: 1; transform: translateY(0); }
					to { opacity: 0; transform: translateY(-10px); }
				}
				
				/* Ensure dropdown doesn't overflow screen */
				@media (max-width: 768px) {
					.tg-themedropdownmenu {
						right: 0 !important;
						left: auto !important;
						width: 320px !important;
					}
				}
				
				/* Override any Bootstrap or other CSS that might move the dropdown */
				.tg-themedropdownmenu.show,
				.tg-themedropdownmenu.dropdown-menu {
					position: absolute !important;
					top: 100% !important;
					right: 0 !important;
					left: auto !important;
					transform: none !important;
					margin-top: 5px !important;
					z-index: 1000 !important;
					width: 350px !important;
				}
			`;
			document.head.appendChild(style);
		});
	</script>
	
	<!-- Mini Cart JavaScript Functions -->
	<script>
		// Global cart items - will be loaded from Firebase
		let cartItems = {};
		
		function updateQuantity(itemId, change, event) {
			if (!cartItems[itemId]) return;
			
			const currentQty = cartItems[itemId].quantity || 0;
			const newQty = currentQty + change;
			
			if (newQty >= 1) {
				cartItems[itemId].quantity = newQty;
				updateCartDisplay();
				saveCartToFirebase();
				
				// Prevent dropdown from closing
				if (event) {
					event.stopPropagation();
				}
			} else if (newQty === 0) {
				// Remove item if quantity reaches 0
				removeCartItem(itemId, event);
			}
		}
		
		function removeCartItem(itemId, event) {
			if (cartItems[itemId]) {
				delete cartItems[itemId];
				updateCartDisplay();
				saveCartToFirebase();
			}
			
			// Prevent dropdown from closing
			if (event) {
				event.stopPropagation();
			}
		}
		
		function clearCart() {
			// Check if universal modal exists
			if (typeof showUniversalModal === 'function') {
				showUniversalModal({
					title: 'Xác nhận xóa giỏ hàng',
					icon: 'fa-trash-o',
					iconColor: '#dc3545',
					heading: 'Bạn có chắc chắn muốn xóa toàn bộ giỏ hàng?',
					description: 'Tất cả sản phẩm trong giỏ hàng sẽ bị xóa.',
					confirmText: 'Xóa giỏ hàng',
					confirmStyle: 'danger',
					onConfirm: function() {
						cartItems = {};
						updateCartDisplay();
						saveCartToFirebase();
					}
				});
			} else {
				// Fallback if modal is not available
				if (confirm('Bạn có chắc chắn muốn xóa toàn bộ giỏ hàng?')) {
					cartItems = {};
					updateCartDisplay();
					saveCartToFirebase();
				}
			}
		}
		
		function updateCartTotal() {
			// This function is now handled by updateCartDisplay()
			updateCartDisplay();
		}
		
		function calculateTotal() {
			let total = 0;
			for (let itemId in cartItems) {
				total += (cartItems[itemId].quantity || 0) * (cartItems[itemId].price || 0);
			}
			return total;
		}
		
		function formatPrice(price) {
			return price.toLocaleString('vi-VN') + '₫';
		}
		
		function showEmptyCart() {
			// This function is now handled by updateCartDisplay()
			updateCartDisplay();
		}
		
		// Prevent dropdown from closing when clicking inside
		document.addEventListener('DOMContentLoaded', function() {
			const dropdownMenu = document.querySelector('.tg-themedropdownmenu');
			if (dropdownMenu) {
				dropdownMenu.addEventListener('click', function(e) {
					e.stopPropagation();
				});
			}
			
			// Prevent quantity buttons from closing dropdown
			document.addEventListener('click', function(e) {
				if (e.target.classList.contains('qty-btn') || e.target.classList.contains('remove-item')) {
					e.stopPropagation();
				}
			});
			
			// Force dropdown to stay in fixed position
			const cartButton = document.querySelector('[aria-labelledby="tg-minicart"]');
			if (cartButton) {
				cartButton.addEventListener('click', function(e) {
					const dropdown = document.querySelector('.tg-themedropdownmenu');
					if (dropdown) {
						// Force dropdown to stay in position
						dropdown.style.position = 'absolute';
						dropdown.style.top = '100%';
						dropdown.style.right = '0';
						dropdown.style.left = 'auto';
						dropdown.style.transform = 'none';
						dropdown.style.marginTop = '5px';
						dropdown.style.zIndex = '1000';
						dropdown.style.width = '350px';
					}
				});
			}
			
			// Prevent any CSS from moving the dropdown
			const observer = new MutationObserver(function(mutations) {
				mutations.forEach(function(mutation) {
					if (mutation.type === 'attributes' && mutation.attributeName === 'style') {
						const dropdown = document.querySelector('.tg-themedropdownmenu');
						if (dropdown && dropdown.style.display !== 'none') {
							// Force position back if changed
							dropdown.style.position = 'absolute';
							dropdown.style.top = '100%';
							dropdown.style.right = '0';
							dropdown.style.left = 'auto';
							dropdown.style.transform = 'none';
						}
					}
				});
			});
			
			// Start observing the dropdown
			const dropdown = document.querySelector('.tg-themedropdownmenu');
			if (dropdown) {
				observer.observe(dropdown, { attributes: true, attributeFilter: ['style'] });
			}
		});
		
		// Hàm chuyển hướng đến trang profile
		function goToProfile() {
			window.location.href = 'account/profile.html';
		}
		
		// Hàm chuyển hướng đến trang đơn hàng
		function goToOrders() {
			window.location.href = 'account/orders-list.html';
		}
		
		// Hàm chuyển hướng đến trang cài đặt
		function goToSettings() {
			window.location.href = 'account/setting.html';
		}
		
		// Hàm chuyển hướng đến trang yêu thích
		function goToFavorites() {
			window.location.href = 'account/bookcase.html?tab=favorites';
		}
	</script>
	<script>
		// Header JavaScript Functions
		document.addEventListener('DOMContentLoaded', function() {
			// Toggle User Dropdown
			window.toggleUserDropdown = function() {
				const dropdown = document.getElementById('userDropdown');
				const chevron = document.querySelector('.tg-user-info .fa-chevron-down');
				
				if (dropdown.style.display === 'block') {
					dropdown.style.display = 'none';
					chevron.style.transform = 'rotate(0deg)';
				} else {
					dropdown.style.display = 'block';
					chevron.style.transform = 'rotate(180deg)';
				}
			};
			
			// Close dropdown when clicking outside
			document.addEventListener('click', function(event) {
				const userProfile = document.querySelector('.tg-user-profile');
				const dropdown = document.getElementById('userDropdown');
				
				if (!userProfile.contains(event.target)) {
					dropdown.style.display = 'none';
					document.querySelector('.tg-user-info .fa-chevron-down').style.transform = 'rotate(0deg)';
				}
			});
			
			// Search Functionality
			const searchInput = document.querySelector('.tg-search-box input');
			const searchSuggestions = document.querySelector('.tg-search-suggestions');
			
			if (searchInput) {
				searchInput.addEventListener('focus', function() {
					searchSuggestions.style.display = 'block';
				});
				
				searchInput.addEventListener('blur', function() {
					setTimeout(() => {
						searchSuggestions.style.display = 'none';
					}, 200);
				});
				
				searchInput.addEventListener('input', function() {
					const query = this.value.toLowerCase();
					const suggestions = searchSuggestions.querySelectorAll('.tg-suggestion-item');
					
					suggestions.forEach(item => {
						const text = item.textContent.toLowerCase();
						if (text.includes(query)) {
							item.style.display = 'block';
						} else {
							item.style.display = 'none';
						}
					});
				});
			}
			
			// Mobile Menu Toggle
			const mobileToggle = document.querySelector('.tg-mobile-toggle button');
			const navMenu = document.querySelector('.tg-nav-menu');
			
			if (mobileToggle) {
				mobileToggle.addEventListener('click', function() {
					navMenu.classList.toggle('active');
					const icon = this.querySelector('i');
					if (navMenu.classList.contains('active')) {
						icon.className = 'fa fa-times';
					} else {
						icon.className = 'fa fa-bars';
					}
				});
			}
			
			// Smooth scrolling for navigation links
			document.querySelectorAll('a[href^="#"]').forEach(anchor => {
				anchor.addEventListener('click', function (e) {
					e.preventDefault();
					const target = document.querySelector(this.getAttribute('href'));
					if (target) {
						target.scrollIntoView({
							behavior: 'smooth',
							block: 'start'
						});
					}
				});
			});
			
			// Header scroll effect
			let lastScrollTop = 0;
			const header = document.querySelector('.tg-header');
			
			window.addEventListener('scroll', function() {
				const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
				
				if (scrollTop > lastScrollTop && scrollTop > 100) {
					// Scrolling down
					header.style.transform = 'translateY(-100%)';
				} else {
					// Scrolling up
					header.style.transform = 'translateY(0)';
				}
				
				lastScrollTop = scrollTop;
			});
			
			// Add loading animation to header
			setTimeout(() => {
				header.style.opacity = '1';
				header.style.transform = 'translateY(0)';
			}, 100);
		});
		
		// Logout function
		function logout() {
			Swal.fire({
				title: 'Xác nhận đăng xuất',
				text: 'Bạn có chắc chắn muốn đăng xuất?',
				icon: 'question',
				showCancelButton: true,
				confirmButtonColor: '#4A6366',
				cancelButtonColor: '#d33',
				confirmButtonText: 'Đăng xuất',
				cancelButtonText: 'Hủy',
				reverseButtons: true
			}).then((result) => {
				if (result.isConfirmed) {
					// Show loading
					Swal.fire({
						title: 'Đang đăng xuất...',
						text: 'Vui lòng chờ trong giây lát',
						allowOutsideClick: false,
						allowEscapeKey: false,
						showConfirmButton: false,
						didOpen: () => {
							Swal.showLoading();
						}
					});
					
					// Firebase logout
					if (window.firebaseAuth) {
						window.firebaseAuth.signOut().then(() => {
							console.log('User signed out successfully');
							// Clear user data from localStorage
							localStorage.removeItem('user');
							// Update UI
							if (window.checkAuthStatus) {
								window.checkAuthStatus();
							}
							// Show success notification
							Swal.fire({
								title: 'Thành công!',
								text: 'Đăng xuất thành công',
								icon: 'success',
								timer: 2000,
								showConfirmButton: false
							});
						}).catch((error) => {
							console.error('Error signing out:', error);
							// Fallback: clear localStorage and update UI
							localStorage.removeItem('user');
							if (window.checkAuthStatus) {
								window.checkAuthStatus();
							}
							// Show success notification even if Firebase fails
							Swal.fire({
								title: 'Thành công!',
								text: 'Đăng xuất thành công',
								icon: 'success',
								timer: 2000,
								showConfirmButton: false
							});
						});
					} else {
						// Fallback if Firebase is not available
						localStorage.removeItem('user');
						if (window.checkAuthStatus) {
							window.checkAuthStatus();
						}
						// Show success notification
						Swal.fire({
							title: 'Thành công!',
							text: 'Đăng xuất thành công',
							icon: 'success',
							timer: 2000,
							showConfirmButton: false
						});
					}
				}
			});
		}
		
		// Search suggestions click handler
		document.addEventListener('click', function(event) {
			if (event.target.closest('.tg-suggestion-item')) {
				const text = event.target.closest('.tg-suggestion-item').textContent;
				document.querySelector('.tg-search-box input').value = text;
				document.querySelector('.tg-search-suggestions').style.display = 'none';
			}
		});
		
		// Add hover effects for social media links
		document.querySelectorAll('.tg-topbar-right a').forEach(link => {
			link.addEventListener('mouseenter', function() {
				this.style.transform = 'scale(1.2)';
			});
			
			link.addEventListener('mouseleave', function() {
				this.style.transform = 'scale(1)';
			});
		});
		
		// Add notification system
		function showNotification(message, type = 'info') {
			const notification = document.createElement('div');
			notification.className = `tg-notification tg-notification-${type}`;
			notification.innerHTML = `
				<div class="tg-notification-content">
					<i class="fa fa-${type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-circle' : 'info-circle'}"></i>
					<span>${message}</span>
				</div>
			`;
			
			document.body.appendChild(notification);
			
			setTimeout(() => {
				notification.classList.add('show');
			}, 100);
			
			setTimeout(() => {
				notification.classList.remove('show');
				setTimeout(() => {
					document.body.removeChild(notification);
				}, 300);
			}, 3000);
		}
		
		// Example usage of notification
		// showNotification('Đăng nhập thành công!', 'success');
		// showNotification('Có lỗi xảy ra!', 'error');
		// showNotification('Thông tin cập nhật!', 'info');
		
		// Cart Modal Functions
		window.toggleCartModal = function() {
			const modal = document.getElementById('cartModal');
			if (modal.classList.contains('active')) {
				modal.classList.remove('active');
			} else {
				modal.classList.add('active');
			}
		};
		
		window.updateQuantity = function(itemId, change) {
			const quantityElement = document.querySelector(`[onclick="updateQuantity(${itemId}, ${change})"]`).parentNode.querySelector('.tg-quantity-number');
			let currentQuantity = parseInt(quantityElement.textContent);
			let newQuantity = currentQuantity + change;
			
			if (newQuantity >= 1) {
				quantityElement.textContent = newQuantity;
				updateCartTotal();
			} else if (newQuantity === 0) {
				removeCartItem(itemId);
			}
		};
		
		window.removeCartItem = function(itemId) {
			const cartItem = document.querySelector(`[onclick="removeCartItem(${itemId})"]`).closest('.tg-cart-item');
			cartItem.style.animation = 'slideOut 0.3s ease';
			setTimeout(() => {
				cartItem.remove();
				updateCartTotal();
				checkEmptyCart();
			}, 300);
		};
		
		window.clearCart = function() {
			const cartItems = document.querySelectorAll('.tg-cart-item');
			cartItems.forEach(item => {
				item.style.animation = 'slideOut 0.3s ease';
			});
			setTimeout(() => {
				document.querySelector('.tg-cart-items').innerHTML = '';
				updateCartTotal();
				checkEmptyCart();
			}, 300);
		};
		
		window.checkout = function() {
			showNotification('Chuyển đến trang thanh toán...', 'info');
			setTimeout(() => {
				toggleCartModal();
			}, 1500);
		};
		
		function updateCartTotal() {
			const items = document.querySelectorAll('.tg-cart-item');
			let total = 0;
			let savings = 0;
			
			items.forEach(item => {
				const quantity = parseInt(item.querySelector('.tg-quantity-number').textContent);
				const currentPrice = parseInt(item.querySelector('.tg-cart-item-current').textContent.replace(/[^\d]/g, ''));
				const originalPrice = parseInt(item.querySelector('.tg-cart-item-original').textContent.replace(/[^\d]/g, ''));
				
				total += currentPrice * quantity;
				savings += (originalPrice - currentPrice) * quantity;
			});
			
			document.querySelector('.tg-cart-total-price').textContent = total.toLocaleString() + '₫';
			document.querySelector('.tg-cart-savings-amount').textContent = savings.toLocaleString() + '₫';
			
			// Update cart badge
			const totalItems = Array.from(items).reduce((sum, item) => {
				return sum + parseInt(item.querySelector('.tg-quantity-number').textContent);
			}, 0);
			
			document.querySelector('.tg-cart-badge').textContent = totalItems;
		}
		
		function checkEmptyCart() {
			const cartItems = document.querySelectorAll('.tg-cart-item');
			const cartItemsContainer = document.querySelector('.tg-cart-items');
			const emptyCart = document.querySelector('.tg-cart-empty');
			
			if (cartItems.length === 0) {
				cartItemsContainer.style.display = 'none';
				emptyCart.style.display = 'block';
				document.querySelector('.tg-cart-modal-footer').style.display = 'none';
			} else {
				cartItemsContainer.style.display = 'flex';
				emptyCart.style.display = 'none';
				document.querySelector('.tg-cart-modal-footer').style.display = 'block';
			}
		}
		
		// Close modal when clicking outside
		document.addEventListener('click', function(event) {
			const modal = document.getElementById('cartModal');
			if (event.target === modal) {
				toggleCartModal();
			}
		});
		
		// Close modal with Escape key
		document.addEventListener('keydown', function(event) {
			if (event.key === 'Escape') {
				const modal = document.getElementById('cartModal');
				if (modal.classList.contains('active')) {
					toggleCartModal();
				}
			}
		});
		
		// Navigation Active State Management
		document.addEventListener('DOMContentLoaded', function() {
			// Get current page URL
			const currentPage = window.location.pathname.split('/').pop() || 'index.html';
			
			// Find all navigation links
			const navLinks = document.querySelectorAll('.nav-link');
			
			// Remove active class from all links
			navLinks.forEach(link => {
				link.classList.remove('active');
			});
			
			// Add active class to current page link
			navLinks.forEach(link => {
				const href = link.getAttribute('href');
				if (href === currentPage || (currentPage === 'index.html' && href === 'index.html')) {
					link.classList.add('active');
				}
			});
			
			// Handle submenu hover effects
			const menuItems = document.querySelectorAll('.tg-nav-menu li');
			
			menuItems.forEach(item => {
				const link = item.querySelector('a');
				const submenu = item.querySelector('.tg-submenu');
				
				if (submenu) {
					item.addEventListener('mouseenter', function() {
						submenu.style.opacity = '1';
						submenu.style.visibility = 'visible';
						submenu.style.transform = 'translateY(0)';
					});
					
					item.addEventListener('mouseleave', function() {
						submenu.style.opacity = '0';
						submenu.style.visibility = 'hidden';
						submenu.style.transform = 'translateY(-10px)';
					});
				}
			});
			
			// Handle submenu item clicks
			const submenuLinks = document.querySelectorAll('.tg-submenu a');
			submenuLinks.forEach(link => {
				link.addEventListener('click', function(e) {
					e.preventDefault();
					
					// Remove active class from all submenu links
					submenuLinks.forEach(subLink => {
						subLink.classList.remove('active');
					});
					
					// Add active class to clicked link
					this.classList.add('active');
					
					// Update parent menu item
					const parentLink = this.closest('li').querySelector('.nav-link');
					if (parentLink) {
						parentLink.classList.add('active');
					}
				});
			});
		});
		
		// Mobile menu toggle functionality
		document.addEventListener('DOMContentLoaded', function() {
			const mobileToggle = document.querySelector('.tg-mobile-toggle');
			const navMenu = document.querySelector('.tg-nav-menu');
			
			if (mobileToggle && navMenu) {
				mobileToggle.addEventListener('click', function() {
					navMenu.classList.toggle('active');
					
					// Toggle icon
					const icon = this.querySelector('i');
					if (icon) {
						if (navMenu.classList.contains('active')) {
							icon.className = 'fa fa-times';
						} else {
							icon.className = 'fa fa-bars';
						}
					}
				});
			}
		});
		
		
		// Book Page Specific JavaScript
		document.addEventListener('DOMContentLoaded', function() {
			// Get books container
			const booksContainer = document.getElementById('books-container');
			
			// Filter functionality
			const filterButtons = document.querySelectorAll('.tg-filter-btn');
			
			filterButtons.forEach(button => {
				button.addEventListener('click', function() {
					// Remove active class from all buttons
					filterButtons.forEach(btn => {
						btn.classList.remove('active');
						btn.style.background = '#f8f9fa';
						btn.style.color = '#333';
					});
					
					// Add active class to clicked button
					this.classList.add('active');
					this.style.background = '#4A6366';
					this.style.color = 'white';
					
					// Get filter value
					const filter = this.getAttribute('data-filter');
					
					// Apply filter (this would typically load from Firebase)
					applyBookFilter(filter);
				});
			});
			
			// Price range filter
			const priceRangeInputs = document.querySelectorAll('.tg-price-range input');
			const applyPriceButton = document.querySelector('.tg-price-range button');
			
			if (applyPriceButton) {
				applyPriceButton.addEventListener('click', function() {
					const minPrice = priceRangeInputs[0].value;
					const maxPrice = priceRangeInputs[1].value;
					applyPriceFilter(minPrice, maxPrice);
				});
			}
			
			// Rating filter
			const ratingCheckboxes = document.querySelectorAll('.tg-rating-filter input[type="checkbox"]');
			ratingCheckboxes.forEach(checkbox => {
				checkbox.addEventListener('change', function() {
					applyRatingFilter();
				});
			});
			
			// Genre filter
			const genreCheckboxes = document.querySelectorAll('.tg-genre-filter input[type="checkbox"]');
			genreCheckboxes.forEach(checkbox => {
				checkbox.addEventListener('change', function() {
					applyGenreFilter();
				});
			});
			
			// Clear filter button
			const clearFilterButton = document.querySelector('.tg-clear-filter');
			if (clearFilterButton) {
				clearFilterButton.addEventListener('click', function() {
					clearAllFilters();
				});
			}
			
			// Book card hover effects
			const bookCards = document.querySelectorAll('.tg-book-card');
			bookCards.forEach(card => {
				card.addEventListener('mouseenter', function() {
					const overlay = this.querySelector('.tg-book-overlay');
					if (overlay) {
						overlay.style.opacity = '1';
					}
				});
				
				card.addEventListener('mouseleave', function() {
					const overlay = this.querySelector('.tg-book-overlay');
					if (overlay) {
						overlay.style.opacity = '0';
					}
				});
			});
			
			// Add to cart functionality
			const addToCartButtons = document.querySelectorAll('.tg-add-to-cart');
			addToCartButtons.forEach(button => {
				button.addEventListener('click', function(e) {
					e.preventDefault();
					
					// Get book information
					const bookCard = this.closest('.tg-book-card');
					const bookTitle = bookCard.querySelector('.tg-book-title a').textContent;
					const bookAuthor = bookCard.querySelector('.tg-book-author').textContent;
					const bookPrice = bookCard.querySelector('.tg-book-price span').textContent;
					const bookImage = bookCard.querySelector('.tg-book-image img').src;
					
					// Add to cart (this would typically update Firebase)
					addBookToCart({
						title: bookTitle,
						author: bookAuthor,
						price: bookPrice,
						image: bookImage,
						quantity: 1
					});
					
					// Show success message
					showNotification('Sách đã được thêm vào giỏ hàng!', 'success');
				});
			});
			
			// Load more books functionality
			const loadMoreButton = document.querySelector('.tg-load-more');
			if (loadMoreButton) {
				loadMoreButton.addEventListener('click', function() {
					loadMoreBooks();
				});
			}
			
					// Load initial books and update category counts
			loadAllBooksAndUpdateCounts();
		
		// Load cart from Firebase
		loadCartFromFirebase();
			
			// Test Firebase connection
			testFirebaseConnection();
			
			// Check user membership status on page load
			async function checkMembershipOnLoad() {
				try {
					const userMembership = await checkUserMembership();
					console.log('User membership status:', userMembership);
					
					// Update UI based on membership status
					if (userMembership.hasMembership) {
						console.log('User has active membership:', userMembership.membershipType);
						hideMembershipNotice();
					} else {
						console.log('User does not have membership');
						// Don't show notice immediately, wait for book loading
					}
				} catch (error) {
					console.error('Error checking membership on load:', error);
				}
			}
			
			// Check membership when page loads
			checkMembershipOnLoad();
		});
		
		// Function to test Firebase connection
		function testFirebaseConnection() {
			console.log('Testing Firebase connection...');
			console.log('Firebase Database:', window.firebaseDatabase);
			console.log('Firebase Ref:', window.firebaseRef);
			console.log('Firebase Get:', window.firebaseGet);
			
			if (window.firebaseDatabase && window.firebaseRef && window.firebaseGet) {
				console.log('Firebase SDK is available');
				
				// Test getting books
				getStoriesFromFirebase()
					.then(books => {
						console.log('Successfully loaded books from Firebase:', books);
						console.log('Number of books:', books.length);
						
						// Show test result in UI
						const testResult = document.createElement('div');
						testResult.style.cssText = 'position: fixed; top: 20px; right: 20px; background: #28a745; color: white; padding: 10px; border-radius: 5px; z-index: 9999;';
						testResult.textContent = `Firebase OK: ${books.length} books loaded`;
						document.body.appendChild(testResult);
						
						setTimeout(() => {
							document.body.removeChild(testResult);
						}, 3000);
					})
					.catch(error => {
						console.error('Error testing Firebase connection:', error);
						
						// Show error in UI
						const testResult = document.createElement('div');
						testResult.style.cssText = 'position: fixed; top: 20px; right: 20px; background: #dc3545; color: white; padding: 10px; border-radius: 5px; z-index: 9999;';
						testResult.textContent = 'Firebase Error: ' + error.message;
						document.body.appendChild(testResult);
						
						setTimeout(() => {
							document.body.removeChild(testResult);
						}, 3000);
					});
			} else {
				console.error('Firebase SDK is not available');
				
				// Show error in UI
				const testResult = document.createElement('div');
				testResult.style.cssText = 'position: fixed; top: 20px; right: 20px; background: #dc3545; color: white; padding: 10px; border-radius: 5px; z-index: 9999;';
				testResult.textContent = 'Firebase SDK not available';
				document.body.appendChild(testResult);
				
				setTimeout(() => {
					document.body.removeChild(testResult);
				}, 3000);
			}
		}
		
		// Function to apply book filter
		function applyBookFilter(filter) {
			console.log('Applying filter:', filter);
			
			const booksContainer = document.getElementById('books-container');
			if (!booksContainer) {
				console.error('Books container not found');
				return;
			}
			
			// Show loading state
			booksContainer.innerHTML = '<div class="col-12 text-center"><i class="fa fa-spinner fa-spin" style="font-size: 2rem; color: #4A6366;"></i><p>Đang tải sách...</p></div>';
			
			// Load books based on filter
			loadBooksByFilter(filter);
		}
		


		// Function to load books by filter
		async function loadBooksByFilter(filter) {
			const booksContainer = document.getElementById('books-container');
			if (!booksContainer) {
				console.error('Books container not found');
				return;
			}
			
			// Show loading state
			booksContainer.innerHTML = '<div class="col-12 text-center"><i class="fa fa-spinner fa-spin" style="font-size: 2rem; color: #4A6366;"></i><p>Đang tải sách...</p></div>';
			
			try {
				// Get books from Firebase
				const books = await getBooksByFilter(filter);
				
				// Use pagination display
				displayBooksFromFirebase(books);
				
				// Update books count
				updateBooksCount(books.length);
				

			} catch (error) {
				console.error('Error loading books:', error);
				booksContainer.innerHTML = '<div class="col-12 text-center"><p style="color: #dc3545;">Có lỗi xảy ra khi tải sách. Vui lòng thử lại!</p></div>';
			}
		}
		
		// Function to load all books and update category counts
		async function loadAllBooksAndUpdateCounts() {
			const booksContainer = document.getElementById('books-container');
			if (!booksContainer) {
				console.error('Books container not found');
				return;
			}
			
			// Show loading state
			booksContainer.innerHTML = '<div class="col-12 text-center"><i class="fa fa-spinner fa-spin" style="font-size: 2rem; color: #4A6366;"></i><p>Đang tải sách...</p></div>';
			
			try {
				// Get all stories from Firebase
				const stories = await getStoriesFromFirebase();
				
				// Build dynamic category filter based on actual story data
				await buildDynamicCategoryFilter();
				
				// Load genres from Firebase or extract from stories data
				try {
					const genresSnapshot = await firebase.database().ref('StoryGenres').once('value');
					const genresData = genresSnapshot.val();
					loadGenresFromFirebase(genresData, stories);
					console.log('Successfully loaded genres from StoryGenres');
				} catch (genresError) {
					console.warn('Cannot access StoryGenres, extracting from stories data:', genresError);
					showNotification('Đang tải thể loại từ dữ liệu truyện...', 'info');
					loadGenresFromStories(stories);
				}
				
				// Update category counts
				updateCategoryCounts(stories);
				
				// Use pagination display with all stories (buttons will be handled dynamically)
				displayStoriesFromFirebase(stories);
				
				// Update stories count
				updateBooksCount(stories.length);
				

			} catch (error) {
				console.error('Error loading stories:', error);
				booksContainer.innerHTML = '<div class="col-12 text-center"><p style="color: #dc3545;">Có lỗi xảy ra khi tải truyện. Vui lòng thử lại!</p></div>';
			}
		}
		
		// Function to build dynamic category filter based on actual story data
		async function buildDynamicCategoryFilter() {
			try {
				const stories = await getStoriesFromFirebase();
				const categoryMap = {};

				// Group stories by category
				stories.forEach(story => {
					if (!categoryMap[story.category_code]) {
						categoryMap[story.category_code] = {
							name: story.category_name,
							count: 0
						};
					}
					categoryMap[story.category_code].count += 1;
				});

				// Find the category filter container
				const filterContainer = document.querySelector('.tg-filter-buttons');
				if (!filterContainer) {
					console.warn('Category filter container not found');
					return;
				}

				// Build filter HTML
				let filterHTML = `
					<button class="tg-filter-btn active" data-filter="all" style="background: #4A6366; color: white; padding: 10px 15px; border: none; border-radius: 8px; cursor: pointer; transition: all 0.3s ease; text-align: left; font-size: 0.9rem; display: flex; align-items: center; justify-content: space-between;">
						<span>Tất cả</span>
						<span class="category-count" style="background: rgba(255,255,255,0.2); padding: 2px 6px; border-radius: 10px; font-size: 0.75rem;">${stories.length}</span>
					</button>
				`;

				// Add category buttons
				Object.entries(categoryMap).forEach(([code, cat]) => {
					filterHTML += `
						<button class="tg-filter-btn" data-filter="${code}" style="background: #f8f9fa; color: #333; padding: 10px 15px; border: none; border-radius: 8px; cursor: pointer; transition: all 0.3s ease; text-align: left; font-size: 0.9rem; display: flex; align-items: center; justify-content: space-between;">
							<span>${cat.name}</span>
							<span class="category-count" style="background: #4A6366; color: white; padding: 2px 6px; border-radius: 10px; font-size: 0.75rem;">${cat.count}</span>
						</button>
					`;
				});

				// Update the filter container
				filterContainer.innerHTML = filterHTML;

				// Add click event listeners
				filterContainer.querySelectorAll('.tg-filter-btn').forEach(btn => {
					btn.addEventListener('click', function() {
						// Remove active class from all buttons
						filterContainer.querySelectorAll('.tg-filter-btn').forEach(b => {
							b.style.background = '#f8f9fa';
							b.style.color = '#333';
						});

						// Add active class to clicked button
						this.style.background = '#4A6366';
						this.style.color = 'white';

						const filterValue = this.getAttribute('data-filter');
						console.log('Filtering by category:', filterValue);

						// Show loading state
						const booksContainer = document.getElementById('books-container');
						if (booksContainer) {
							booksContainer.innerHTML = '<div class="col-12 text-center"><i class="fa fa-spinner fa-spin" style="font-size: 2rem; color: #4A6366;"></i><p>Đang lọc truyện...</p></div>';
						}

						// Apply filter
						getStoriesByFilter(filterValue).then(filteredStories => {
							displayStoriesFromFirebase(filteredStories);
							updateBooksCount(filteredStories.length);
							showNotification(`Đã lọc được ${filteredStories.length} truyện`, 'success');
						}).catch(error => {
							console.error('Error filtering stories:', error);
							showNotification('Lỗi khi lọc truyện', 'error');
						});
					});
				});

				console.log('Dynamic category filter built successfully');
				showNotification('Bộ lọc danh mục đã được cập nhật', 'success');

			} catch (error) {
				console.error('Error building dynamic category filter:', error);
				showNotification('Lỗi khi tạo bộ lọc danh mục', 'error');
			}
		}
		
		// Function to create story card
		function createStoryCard(story) {
			const col = document.createElement('div');
			col.className = 'col-xs-12 col-sm-6 col-md-4 col-lg-3';
			col.style.marginBottom = '25px';
			
			// Format price
			const formatPrice = (price) => {
				return new Intl.NumberFormat('vi-VN', {
					style: 'currency',
					currency: 'VND'
				}).format(price);
			};
			
			// Get category badge color
			const getCategoryBadgeColor = (categoryCode) => {
				switch(categoryCode) {
					case 'TM001': return '#28a745'; // New Stories - Green
					case 'TNB002': return '#F4A261'; // Featured Stories - Orange
					case 'THV004': return '#dc3545'; // Member Stories - Red
					default: return '#6c757d'; // Default - Gray
				}
			};
			
			// Get price display
			const priceDisplay = story.is_free ? 'Miễn phí' : formatPrice(story.price);
			const originalPriceDisplay = story.original_price > 0 ? formatPrice(story.original_price) : '';
			
			// Get status badges
			let statusBadges = '';
			if (story.is_featured) {
				statusBadges += '<div style="position: absolute; top: 10px; right: 10px; background: #ffd700; color: #333; padding: 4px 8px; border-radius: 12px; font-size: 10px; font-weight: 600;">NỔI BẬT</div>';
			}
			if (story.is_free) {
				statusBadges += '<div style="position: absolute; top: 10px; left: 10px; background: #28a745; color: white; padding: 4px 8px; border-radius: 12px; font-size: 10px; font-weight: 600;">MIỄN PHÍ</div>';
			} else if (story.is_member_only) {
				statusBadges += '<div style="position: absolute; top: 10px; left: 10px; background: #dc3545; color: white; padding: 4px 8px; border-radius: 12px; font-size: 10px; font-weight: 600;">HỘI VIÊN</div>';
			}
			
			col.innerHTML = `
				<div class="tg-story-card" style="background: white; border-radius: 15px; overflow: hidden; box-shadow: 0 5px 20px rgba(0,0,0,0.1); transition: all 0.3s ease; height: 100%;">
					<div class="tg-story-image" style="position: relative; overflow: hidden;">
						<img src="${story.cover_image}" alt="${story.title}" style="width: 100%; height: 200px; object-fit: cover;">
						<div class="tg-story-overlay" style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.7); display: flex; align-items: center; justify-content: center; opacity: 0; transition: all 0.3s ease;">
							<div class="tg-story-actions" style="display: flex; gap: 10px;">
								<button class="tg-action-btn" onclick="viewStory('${story.story_id}')" style="background: #4A6366; color: white; border: none; width: 40px; height: 40px; border-radius: 50%; cursor: pointer; transition: all 0.3s ease;">
									<i class="fa fa-eye"></i>
								</button>
								<button class="tg-action-btn" onclick="addToWishlist('${story.story_id}')" style="background: #F4A261; color: white; border: none; width: 40px; height: 40px; border-radius: 50%; cursor: pointer; transition: all 0.3s ease;">
									<i class="fa fa-heart"></i>
								</button>
								<button class="tg-action-btn" onclick="addToCart('${story.story_id}')" style="background: #28a745; color: white; border: none; width: 40px; height: 40px; border-radius: 50%; cursor: pointer; transition: all 0.3s ease;">
									<i class="fa fa-shopping-cart"></i>
								</button>
							</div>
						</div>
						${statusBadges}
					</div>
					<div class="tg-story-content" style="padding: 15px;">
						<div class="tg-story-category" style="margin-bottom: 8px;">
							<span style="background: ${getCategoryBadgeColor(story.category_code)}; color: white; padding: 3px 8px; border-radius: 12px; font-size: 11px;">${story.category_name}</span>
						</div>
						<h3 class="tg-story-title" style="font-size: 1rem; font-weight: 600; margin-bottom: 6px; color: #333; line-height: 1.3;">
							<a href="javascript:void(0);" onclick="viewStory('${story.story_id}')" style="color: inherit; text-decoration: none;">${story.title}</a>
						</h3>
						<p class="tg-story-author" style="color: #666; font-size: 0.85rem; margin-bottom: 8px;">
							${story.author}
						</p>
						<div class="tg-story-rating" style="margin-bottom: 10px;">
							<span class="tg-stars" style="color: #ffd700; font-size: 0.9rem;">
								${'★'.repeat(Math.floor(story.rating))}${'☆'.repeat(5-Math.floor(story.rating))}
							</span>
							<span style="color: #666; font-size: 0.75rem;">(${story.rating})</span>
						</div>
						<div class="tg-story-price" style="display: flex; align-items: center; justify-content: space-between;">
							<div>
								<span style="font-weight: 600; color: #4A6366; font-size: 1rem;">${priceDisplay}</span>
								${originalPriceDisplay ? `<span style="text-decoration: line-through; color: #999; font-size: 0.8rem; margin-left: 5px;">${originalPriceDisplay}</span>` : ''}
							</div>
							<button class="tg-add-to-cart" onclick="addToCart('${story.story_id}')" style="background: #4A6366; color: white; border: none; padding: 6px 12px; border-radius: 15px; cursor: pointer; transition: all 0.3s ease; font-size: 0.8rem;">
								${story.is_free ? 'Đọc ngay' : 'Thêm vào giỏ'}
							</button>
						</div>
					</div>
				</div>
			`;
			
			return col;
		}
		
		// Function to get stories from Firebase
		function getStoriesFromFirebase() {
			return new Promise((resolve, reject) => {
				// Check if Firebase SDK is available
				if (window.firebaseDatabase && window.firebaseRef && window.firebaseGet) {
					const dbRef = window.firebaseRef(window.firebaseDatabase);
					const storiesRef = window.firebaseChild(dbRef, 'Stories');
					
					window.firebaseGet(storiesRef)
						.then((snapshot) => {
							if (snapshot.exists()) {
								const stories = snapshot.val();
								console.log('Stories loaded from Firebase:', stories);
								// Convert Firebase object to array
								const storiesArray = Object.keys(stories).map(key => {
									const storyData = stories[key];
									console.log('Processing story with key:', key);
									console.log('Story data:', storyData);
									
									return {
										...storyData,
										id: key,
										story_id: key
									};
								});
								resolve(storiesArray);
							} else {
								console.log('No stories found in Firebase');
								resolve([]);
							}
						})
						.catch((error) => {
							console.error('Error loading stories from Firebase:', error);
							reject(error);
						});
				} else {
					console.error('Firebase Database not available');
					reject(new Error('Firebase Database not available'));
				}
			});
		}
		
		// Function to check user membership status
		async function checkUserMembership() {
			try {
				const user = window.firebaseAuth.currentUser;
				if (!user) {
					return { hasMembership: false, membershipType: null, expiryDate: null };
				}

				const dbRef = window.firebaseRef(window.firebaseDatabase);
				const userRef = window.firebaseChild(dbRef, `Users/${user.uid}`);
				const snapshot = await window.firebaseGet(userRef);

				if (snapshot.exists()) {
					const userData = snapshot.val();
					const membership = userData.membership || {};
					
					// Check if user has active membership
					if (membership.isActive && membership.expiryDate) {
						const expiryDate = new Date(membership.expiryDate);
						const now = new Date();
						
						if (expiryDate > now) {
							return {
								hasMembership: true,
								membershipType: membership.type || 'premium',
								expiryDate: membership.expiryDate
							};
						}
					}
				}

				return { hasMembership: false, membershipType: null, expiryDate: null };
			} catch (error) {
				console.error('Error checking user membership:', error);
				return { hasMembership: false, membershipType: null, expiryDate: null };
			}
		}

		// Function to filter stories based on user membership
		function filterStoriesByMembership(stories, userMembership) {
			// Don't filter out member-only stories, just mark them for special handling
			return stories;
		}

		// Function to get button text and action for story
		async function getStoryButtonInfo(story) {
			try {
				const user = JSON.parse(localStorage.getItem('user'));
				if (!user || !user.uid) {
					// Not logged in - show login button
					return {
						text: 'Đăng nhập để mua',
						action: 'login',
						icon: 'sign-in',
						style: 'login'
					};
				}

				// Check if user has purchased this story
				const hasPurchased = await checkIfUserPurchasedStory(user.uid, story.story_id);
				if (hasPurchased) {
					return {
						text: 'Đọc ngay',
						action: 'readBook',
						icon: 'book',
						style: 'purchased'
					};
				}

				// Check if story is member-only
				if (story.is_member_only) {
					const userMembership = await checkUserMembership();
					if (userMembership.hasMembership) {
						return {
							text: 'Thêm vào giỏ',
							action: 'addToCart',
							icon: 'shopping-cart',
							style: 'primary'
						};
					} else {
						return {
							text: 'Mua gói hội viên',
							action: 'buyMembership',
							icon: 'crown',
							style: 'membership'
						};
					}
				}
				// For free stories
				if (story.is_free) {
					return {
						text: 'Đọc ngay',
						action: 'readBook',
						icon: 'play',
						style: 'primary'
					};
				}
				// For regular stories
				return {
					text: 'Thêm vào giỏ',
					action: 'addToCart',
					icon: 'shopping-cart',
					style: 'primary'
				};
			} catch (error) {
				console.error('Error getting story button info:', error);
				// Fallback to default
				return {
					text: 'Thêm vào giỏ',
					action: 'addToCart',
					icon: 'shopping-cart',
					style: 'primary'
				};
			}
		}

		// Check if user has purchased a specific story
		async function checkIfUserPurchasedStory(userId, storyId) {
			try {
				const ordersRef = window.firebaseRef(window.firebase.database(), `orders/${userId}`);
				const ordersSnapshot = await window.firebaseGet(ordersRef);
				
				if (!ordersSnapshot.exists()) {
					return false;
				}

				const orders = ordersSnapshot.val();
				
				// Check all orders for this user
				for (const orderKey in orders) {
					const order = orders[orderKey];
					
					// Check if order is successful
					if (order.status === 'success' && order.paymentStatus === 'completed') {
						
						// Check cart items in the order
						if (order.cartItems && Array.isArray(order.cartItems)) {
							for (const item of order.cartItems) {
								// Check if this story is in the purchased items
								if (item.story_id === storyId || item.id === storyId) {
									console.log(`User has purchased story ${storyId} in order ${orderKey}`);
									return true;
								}
							}
						}
					}
				}
				
				return false;
			} catch (error) {
				console.error('Error checking if user purchased story:', error);
				return false;
			}
		}

		// Function to get stories by filter with membership check
		async function getStoriesByFilter(filter) {
			try {
				const stories = await getStoriesFromFirebase();
				
				// Apply category filters (don't filter out member stories)
				if (filter === 'all') {
					return stories;
				} else if (filter === 'TM001') {
					return stories.filter(story => story.category_code === 'TM001');
				} else if (filter === 'TNB002') {
					return stories.filter(story => story.category_code === 'TNB002');
				} else if (filter === 'THV004') {
					// Show all member stories (buttons will be handled by getStoryButtonInfo)
					return stories.filter(story => story.category_code === 'THV004');
				} else if (filter === 'free') {
					return stories.filter(story => story.is_free === true);
				}
				
				return stories;
			} catch (error) {
				console.error('Error getting stories by filter:', error);
				return [];
			}
		}
		

		
		// Function to handle membership purchase
		function buyMembership(storyId) {
			// Chuyển thẳng đến trang chi tiết truyện
			window.location.href = `story-detail.html?id=${storyId}`;
		}

		// Function to add book to cart
		async function addBookToCart(bookId) {
			try {
				// Get book data from Firebase
				if (window.firebaseDatabase && window.firebaseRef && window.firebaseGet) {
					const dbRef = window.firebaseRef(window.firebaseDatabase);
					const bookRef = window.firebaseChild(dbRef, `Books/${bookId}`);
					const snapshot = await window.firebaseGet(bookRef);
					
					if (snapshot.exists()) {
						const book = snapshot.val();
						
						// Check if book is member-only and user doesn't have membership
						if (book.is_member_only) {
							const userMembership = await checkUserMembership();
							if (!userMembership.hasMembership) {
								showNotification('Bạn cần mua gói hội viên để thêm sách này vào giỏ hàng!', 'warning');
								// Show membership modal or redirect to membership page
								setTimeout(() => {
									if (confirm('Bạn có muốn xem các gói hội viên không?')) {
										window.location.href = 'menbership.html';
									}
								}, 1000);
								return;
							}
						}
						
						// Check if book is already in cart
						if (cartItems[bookId]) {
							cartItems[bookId].quantity += 1;
						} else {
							cartItems[bookId] = {
								...book,
								quantity: 1
							};
						}
						
						updateCartDisplay();
						saveCartToFirebase();
						showNotification('Đã thêm sách vào giỏ hàng!', 'success');
					} else {
						showNotification('Không tìm thấy thông tin sách', 'error');
					}
				}
			} catch (error) {
				console.error('Error adding book to cart:', error);
				showNotification('Lỗi khi thêm sách vào giỏ hàng', 'error');
			}
		}
		
		// Function to load more stories
		function loadMoreStories() {
			const booksContainer = document.getElementById('books-container');
			const loadMoreButton = document.querySelector('.tg-load-more');
			
			if (!booksContainer) {
				console.error('Books container not found');
				return;
			}
			
			if (loadMoreButton) {
				loadMoreButton.innerHTML = '<i class="fa fa-spinner fa-spin" style="margin-right: 8px;"></i>Đang tải...';
				loadMoreButton.disabled = true;
			}
			
			// Simulate loading delay
			setTimeout(() => {
				// Add more books to container
				getBooksByFilter('all')
					.then(books => {
						books.forEach(book => {
							const bookCard = createBookCard(book);
							booksContainer.appendChild(bookCard);
						});
						
						if (loadMoreButton) {
							loadMoreButton.innerHTML = '<i class="fa fa-refresh" style="margin-right: 8px;"></i>Tải thêm sách';
							loadMoreButton.disabled = false;
						}
					})
					.catch(error => {
						console.error('Error loading more books:', error);
						if (loadMoreButton) {
							loadMoreButton.innerHTML = '<i class="fa fa-refresh" style="margin-right: 8px;"></i>Tải thêm sách';
							loadMoreButton.disabled = false;
						}
					});
			}, 1500);
		}

		// Function to show notification
		function showNotification(message, type = 'info') {
			// Create notification element
			const notification = document.createElement('div');
			notification.style.cssText = `
				position: fixed;
				top: 20px;
				right: 20px;
				background: ${type === 'success' ? '#28a745' : type === 'error' ? '#dc3545' : '#17a2b8'};
				color: white;
				padding: 15px 20px;
				border-radius: 5px;
				box-shadow: 0 4px 15px rgba(0,0,0,0.2);
				z-index: 10000;
				transform: translateX(100%);
				transition: transform 0.3s ease;
			`;
			notification.textContent = message;
			
			document.body.appendChild(notification);
			
			// Animate in
			setTimeout(() => {
				notification.style.transform = 'translateX(0)';
			}, 100);
			
			// Remove after 3 seconds
			setTimeout(() => {
				notification.style.transform = 'translateX(100%)';
				setTimeout(() => {
					document.body.removeChild(notification);
				}, 300);
			}, 3000);
		}
		
		// Function to load cart from Firebase
		async function loadCartFromFirebase() {
			try {
				if (window.firebaseDatabase && window.firebaseRef && window.firebaseGet) {
					const dbRef = window.firebaseRef(window.firebaseDatabase);
					const cartRef = window.firebaseChild(dbRef, 'Carts');
					const user = JSON.parse(localStorage.getItem('user') || '{}');
					
					if (user.uid) {
						const userCartRef = window.firebaseChild(cartRef, user.uid);
						const snapshot = await window.firebaseGet(userCartRef);
						
						if (snapshot.exists()) {
							cartItems = snapshot.val();
							updateCartDisplay();
						} else {
							cartItems = {};
							updateCartDisplay();
						}
					} else {
						cartItems = {};
						updateCartDisplay();
					}
				}
			} catch (error) {
				console.error('Error loading cart from Firebase:', error);
				cartItems = {};
				updateCartDisplay();
			}
		}

		// Function to update cart display - localStorage version
		window.updateCartDisplay = function() {
			const cart = JSON.parse(localStorage.getItem('cart')) || [];
			const cartItemsContainer = document.getElementById('cart-items-container');
			const cartEmpty = document.querySelector('.tg-cart-empty');
			
			if (!cartItemsContainer) return;
			
			if (cart.length === 0) {
				// Hiển thị giỏ hàng trống
				cartItemsContainer.innerHTML = `
					<div class="tg-cart-empty" style="display: block;">
						<i class="fa fa-shopping-cart"></i>
						<h4>Giỏ hàng trống</h4>
						<p>Hãy thêm sản phẩm vào giỏ hàng</p>
					</div>
				`;
			} else {
				// Hiển thị danh sách sản phẩm với đầy đủ thông tin
				cartItemsContainer.innerHTML = cart.map(item => `
					<div class="tg-cart-item" data-item-id="${item.story_id || item.book_id}">
						<div class="tg-cart-item-image">
							<img src="${item.cover_image || item.image}" alt="${item.title}" onerror="this.src='images/stories/default-story.jpg'">
						</div>
						<div class="tg-cart-item-details">
							<h4>${item.title}</h4>
							<p class="tg-cart-item-author">${item.author}</p>
							<div class="tg-cart-item-info">
								${item.category_name ? `<span class="tg-cart-item-category">${item.category_name}</span>` : ''}
								${item.rating ? `<span class="tg-cart-item-rating">★ ${item.rating}</span>` : ''}
								${item.type === 'story' ? `<span class="tg-cart-item-type">📖 Truyện</span>` : '<span class="tg-cart-item-type">📚 Sách</span>'}
							</div>
							<div class="tg-cart-item-price">
								<span class="tg-cart-item-current">${formatPrice(item.price)}</span>
								${item.original_price > item.price ? `<span class="tg-cart-item-original">${formatPrice(item.original_price)}</span>` : ''}
							</div>
							${item.description ? `<p class="tg-cart-item-description">${item.description.substring(0, 100)}${item.description.length > 100 ? '...' : ''}</p>` : ''}
						</div>
						<div class="tg-cart-item-actions">
							<div class="tg-cart-item-quantity">
								<button class="tg-quantity-btn" onclick="updateQuantity('${item.story_id || item.book_id}', -1)">-</button>
								<span class="tg-quantity-number">${item.quantity}</span>
								<button class="tg-quantity-btn" onclick="updateQuantity('${item.story_id || item.book_id}', 1)">+</button>
							</div>
							<button class="tg-cart-item-remove" onclick="removeCartItem('${item.story_id || item.book_id}')">
								<i class="fa fa-trash"></i>
							</button>
						</div>
					</div>
				`).join('');
			}
			
			// Cập nhật tổng tiền
			updateCartTotal();
		}

		// Function to save cart to Firebase
		async function saveCartToFirebase() {
			try {
				if (window.firebaseDatabase && window.firebaseRef) {
					const dbRef = window.firebaseRef(window.firebaseDatabase);
					const cartRef = window.firebaseChild(dbRef, 'Carts');
					const user = JSON.parse(localStorage.getItem('user') || '{}');
					
					if (user.uid) {
						const userCartRef = window.firebaseChild(cartRef, user.uid);
						await window.firebaseSet(userCartRef, cartItems);
					}
				}
			} catch (error) {
				console.error('Error saving cart to Firebase:', error);
			}
		}

		// Function to update cart count
		window.updateCartCount = function() {
			const cart = JSON.parse(localStorage.getItem('cart')) || [];
			const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
			
			const cartBadge = document.getElementById('cart-badge');
			if (cartBadge) {
				cartBadge.textContent = totalItems;
				cartBadge.style.display = totalItems > 0 ? 'flex' : 'none';
			}
		}

		// Function to update cart total
		window.updateCartTotal = function() {
			const cart = JSON.parse(localStorage.getItem('cart')) || [];
			const totalPrice = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
			const totalOriginal = cart.reduce((sum, item) => sum + (item.original_price * item.quantity), 0);
			const savings = totalOriginal - totalPrice;
			
			const totalPriceElement = document.getElementById('cart-total-price');
			const savingsElement = document.getElementById('cart-savings-amount');
			
			if (totalPriceElement) {
				totalPriceElement.textContent = formatPrice(totalPrice);
			}
			if (savingsElement) {
				savingsElement.textContent = formatPrice(savings);
			}
		}

		// Function to format price
		window.formatPrice = function(price) {
			return new Intl.NumberFormat('vi-VN', {
				style: 'currency',
				currency: 'VND'
			}).format(price);
		}
		
		// Function to apply price filter
		function applyPriceFilter(minPrice, maxPrice) {
			const booksContainer = document.getElementById('books-container');
			if (!booksContainer) {
				console.error('Books container not found');
				return;
			}
			
			console.log('Applying price filter:', minPrice, 'to', maxPrice);
			
			// Show loading state
			booksContainer.innerHTML = '<div class="col-12 text-center"><i class="fa fa-spinner fa-spin" style="font-size: 2rem; color: #4A6366;"></i><p>Đang lọc theo giá...</p></div>';
			
			getBooksByPriceRange(minPrice, maxPrice)
				.then(books => {
					loadBooksByFilter('price', books);
				})
				.catch(error => {
					console.error('Error applying price filter:', error);
					booksContainer.innerHTML = '<div class="col-12 text-center"><p style="color: #dc3545;">Có lỗi khi tải sách!</p></div>';
				});
		}
		
		// Function to apply rating filter
		function applyRatingFilter() {
			const booksContainer = document.getElementById('books-container');
			if (!booksContainer) {
				console.error('Books container not found');
				return;
			}
			
			const ratingCheckboxes = document.querySelectorAll('.tg-rating-filter input[type="checkbox"]:checked');
			const selectedRatings = Array.from(ratingCheckboxes).map(cb => {
				const starsElement = cb.parentElement.querySelector('.tg-stars');
				return starsElement ? starsElement.textContent.length : 0;
			}).filter(rating => rating > 0);
			
			console.log('Applying rating filter:', selectedRatings);
			
			if (selectedRatings.length === 0) {
				// If no ratings selected, show all books
				loadBooksFromFirebase(firebase.database());
				return;
			}
			
			// Show loading state
			booksContainer.innerHTML = '<div class="col-12 text-center"><i class="fa fa-spinner fa-spin" style="font-size: 2rem; color: #4A6366;"></i><p>Đang lọc theo đánh giá...</p></div>';
			
			getStoriesByRating(selectedRatings)
				.then(stories => {
					displayStoriesFromFirebase(stories);
					updateBooksCount(stories.length);
					showNotification(`Đã lọc được ${stories.length} truyện theo đánh giá đã chọn`, 'success');
				})
				.catch(error => {
					console.error('Error applying rating filter:', error);
					booksContainer.innerHTML = '<div class="col-12 text-center"><p style="color: #dc3545;">Có lỗi khi tải truyện!</p></div>';
					showNotification('Lỗi khi lọc truyện theo đánh giá', 'error');
				});
		}
		
		// Function to apply genre filter
		function applyGenreFilter() {
			const booksContainer = document.getElementById('books-container');
			if (!booksContainer) {
				console.error('Books container not found');
				return;
			}
			
			const genreCheckboxes = document.querySelectorAll('.tg-genre-filter input[type="checkbox"]:checked');
			const selectedGenres = Array.from(genreCheckboxes).map(cb => {
				return cb.getAttribute('data-genre');
			});
			
			console.log('Applying genre filter:', selectedGenres);
			
			if (selectedGenres.length === 0) {
				// If no genres selected, show all books
				loadAllBooksAndUpdateCounts();
				return;
			}
			
			// Show loading state
			booksContainer.innerHTML = '<div class="col-12 text-center"><i class="fa fa-spinner fa-spin" style="font-size: 2rem; color: #4A6366;"></i><p>Đang lọc theo thể loại...</p></div>';
			
			getStoriesByGenre(selectedGenres)
				.then(stories => {
					displayStoriesFromFirebase(stories);
					updateBooksCount(stories.length);
					showNotification(`Đã lọc được ${stories.length} truyện theo thể loại đã chọn`, 'success');
				})
				.catch(error => {
					console.error('Error applying genre filter:', error);
					booksContainer.innerHTML = '<div class="col-12 text-center"><p style="color: #dc3545;">Có lỗi khi tải truyện!</p></div>';
				});
		}
		
		// Function to clear all filters
		function clearAllFilters() {
			// Reset category buttons
			const filterButtons = document.querySelectorAll('.tg-filter-btn');
			filterButtons.forEach(btn => {
				btn.classList.remove('active');
				btn.style.background = '#f8f9fa';
				btn.style.color = '#333';
			});
			
			// Reset price inputs
			const priceInputs = document.querySelectorAll('.tg-price-range input');
			priceInputs.forEach(input => input.value = '');
			
			// Reset rating checkboxes
			const ratingCheckboxes = document.querySelectorAll('.tg-rating-filter input[type="checkbox"]');
			ratingCheckboxes.forEach(cb => cb.checked = false);
			
			// Reset genre checkboxes
			const genreCheckboxes = document.querySelectorAll('.tg-genre-filter input[type="checkbox"]');
			genreCheckboxes.forEach(cb => cb.checked = false);
			
			// Load all books
			applyBookFilter('all');
			
			// Show notification
			showNotification('Đã xóa tất cả bộ lọc!', 'info');
		}
		
		// Function to get stories by price range
		function getStoriesByPriceRange(minPrice, maxPrice) {
			return getStoriesFromFirebase().then(stories => {
				return stories.filter(story => {
					const price = story.price || 0;
					const min = minPrice ? parseInt(minPrice) : 0;
					const max = maxPrice ? parseInt(maxPrice) : Infinity;
					
					return price >= min && price <= max;
				});
			}).catch(error => {
				console.error('Error getting stories by price range:', error);
				return [];
			});
		}
		
		// Function to get stories by rating
		function getStoriesByRating(ratings) {
			return getStoriesFromFirebase().then(stories => {
				return stories.filter(story => {
					const rating = story.rating || 0;
					return ratings.some(r => rating >= r);
				});
			}).catch(error => {
				console.error('Error getting stories by rating:', error);
				return [];
			});
		}
		
		// Function to get books by genre
		function getStoriesByGenre(genres) {
			return getStoriesFromFirebase().then(stories => {
				return stories.filter(story => {
					// Check if story has genre field
					if (story.genre) {
						return genres.some(genre => 
							story.genre.toLowerCase().includes(genre.toLowerCase())
						);
					}
					// Fallback to tags if genre not available
					if (story.tags && Array.isArray(story.tags)) {
						return genres.some(genre => 
							story.tags.some(tag => tag.toLowerCase().includes(genre.toLowerCase()))
						);
					}
					return false;
				});
			}).catch(error => {
				console.error('Error getting books by genre:', error);
				return [];
			});
		}
		
		// Function to update books count
		function updateBooksCount(count) {
			const booksCountElement = document.querySelector('.tg-books-count span');
			if (booksCountElement) {
				booksCountElement.textContent = count;
			}
		}
		
		// Function to update category counts
		function updateCategoryCounts(stories) {
			// Count stories by category
			const categoryCounts = {
				'all': stories.length,
				'TM001': stories.filter(story => story.category_code === 'TM001').length,
				'TNB002': stories.filter(story => story.category_code === 'TNB002').length,
				'THV004': stories.filter(story => story.category_code === 'THV004').length,
				'free': stories.filter(story => story.is_free === true).length
			};
			
			// Update category count displays
			Object.keys(categoryCounts).forEach(category => {
				const filterBtn = document.querySelector(`[data-filter="${category}"]`);
				if (filterBtn) {
					const countSpan = filterBtn.querySelector('.category-count');
					if (countSpan) {
						countSpan.textContent = categoryCounts[category];
					}
				}
			});
			
			// Count stories by genre
			const genres = ['tiểu thuyết', 'truyện ngắn', 'truyện tranh', 'thơ', 'cổ tích', 'tình cảm', 'tùy bút', 'thiếu nhi'];
			genres.forEach(genre => {
				const genreCount = stories.filter(story => {
					// Check if story has genre field
					if (story.genre) {
						return story.genre.toLowerCase().includes(genre.toLowerCase());
					}
					// Fallback to tags if genre not available
					if (story.tags && Array.isArray(story.tags)) {
						return story.tags.some(tag => tag.toLowerCase().includes(genre.toLowerCase()));
					}
					return false;
				}).length;
				
				const genreCheckbox = document.querySelector(`[data-genre="${genre}"]`);
				if (genreCheckbox) {
					const countSpan = genreCheckbox.parentElement.querySelector('.genre-count');
					if (countSpan) {
						countSpan.textContent = `(${genreCount})`;
					}
				}
			});
			
			console.log('Category and genre counts updated');
		}
		
		// Function to attach event listeners to story cards
		function attachStoryCardEvents() {
			const storyCards = document.querySelectorAll('.tg-story-card');
			storyCards.forEach(card => {
				card.addEventListener('mouseenter', function() {
					const overlay = this.querySelector('.tg-story-overlay');
					if (overlay) {
						overlay.style.opacity = '1';
					}
				});
				
				card.addEventListener('mouseleave', function() {
					const overlay = this.querySelector('.tg-story-overlay');
					if (overlay) {
						overlay.style.opacity = '0';
					}
				});
			});
			
			// Add to cart functionality
			const addToCartButtons = document.querySelectorAll('.tg-add-to-cart');
			addToCartButtons.forEach(button => {
				button.addEventListener('click', function(e) {
					e.preventDefault();
					
					// Get book information
					const bookCard = this.closest('.tg-book-card');
					const bookTitle = bookCard.querySelector('.tg-book-title a').textContent;
					const bookAuthor = bookCard.querySelector('.tg-book-author').textContent;
					const bookPrice = bookCard.querySelector('.tg-book-price span').textContent;
					const bookImage = bookCard.querySelector('.tg-book-image img').src;
					
					// Add to cart (this would typically update Firebase)
					addBookToCart({
						title: bookTitle,
						author: bookAuthor,
						price: bookPrice,
						image: bookImage,
						quantity: 1
					});
					
					// Show success message
					showNotification('Sách đã được thêm vào giỏ hàng!', 'success');
				});
			});
		}
		
		// Function to view book details
		function viewBook(bookId) {
			window.location.href = `book-detail.html?id=${bookId}`;
		}
		
		// Function to add to wishlist
		function addToWishlist(bookId) {
			// This would typically update Firebase wishlist
			console.log('Adding to wishlist:', bookId);
			showNotification('Đã thêm vào danh sách yêu thích!', 'success');
		}
		
		// Function to add story to cart - localStorage version
		window.addToCart = async function(storyId) {
			console.log('addToCart called with storyId:', storyId);
			
			try {
				// Lấy thông tin truyện từ Firebase hoặc từ dữ liệu hiện có
				let stories = [];
				try {
					stories = await getStoriesFromFirebase();
				} catch (firebaseError) {
					console.warn('Firebase not available, using fallback data');
					// Fallback: tạo dữ liệu truyện cơ bản từ storyId
					stories = [{
						story_id: storyId,
						id: storyId,
						title: `Truyện ${storyId}`,
						author: 'Tác giả',
						price: 100000,
						original_price: 120000,
						cover_image: 'images/stories/default-story.jpg',
						is_free: false
					}];
				}
				
				const story = stories.find(s => s.story_id === storyId || s.id === storyId);
				
				if (!story) {
					showNotification('Không tìm thấy thông tin truyện!', 'error');
					return;
				}
				
				// Kiểm tra nếu truyện miễn phí thì chuyển đến trang đọc
				if (story.is_free || story.price === 0 || story.price === '0') {
					showNotification('Đang mở truyện miễn phí để đọc...', 'info');
					setTimeout(() => {
						window.location.href = `read-story.html?id=${storyId}`;
					}, 1000);
					return;
				}
				
				// Lấy giỏ hàng hiện tại từ localStorage
				let cart = JSON.parse(localStorage.getItem('cart')) || [];
				
				// Kiểm tra xem truyện đã có trong giỏ hàng chưa
				const existingItemIndex = cart.findIndex(item => item.story_id === storyId || item.id === storyId);
				
				if (existingItemIndex !== -1) {
					// Nếu đã có, tăng số lượng
					cart[existingItemIndex].quantity += 1;
					showNotification('Đã tăng số lượng truyện trong giỏ hàng!', 'success');
				} else {
					// Nếu chưa có, thêm mới với đầy đủ thông tin
					const cartItem = {
						story_id: story.story_id || story.id,
						title: story.title,
						author: story.author,
						price: story.price || 0,
						original_price: story.original_price || story.price || 0,
						cover_image: story.cover_image || story.image || 'images/stories/default-story.jpg',
						image: story.cover_image || story.image || 'images/stories/default-story.jpg',
						category_name: story.category_name || 'Chưa phân loại',
						category_code: story.category_code || '',
						rating: story.rating || 0,
						description: story.description || story.summary || '',
						publisher: story.publisher || 'Chưa có thông tin',
						publish_date: story.publish_date || story.published_date || '',
						pages: story.pages || story.page_count || 0,
						language: story.language || 'Tiếng Việt',
						isbn: story.isbn || '',
						is_featured: story.is_featured || false,
						is_member_only: story.is_member_only || false,
						is_free: story.is_free || false,
						genre: story.genre || '',
						tags: story.tags || [],
						quantity: 1,
						added_at: new Date().toISOString(),
						type: 'story' // Đánh dấu đây là truyện
					};
					cart.push(cartItem);
					showNotification('Truyện đã được thêm vào giỏ hàng!', 'success');
				}
				
				// Lưu giỏ hàng vào localStorage
				localStorage.setItem('cart', JSON.stringify(cart));
				
				// Cập nhật hiển thị giỏ hàng
				updateCartDisplay();
				updateCartCount();
				
				console.log('Cart updated with full story details:', cart);
				
			} catch (error) {
				console.error('Error adding story to cart:', error);
				showNotification('Có lỗi xảy ra khi thêm vào giỏ hàng!', 'error');
			}
		}

		// Function to read book (for free books)
		function readBook(bookId) {
			console.log('Reading story:', bookId);
			showNotification('Đang mở truyện để đọc...', 'info');
			// Redirect to reading page
			setTimeout(() => {
				window.location.href = `read-story.html?id=${bookId}`;
			}, 1000);
		}

		// Function to view book details
		function viewBook(bookId) {
			console.log('Viewing book details:', bookId);
			showNotification('Đang mở chi tiết sách...', 'info');
			// Redirect to book detail page
			setTimeout(() => {
				window.location.href = `book-detail.html?id=${bookId}`;
			}, 500);
		}

		// Function to add to wishlist
		function addToWishlist(bookId) {
			console.log('Adding to wishlist:', bookId);
			showNotification('Đã thêm vào danh sách yêu thích!', 'success');
		}

		// Firebase Configuration and Functions
		document.addEventListener('DOMContentLoaded', function() {
			// Firebase configuration
			const firebaseConfig = {
				apiKey: "AIzaSyBvVkR7QqQqQqQqQqQqQqQqQqQqQqQqQqQ",
				authDomain: "anbok-collection.firebaseapp.com",
				databaseURL: "https://anbok-collection-default-rtdb.asia-southeast1.firebasedatabase.app",
				projectId: "anbok-collection",
				storageBucket: "anbok-collection.appspot.com",
				messagingSenderId: "123456789",
				appId: "1:123456789:web:abcdefghijklmnop"
			};

			// Initialize Firebase
			if (typeof firebase !== 'undefined') {
				firebase.initializeApp(firebaseConfig);
				const database = firebase.database();

				// Load books from Firebase
				loadBooksFromFirebase(database);
				
				// Show Firebase Rules update reminder
				setTimeout(() => {
					console.log('💡 TIP: To enable BookGenres access, update Firebase Rules:');
					console.log('1. Go to Firebase Console > Realtime Database > Rules');
					console.log('2. Add "BookGenres": { ".read": true, ".write": "auth != null" }');
					console.log('3. Publish the rules');
				}, 2000);
			} else {
				console.error('Firebase SDK not loaded');
				showNotification('Lỗi: Firebase SDK không được tải', 'error');
			}
		});

		// Add event listeners for rating filter
		document.addEventListener('DOMContentLoaded', function() {
			const ratingCheckboxes = document.querySelectorAll('.tg-rating-filter input[type="checkbox"]');
			ratingCheckboxes.forEach(checkbox => {
				checkbox.addEventListener('change', function() {
					applyRatingFilter();
				});
			});
		});

		// Load books from Firebase
		async function loadBooksFromFirebase(database) {
			try {
				// First, try to load books
				const booksSnapshot = await database.ref('Books').once('value');
				const booksData = booksSnapshot.val();
				
				if (booksData) {
					const allBooks = Object.values(booksData);
					
					// Update book count
					updateBooksCount(stories.length);
					
					// Try to load genres from StoryGenres, fallback to extracting from stories
					try {
						const genresSnapshot = await database.ref('StoryGenres').once('value');
						const genresData = genresSnapshot.val();
						loadGenresFromFirebase(genresData, stories);
						console.log('Successfully loaded genres from StoryGenres');
					} catch (genresError) {
						console.warn('Cannot access StoryGenres, extracting from stories data:', genresError);
						console.log('To fix this, update Firebase Rules to allow read access to StoryGenres');
						showNotification('Đang tải thể loại từ dữ liệu truyện...', 'info');
						loadGenresFromStories(stories);
					}
					
					// Display stories
					displayStoriesFromFirebase(stories);
					
					// Update category counts
					updateCategoryCounts(stories);
				}
			} catch (error) {
				console.error('Error loading books:', error);
				showNotification('Lỗi khi tải dữ liệu sách', 'error');
			}
		}

		// Load genres from Firebase StoryGenres collection
		function loadGenresFromFirebase(genresData, storiesData) {
			if (!genresData) {
				console.warn('No genres data found in Firebase, extracting from stories');
				loadGenresFromStories(storiesData);
				return;
			}

			const genres = [];
			const genreCounts = {};

			// Process each genre from StoryGenres
			Object.values(genresData).forEach(genre => {
				if (genre.is_active) {
					genres.push({
						name: genre.genre_name,
						code: genre.genre_code,
						count: genre.story_count,
						description: genre.description
					});
					genreCounts[genre.genre_name] = genre.story_count;
				}
			});

			displayGenres(genres, genreCounts);
		}

		// Fallback: Load genres from stories data
		function loadGenresFromStories(stories) {
			const genres = new Set();
			const genreCounts = {};

			stories.forEach(story => {
				if (story.genre) {
					genres.add(story.genre);
					genreCounts[story.genre] = (genreCounts[story.genre] || 0) + 1;
				}
			});

			// Convert to the same format as Firebase genres
			const genresArray = Array.from(genres).map(genreName => ({
				name: genreName,
				code: genreName.toUpperCase().replace(/\s+/g, '_'),
				count: genreCounts[genreName],
				description: `Truyện thuộc thể loại ${genreName}`
			}));

			console.log('Extracted genres from stories:', genresArray);
			showNotification(`Đã tải ${genresArray.length} thể loại từ dữ liệu truyện`, 'success');
			displayGenres(genresArray, genreCounts);
		}

		// Display genres in filter
		function displayGenres(genres, genreCounts) {
			const genreFilter = document.getElementById('genreFilter');
			
			if (genreFilter) {
				genreFilter.innerHTML = '';
				
				genres.forEach(genre => {
					const count = genre.count || genreCounts[genre.name] || 0;
					const genreElement = document.createElement('label');
					genreElement.style.cssText = 'display: flex; align-items: center; gap: 8px; cursor: pointer; font-size: 0.9rem;';
					genreElement.innerHTML = `
						<input type="checkbox" class="genre-checkbox" data-genre="${genre.name}" data-genre-code="${genre.code}" style="margin: 0;">
						<span style="color: #333;">${genre.name}</span>
						<span class="genre-count" style="color: #666; font-size: 0.8rem;">(${count})</span>
					`;
					
					// Add event listener
					const checkbox = genreElement.querySelector('input');
					checkbox.addEventListener('change', function() {
						handleGenreFilter();
					});
					
					genreFilter.appendChild(genreElement);
				});
			}
		}

		// Handle genre filter
		function handleGenreFilter() {
			const genreCheckboxes = document.querySelectorAll('.genre-checkbox:checked');
			const selectedGenres = Array.from(genreCheckboxes).map(cb => ({
				name: cb.dataset.genre,
				code: cb.dataset.genreCode
			}));
			
			// Apply genre filter
			applyGenreFilter(selectedGenres);
		}

		// Global variables for pagination
		let allBooks = [];
		let currentPage = 1;
		const booksPerPage = 8;

		// Display stories from Firebase with pagination
		function displayStoriesFromFirebase(stories) {
			const container = document.getElementById('books-container');
			
			if (!container) return;
			
			// Store all stories globally for pagination
			allBooks = stories;
			currentPage = 1;
			
			if (stories.length === 0) {
				container.innerHTML = `
					<div class="col-12 text-center" style="padding: 50px;">
						<i class="fa fa-search" style="font-size: 2rem; color: #4A6366;"></i>
						<p style="margin-top: 15px; color: #666;">Không tìm thấy truyện phù hợp</p>
					</div>
				`;
				hidePagination();
				return;
			}

			// Display current page
			displayCurrentPage();
		}

		// Display current page of stories
		async function displayCurrentPage() {
			const container = document.getElementById('books-container');
			const startIndex = (currentPage - 1) * booksPerPage;
			const endIndex = startIndex + booksPerPage;
			const currentStories = allBooks.slice(startIndex, endIndex);

			// Create story cards with dynamic buttons
			const storyCards = await Promise.all(currentStories.map(async (story) => {
				// Debug: Log story data
				console.log('Story data:', story);
				console.log('Story ID:', story.story_id);
				console.log('Story title:', story.title);
				
				const buttonInfo = await getStoryButtonInfo(story);
				
				// Get button style based on type
				let buttonStyle = '';
				let buttonClass = '';
				
				if (buttonInfo.style === 'membership') {
					buttonStyle = 'background: linear-gradient(135deg, #F4A261 0%, #E8944A 100%); color: white; border: none; padding: 8px 12px; border-radius: 8px; cursor: pointer; font-size: 0.8rem; font-weight: 600; transition: all 0.3s ease; display: flex; align-items: center; justify-content: center; gap: 6px; box-shadow: 0 2px 8px rgba(244, 162, 97, 0.3);';
					buttonClass = 'tg-btn-membership';
				} else {
					buttonStyle = 'background: linear-gradient(135deg, #4A6366 0%, #3A4F52 100%); color: white; border: none; padding: 8px 12px; border-radius: 8px; cursor: pointer; font-size: 0.8rem; font-weight: 600; transition: all 0.3s ease; display: flex; align-items: center; justify-content: center; gap: 6px; box-shadow: 0 2px 8px rgba(74, 99, 102, 0.3);';
					buttonClass = 'tg-btn-primary';
				}

				return `
					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3" style="margin-bottom: 30px;">
						<div class="tg-story-card" onclick="viewStory('${story.story_id}')" style="background: white; border-radius: 15px; overflow: hidden; box-shadow: 0 5px 20px rgba(0,0,0,0.1); transition: all 0.3s ease; height: 420px; position: relative; border: 1px solid rgba(0,0,0,0.05); display: flex; flex-direction: column; cursor: pointer;">
							<!-- Story Image with Overlay -->
							<div class="tg-story-image-container" style="position: relative; overflow: hidden; height: 200px; flex-shrink: 0;">
								<img src="${story.cover_image}" alt="${story.title}" style="width: 100%; height: 100%; object-fit: cover; transition: transform 0.4s ease;">
								<div class="tg-story-overlay" style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: linear-gradient(135deg, rgba(74, 99, 102, 0.9) 0%, rgba(58, 79, 82, 0.9) 100%); display: flex; align-items: center; justify-content: center; opacity: 0; transition: all 0.4s ease;">
									<div class="tg-overlay-actions" style="display: flex; gap: 10px;">
										<button class="tg-overlay-btn" onclick="event.stopPropagation(); viewStory('${story.story_id}')" style="background: rgba(255,255,255,0.9); color: #4A6366; border: none; width: 35px; height: 35px; border-radius: 50%; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; justify-content: center; font-size: 14px;">
											<i class="fa fa-eye"></i>
										</button>
										<button class="tg-overlay-btn" onclick="event.stopPropagation(); addToWishlist('${story.story_id}')" style="background: rgba(255,255,255,0.9); color: #F4A261; border: none; width: 35px; height: 35px; border-radius: 50%; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; justify-content: center; font-size: 14px;">
											<i class="fa fa-heart"></i>
										</button>
										<button class="tg-overlay-btn" onclick="event.stopPropagation(); ${buttonInfo.action === 'buyMembership' ? 'buyMembership' : 'addToCart'}('${story.story_id}')" style="background: rgba(255,255,255,0.9); color: ${buttonInfo.action === 'buyMembership' ? '#F4A261' : '#28a745'}; border: none; width: 35px; height: 35px; border-radius: 50%; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; justify-content: center; font-size: 14px;">
											<i class="fa fa-${buttonInfo.icon}"></i>
										</button>
									</div>
								</div>
								
								<!-- Status Badges -->
								<div class="tg-story-badges" style="position: absolute; top: 10px; left: 10px; display: flex; flex-direction: column; gap: 4px;">
									${story.is_free ? '<span style="background: linear-gradient(135deg, #28a745 0%, #20c997 100%); color: white; padding: 4px 8px; border-radius: 12px; font-size: 9px; font-weight: 600; box-shadow: 0 1px 4px rgba(40, 167, 69, 0.3);">MIỄN PHÍ</span>' : ''}
									${story.is_featured ? '<span style="background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%); color: #333; padding: 4px 8px; border-radius: 12px; font-size: 9px; font-weight: 600; box-shadow: 0 1px 4px rgba(255, 215, 0, 0.3);">NỔI BẬT</span>' : ''}
									${story.is_member_only ? '<span style="background: linear-gradient(135deg, #dc3545 0%, #c82333 100%); color: white; padding: 4px 8px; border-radius: 12px; font-size: 9px; font-weight: 600; box-shadow: 0 1px 4px rgba(220, 53, 69, 0.3);">HỘI VIÊN</span>' : ''}
								</div>
								
								<!-- Category Badge -->
								<div style="position: absolute; top: 10px; right: 10px;">
									<span style="background: rgba(255,255,255,0.9); color: #4A6366; padding: 4px 8px; border-radius: 12px; font-size: 9px; font-weight: 600; backdrop-filter: blur(10px);">${story.category_name}</span>
								</div>
							</div>
							
							<!-- Story Content -->
							<div class="tg-story-content" style="padding: 15px; flex: 1; display: flex; flex-direction: column;">
								<!-- Story Title -->
								<h3 class="tg-story-title" style="margin: 0 0 8px 0; font-size: 1.1rem; font-weight: 700; line-height: 1.3; color: #2c3e50; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; min-height: 2.8rem;">
									<a href="javascript:void(0);" onclick="viewStory('${story.story_id}')" style="color: inherit; text-decoration: none; transition: color 0.3s ease; cursor: pointer;">
										${story.title}
									</a>
								</h3>
								
								<!-- Story Author -->
								<div class="tg-story-author" style="margin-bottom: 10px;">
									<span style="color: #7f8c8d; font-size: 0.85rem; font-weight: 500;">
										<i class="fa fa-user" style="margin-right: 4px; color: #95a5a6;"></i>
										${story.author}
									</span>
								</div>
								
								<!-- Story Rating -->
								<div class="tg-story-rating" style="margin-bottom: 12px;">
									<div style="display: flex; align-items: center; gap: 8px;">
										<div style="color: #f39c12; font-size: 0.9rem;">
											${generateStars(story.rating)}
										</div>
										<div style="display: flex; flex-direction: column;">
											<span style="color: #2c3e50; font-weight: 600; font-size: 0.8rem;">${story.rating}</span>
											<span style="color: #95a5a6; font-size: 0.7rem;">${story.review_count} đánh giá</span>
										</div>
									</div>
								</div>
								
								<!-- Story Price -->
								<div class="tg-story-price" style="margin-bottom: 12px;">
									${story.is_free ? 
										'<div style="display: flex; align-items: center; gap: 6px;"><span style="color: #27ae60; font-weight: 700; font-size: 1.1rem;">Miễn phí</span><i class="fa fa-gift" style="color: #27ae60; font-size: 0.9rem;"></i></div>' :
										story.is_member_only ? 
										'<div style="display: flex; align-items: center; gap: 6px;"><span style="color: #27ae60; font-weight: 700; font-size: 1.1rem;">Miễn phí cho hội viên</span><i class="fa fa-gift" style="color: #27ae60; font-size: 0.9rem;"></i></div>' :
										`<div style="display: flex; align-items: center; gap: 8px;">
											<span style="color: #e74c3c; font-weight: 700; font-size: 1.1rem;">${formatPrice(story.price)}</span>
											${story.original_price > story.price ? 
												`<span style="color: #95a5a6; text-decoration: line-through; font-size: 0.9rem;">${formatPrice(story.original_price)}</span>` : 
												''
											}
										</div>`
									}
								</div>
								
								<!-- Story Actions -->
								<div class="tg-story-actions" style="display: flex; gap: 8px; margin-top: auto;">
									<button class="${buttonClass}" onclick="event.stopPropagation(); ${buttonInfo.action}('${story.story_id}')" style="${buttonStyle}">
										<i class="fa fa-${buttonInfo.icon}" style="font-size: 0.8rem;"></i>
										${buttonInfo.text}
									</button>
									<button class="tg-btn-secondary" onclick="event.stopPropagation(); addToWishlist('${story.story_id}')" style="background: linear-gradient(135deg, #F4A261 0%, #E8944A 100%); color: white; border: none; padding: 8px; border-radius: 8px; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; justify-content: center; box-shadow: 0 2px 8px rgba(244, 162, 97, 0.3);">
										<i class="fa fa-heart" style="font-size: 0.8rem;"></i>
									</button>
								</div>
							</div>
							
							<!-- Hover Effects -->
							<style>
								.tg-story-card:hover {
									transform: translateY(-8px);
									box-shadow: 0 15px 40px rgba(0,0,0,0.15);
								}
								.tg-story-card:hover .tg-story-overlay {
									opacity: 1;
								}
								.tg-story-card:hover .tg-story-image-container img {
									transform: scale(1.1);
								}
								.tg-overlay-btn:hover {
									transform: scale(1.1);
									box-shadow: 0 4px 15px rgba(0,0,0,0.2);
								}
								.tg-btn-primary:hover {
									transform: translateY(-2px);
									box-shadow: 0 6px 20px rgba(74, 99, 102, 0.4);
								}
								.tg-btn-secondary:hover {
									transform: translateY(-2px);
									box-shadow: 0 6px 20px rgba(244, 162, 97, 0.4);
								}
								.tg-btn-membership:hover {
									transform: translateY(-2px);
									box-shadow: 0 6px 20px rgba(244, 162, 97, 0.4);
								}
								.tg-story-title a:hover {
									color: #4A6366;
								}
								.tg-story-card {
									cursor: pointer;
								}
								.tg-story-card:hover {
									cursor: pointer;
								}
							</style>
						</div>
					</div>
				`;
			}));

			container.innerHTML = storyCards.join('');

			// Update pagination
			updatePagination();
		}

		// Update pagination controls
		function updatePagination() {
			const totalPages = Math.ceil(allBooks.length / booksPerPage);
			const paginationContainer = document.getElementById('pagination-container');
			
			if (!paginationContainer) return;
			
			if (totalPages <= 1) {
				paginationContainer.style.display = 'none';
				return;
			}
			
			paginationContainer.style.display = 'flex';
			
			let paginationHTML = `
				<div class="tg-pagination" style="display: flex; justify-content: center; align-items: center; gap: 10px; margin-top: 40px;">
					<button onclick="goToPage(${currentPage - 1})" ${currentPage === 1 ? 'disabled' : ''} style="background: ${currentPage === 1 ? '#e9ecef' : '#4A6366'}; color: ${currentPage === 1 ? '#6c757d' : 'white'}; border: none; padding: 10px 15px; border-radius: 8px; cursor: ${currentPage === 1 ? 'not-allowed' : 'pointer'}; font-weight: 600; transition: all 0.3s ease;">
						<i class="fa fa-chevron-left"></i>
					</button>
			`;
			
			// Calculate page range
			let startPage = Math.max(1, currentPage - 2);
			let endPage = Math.min(totalPages, currentPage + 2);
			
			// Always show first page
			if (startPage > 1) {
				paginationHTML += `
					<button onclick="goToPage(1)" style="background: #4A6366; color: white; border: none; padding: 10px 15px; border-radius: 8px; cursor: pointer; font-weight: 600; transition: all 0.3s ease;">1</button>
				`;
				if (startPage > 2) {
					paginationHTML += `<span style="color: #6c757d; padding: 0 5px;">...</span>`;
				}
			}
			
			// Show page numbers
			for (let i = startPage; i <= endPage; i++) {
				paginationHTML += `
					<button onclick="goToPage(${i})" style="background: ${i === currentPage ? '#F4A261' : '#4A6366'}; color: white; border: none; padding: 10px 15px; border-radius: 8px; cursor: pointer; font-weight: 600; transition: all 0.3s ease;">${i}</button>
				`;
			}
			
			// Always show last page
			if (endPage < totalPages) {
				if (endPage < totalPages - 1) {
					paginationHTML += `<span style="color: #6c757d; padding: 0 5px;">...</span>`;
				}
				paginationHTML += `
					<button onclick="goToPage(${totalPages})" style="background: #4A6366; color: white; border: none; padding: 10px 15px; border-radius: 8px; cursor: pointer; font-weight: 600; transition: all 0.3s ease;">${totalPages}</button>
				`;
			}
			
			paginationHTML += `
				<button onclick="goToPage(${currentPage + 1})" ${currentPage === totalPages ? 'disabled' : ''} style="background: ${currentPage === totalPages ? '#e9ecef' : '#4A6366'}; color: ${currentPage === totalPages ? '#6c757d' : 'white'}; border: none; padding: 10px 15px; border-radius: 8px; cursor: ${currentPage === totalPages ? 'not-allowed' : 'pointer'}; font-weight: 600; transition: all 0.3s ease;">
					<i class="fa fa-chevron-right"></i>
				</button>
			</div>
			`;
			
			paginationContainer.innerHTML = paginationHTML;
		}

		// Go to specific page
		function goToPage(page) {
			const totalPages = Math.ceil(allBooks.length / booksPerPage);
			if (page < 1 || page > totalPages) return;
			
			currentPage = page;
			displayCurrentPage();
			
			// Scroll to top of books container
			const container = document.getElementById('books-container');
			if (container) {
				container.scrollIntoView({ behavior: 'smooth', block: 'start' });
			}
		}

		// Hide pagination
		function hidePagination() {
			const paginationContainer = document.getElementById('pagination-container');
			if (paginationContainer) {
				paginationContainer.style.display = 'none';
			}
		}

		// Format price
		function formatPrice(price) {
			return new Intl.NumberFormat('vi-VN', {
				style: 'currency',
				currency: 'VND'
			}).format(price);
		}

		// Generate stars
		function generateStars(rating) {
			const fullStars = Math.floor(rating);
			const hasHalfStar = rating % 1 !== 0;
			let stars = '';
			
			for (let i = 0; i < fullStars; i++) {
				stars += '★';
			}
			
			if (hasHalfStar) {
				stars += '☆';
			}
			
			const emptyStars = 5 - fullStars - (hasHalfStar ? 1 : 0);
			for (let i = 0; i < emptyStars; i++) {
				stars += '☆';
			}
			
			return stars;
		}

		// Apply genre filter
		function applyGenreFilter(selectedGenres) {
			console.log('Applying genre filter:', selectedGenres);
			
			if (selectedGenres.length === 0) {
				// If no genres selected, show all stories
				loadAllBooksAndUpdateCounts();
				return;
			}
			
			// Filter stories based on selected genres
			filterStoriesByGenres(selectedGenres);
		}

		// Filter stories by selected genres
		async function filterStoriesByGenres(selectedGenres) {
			try {
				const snapshot = await firebase.database().ref('Stories').once('value');
				const storiesData = snapshot.val();
				
				if (storiesData) {
					const allStories = Object.keys(storiesData).map(key => ({
						...storiesData[key],
						id: key,
						story_id: key
					}));
					const filteredStories = allStories.filter(story => {
						// Check if story matches any selected genre
						return selectedGenres.some(selectedGenre => 
							story.genre === selectedGenre.name || 
							story.genre_code === selectedGenre.code ||
							story.genre_code === selectedGenre.code.replace(/\s+/g, '_').toUpperCase()
						);
					});
					
					// Display filtered stories with pagination
					displayStoriesFromFirebase(filteredStories);
					
					// Update count
					updateBooksCount(filteredStories.length);
					
					// Show notification
					if (filteredStories.length > 0) {
						showNotification(`Đã lọc được ${filteredStories.length} truyện theo thể loại đã chọn`, 'success');
					} else {
						showNotification('Không tìm thấy truyện nào phù hợp với thể loại đã chọn', 'info');
					}
				}
			} catch (error) {
				console.error('Error filtering stories by genres:', error);
				showNotification('Lỗi khi lọc truyện theo thể loại', 'error');
			}
		}

		// View story detail function
		function viewStory(storyId) {
			console.log('Viewing story with ID:', storyId);
			console.log('Story ID type:', typeof storyId);
			console.log('Story ID value:', storyId);
			
			// Check if storyId is valid
			if (!storyId || storyId === 'undefined' || storyId === 'null') {
				console.error('Story ID is empty or undefined');
				showNotification('Lỗi: Không tìm thấy ID truyện', 'error');
				return;
			}
			
			// Show loading notification
			showNotification('Đang chuyển đến trang chi tiết...', 'info');
			
			// Redirect to story detail page
			setTimeout(() => {
				console.log('Redirecting to:', `story-detail.html?id=${storyId}`);
				window.location.href = `story-detail.html?id=${storyId}`;
			}, 500);
		}

		// Cart Modal Functions - localStorage version
		window.toggleCartModal = function() {
			const cartModal = document.getElementById('cartModal');
			if (cartModal) {
				cartModal.classList.toggle('active');
				if (cartModal.classList.contains('active')) {
					updateCartDisplay();
				}
			}
		};
		
		window.updateQuantity = function(itemId, change) {
			const cart = JSON.parse(localStorage.getItem('cart')) || [];
			const itemIndex = cart.findIndex(item => (item.story_id === itemId || item.book_id === itemId));
			
			if (itemIndex !== -1) {
				const newQuantity = cart[itemIndex].quantity + change;
				
				if (newQuantity <= 0) {
					// Xóa item nếu số lượng <= 0
					cart.splice(itemIndex, 1);
					showNotification('Đã xóa sản phẩm khỏi giỏ hàng!', 'success');
				} else {
					// Cập nhật số lượng
					cart[itemIndex].quantity = newQuantity;
					showNotification('Đã cập nhật số lượng!', 'success');
				}
				
				localStorage.setItem('cart', JSON.stringify(cart));
				updateCartDisplay();
				updateCartCount();
			}
		};
		
		window.removeCartItem = function(itemId) {
			const cart = JSON.parse(localStorage.getItem('cart')) || [];
			const itemIndex = cart.findIndex(item => (item.story_id === itemId || item.book_id === itemId));
			
			if (itemIndex !== -1) {
				const removedItem = cart.splice(itemIndex, 1)[0];
				localStorage.setItem('cart', JSON.stringify(cart));
				updateCartDisplay();
				updateCartCount();
				showNotification(`Đã xóa "${removedItem.title}" khỏi giỏ hàng!`, 'success');
			}
		};
		
		window.clearCart = function() {
			if (confirm('Bạn có chắc chắn muốn xóa toàn bộ giỏ hàng?')) {
				localStorage.removeItem('cart');
				updateCartDisplay();
				updateCartCount();
				showNotification('Đã xóa toàn bộ giỏ hàng!', 'success');
			}
		};
		
		window.checkout = function() {
			const cart = JSON.parse(localStorage.getItem('cart')) || [];
			if (cart.length === 0) {
				showNotification('Giỏ hàng trống!', 'error');
				return;
			}
			
			// Tính tổng tiền giỏ hàng
			const totalPrice = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
			const totalOriginal = cart.reduce((sum, item) => sum + (item.original_price * item.quantity), 0);
			
			// Tạo dữ liệu giỏ hàng để truyền
			const cartData = {
				items: cart,
				totalPrice: totalPrice,
				totalOriginal: totalOriginal,
				totalItems: cart.reduce((sum, item) => sum + item.quantity, 0),
				timestamp: new Date().toISOString()
			};
			
			// Lưu dữ liệu giỏ hàng vào sessionStorage để truyền sang checkout.html
			sessionStorage.setItem('checkoutCart', JSON.stringify(cartData));
			
			// Chuyển đến trang thanh toán
			showNotification('Đang chuyển đến trang thanh toán...', 'info');
			setTimeout(() => {
				window.location.href = 'checkout.html?source=cart';
			}, 1000);
		};

		// Load cart from localStorage on page load
		function loadCartFromLocalStorage() {
			try {
				const cart = JSON.parse(localStorage.getItem('cart')) || [];
				console.log('Cart loaded from localStorage:', cart);
				
				// Cập nhật hiển thị giỏ hàng
				updateCartDisplay();
				updateCartCount();
				
			} catch (error) {
				console.error('Error loading cart from localStorage:', error);
				// Nếu có lỗi, xóa cart cũ và tạo mới
				localStorage.removeItem('cart');
				updateCartDisplay();
				updateCartCount();
			}
		}

		// Load cart when page loads
		document.addEventListener('DOMContentLoaded', function() {
			loadCartFromLocalStorage();
		});
	
	</script>
</body>

</html> 
